const _0x14d456=_0x2403;(function(_0x29d11e,_0xe02c6){const _0x50a31f=_0x2403,_0x451a80=_0x29d11e();while(!![]){try{const _0x1ccaac=parseInt(_0x50a31f(0xa8))/0x1+-parseInt(_0x50a31f(0xa6))/0x2+parseInt(_0x50a31f(0x148))/0x3+parseInt(_0x50a31f(0xad))/0x4+parseInt(_0x50a31f(0xd4))/0x5+-parseInt(_0x50a31f(0xfd))/0x6*(-parseInt(_0x50a31f(0x14b))/0x7)+-parseInt(_0x50a31f(0x110))/0x8;if(_0x1ccaac===_0xe02c6)break;else _0x451a80['push'](_0x451a80['shift']());}catch(_0x567bef){_0x451a80['push'](_0x451a80['shift']());}}}(_0x8fcf,0xb70b3),window[_0x14d456(0xaf)]=function AndroidClass(){});function include(_0x28e98c){const _0x156a11=_0x14d456;var _0x2ce5fd=document[_0x156a11(0x16a)](_0x156a11(0x124));_0x2ce5fd[_0x156a11(0x14a)]=_0x28e98c,_0x2ce5fd[_0x156a11(0xdb)]=_0x156a11(0xf3),_0x2ce5fd['defer']=!![],document[_0x156a11(0x94)](_0x156a11(0x137))[_0x156a11(0x84)](0x0)['appendChild'](_0x2ce5fd);}include(_0x14d456(0x155)),include(_0x14d456(0xac)),include('iOSSpecific.js');const url_hardwareConfig='api/v2/getHardwareConfigByZcode',url_openGate=_0x14d456(0x91),url_decisionInfo='api/v2/decisionInfo';let url_base={get 'getURL'(){const _0x374413=_0x14d456;if(pinaConfig[_0x374413(0x95)]==_0x374413(0xa3))return'https://pinaboxapi.divrt.co/';else return pinaConfig[_0x374413(0x95)]==_0x374413(0xda)?_0x374413(0x127):_0x374413(0x168);}},loggerURL={get 'getURL'(){const _0x9b4f85=_0x14d456;return pinaConfig[_0x9b4f85(0x95)]==_0x9b4f85(0xa3)?'https://loggerapi.divrt.co/log':_0x9b4f85(0x16c);}},pinaConfig,pinaConfigParams,pinaSdkParams,pinaClientParams,pinaMiscParams,getBeaconListResponse,beaconData,nfcData,qrCode,autoSelectMode,garageLocation={},loopData={},loopDetectorMqttTopic,loopDetected=![],bleDetected=![],collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],gateDecisionDeltaSec,cancelled=![],gate,scanToButtonGreenDeltaSec,atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateloopData=new Map(),maxDistance,beaconsMap=new Map(),altBeaconsMap=new Map(),beaconId,delta,differentiationDelta,loopDetectorSimulation=0x0,commandId,scanToButtonClickDeltaSec,outcome='',gateForBeacon=new Map(),decisionData={},buttonMode,presentButtonMode='-1',minorId=new Map(),minorIdDebug=new Map(),minDistance=new Map(),lastDistance=new Map(),rangeWeightData=new Map(),rangeData=new Map(),deciTime=new Map(),deciDistance=new Map(),firstDistance=new Map(),firstTime=new Map(),loopValues=[],loopList=[],oneBeacon='X',otherBeacon='X',myLaneLoop='X',otherLaneLoop='X',lane=-0x1,currentLocation={},prevQRMessage='',batteryDataDictionaryArray=[],screenAppearanceTime,proximityDataArray=[],weightDataDict={},logArray=[],debugCount=0x0,logStartTime=0x0,beaconIdPedestrian,loopEnabledTime,bleEnabledTime,firstBleHitTime,techType='BLE',bookingID,uid,gateDatainitialised=![],specificationType='',refId;function onClickGateIssues(){const _0x3442da=_0x14d456;try{document[_0x3442da(0x125)]('container_main')[_0x3442da(0x9c)][_0x3442da(0xe9)](_0x3442da(0x13f)),document[_0x3442da(0x125)](_0x3442da(0xa1))['classList'][_0x3442da(0xd1)]('hide');}catch(_0x568dfb){pushException(_0x3442da(0x9e)+_0x568dfb[_0x3442da(0xff)]);}}function onClickBackGateIssues(){const _0x581b74=_0x14d456;try{document[_0x581b74(0x125)]('container_main')[_0x581b74(0x9c)][_0x581b74(0xd1)]('hide'),document[_0x581b74(0x125)](_0x581b74(0xa1))[_0x581b74(0x9c)]['add'](_0x581b74(0x13f));}catch(_0x176c35){pushException(_0x581b74(0x176)+_0x176c35[_0x581b74(0xff)]);}}function onClickPedestrian(){const _0x3f7262=_0x14d456;try{document[_0x3f7262(0x125)]('main_container')['classList'][_0x3f7262(0xe9)]('hide'),document[_0x3f7262(0x125)](_0x3f7262(0x86))[_0x3f7262(0x9c)]['remove']('hide');}catch(_0x4c3068){pushException(_0x3f7262(0xa7)+_0x4c3068['message']);}}function onClickBackPedestrian(){const _0xfbbf49=_0x14d456;try{document[_0xfbbf49(0x125)](_0xfbbf49(0x138))[_0xfbbf49(0x9c)][_0xfbbf49(0xd1)]('hide'),document[_0xfbbf49(0x125)](_0xfbbf49(0x86))[_0xfbbf49(0x9c)][_0xfbbf49(0xe9)]('hide');}catch(_0x2801b2){pushException(_0xfbbf49(0xc9)+_0x2801b2[_0xfbbf49(0xff)]);}}function showOpenButtonPedestrian(){const _0x1b876c=_0x14d456;try{document[_0x1b876c(0x125)](_0x1b876c(0xe7))[_0x1b876c(0xc0)][_0x1b876c(0x154)]='#FFFFFF',document['getElementById'](_0x1b876c(0x156))['classList'][_0x1b876c(0xd1)]('hide');}catch(_0x527ea3){pushException(_0x1b876c(0xa5)+_0x527ea3[_0x1b876c(0xff)]);}}function hideAwaitingPedestrian(){const _0x12a661=_0x14d456;try{document['getElementById'](_0x12a661(0xd7))[_0x12a661(0x9c)][_0x12a661(0xe9)](_0x12a661(0x13f));}catch(_0x5705d8){pushException('hideAwaitingPedestrian\x20'+_0x5705d8['message']);}}function hideOpenButtonPedestrian(){const _0x7262c5=_0x14d456;try{document[_0x7262c5(0x125)](_0x7262c5(0x156))['classList'][_0x7262c5(0xe9)](_0x7262c5(0x13f));}catch(_0x1aacbc){pushException(_0x7262c5(0xa5)+_0x1aacbc['message']);}}function showAwaitingPedestrian(){const _0x54dc38=_0x14d456;try{document['getElementById'](_0x54dc38(0xd7))[_0x54dc38(0x9c)][_0x54dc38(0xd1)](_0x54dc38(0x13f));}catch(_0x253aee){pushException(_0x54dc38(0x12c)+_0x253aee['message']);}}function storeBeaconIdPedestrian(_0x15c804){beaconIdPedestrian=_0x15c804;}function onClickBLEButtonPedestrian(){try{openGatePedestrian();}catch(_0x5437e5){pushException('onClickBLEButton\x20'+_0x5437e5['message']);}}function openGatePedestrian(){const _0x52418f=_0x14d456;if(window[_0x52418f(0x90)][_0x52418f(0x143)]==![]){alert(_0x52418f(0xaa));return;}try{J2N_suspendClick();const _0x2211ad=url_base['getURL']+url_openGate;showProgress(!![]),debugLog('openGatePedestrian'),fetch(_0x2211ad,{'method':_0x52418f(0x107),'body':JSON[_0x52418f(0x175)]({'beaconId':beaconIdPedestrian,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams}),'headers':{'Accept':_0x52418f(0x10f),'Content-Type':_0x52418f(0x10f)}})[_0x52418f(0x13a)](_0x536085=>{const _0x2327d9=_0x52418f;showProgress(![]),_0x536085[_0x2327d9(0x126)]()[_0x2327d9(0x13a)](_0x538202=>{const _0x3d2f81=_0x2327d9;try{_0x538202['status']?(showAwaiting(),hideGateLayout(),hideOpenButton(),onClickBackPedestrian(),onClickBackGateIssues(),document[_0x3d2f81(0x125)]('welcome_text')[_0x3d2f81(0xe8)]='',document['getElementById'](_0x3d2f81(0xcb))['innerHTML']='Move\x20closer\x20to\x20the\x20gate\x20to\x20enter',J2N_postOnInfo(_0x3d2f81(0x8b)),pushLogs()):(J2N_printLog(JSON[_0x3d2f81(0x175)](_0x538202)),J2N_postOnFailure(JSON[_0x3d2f81(0x175)](_0x538202)),pushLogs());}catch(_0xc6e011){showProgress(![]),debugLog('openGatePedExcep\x20'+_0xc6e011['message']),J2N_printLog('openGatePedestrian\x20failure'+_0xc6e011[_0x3d2f81(0xff)]),J2N_postOnFailure(_0x3d2f81(0xe2)),pushException(_0x3d2f81(0x105)+_0xc6e011[_0x3d2f81(0xff)]),pushLogs();}});})[_0x52418f(0x83)](_0x53c84d=>{const _0x5b7b07=_0x52418f;showProgress(![]),debugLog(_0x5b7b07(0x171)+_0x53c84d[_0x5b7b07(0xff)]),J2N_printLog(_0x53c84d['message']),J2N_postOnFailure(_0x5b7b07(0x140)),pushException(_0x5b7b07(0x128)+_0x53c84d['message']);});}catch(_0x50e704){showProgress(![]),debugLog(_0x52418f(0x171)+_0x50e704[_0x52418f(0xff)]),J2N_postOnFailure(_0x52418f(0x140)),pushException('openGate\x20'+_0x50e704[_0x52418f(0xff)]);}}function onClickBLEButton(){const _0x153348=_0x14d456;try{scanToButtonClickDeltaSec=(Date[_0x153348(0xf4)]()-scanToButtonClickDelta)/0x3e8;if(gate[_0x153348(0xb5)](beaconData['beaconConfig']['lanesBeaconsMap'][_0x153348(0xc8)][0x0][_0x153348(0x16f)])===0x0)takeAction(0x1,gateForBeacon[_0x153348(0x129)](gate),gate);else{if(beaconData['beaconConfig'][_0x153348(0xd6)][_0x153348(0xc8)][_0x153348(0x112)]>=0x2&&gate[_0x153348(0xb5)](beaconData[_0x153348(0x15d)]['lanesBeaconsMap'][_0x153348(0xc8)][0x1][_0x153348(0x16f)])===0x0)takeAction(0x2,gateForBeacon[_0x153348(0x129)](gate),gate);else beaconData[_0x153348(0x15d)]['lanesBeaconsMap'][_0x153348(0xc8)][_0x153348(0x112)]>=0x3&&gate[_0x153348(0xb5)](beaconData['beaconConfig'][_0x153348(0xd6)][_0x153348(0xc8)][0x2]['gateID'])===0x0&&takeAction(0x3,gateForBeacon[_0x153348(0x129)](gate),gate);}}catch(_0x59df0d){pushException('onClickBLEButton\x20'+_0x59df0d[_0x153348(0xff)]);}}function onClickGate1(){const _0x4af973=_0x14d456;try{takeAction(0x1,gateForBeacon['get'](beaconData[_0x4af973(0x15d)][_0x4af973(0xd6)][_0x4af973(0xc8)][0x0][_0x4af973(0x16f)]),beaconData['beaconConfig'][_0x4af973(0xd6)]['lanesToBeaconList'][0x0]['gateID']),scanToButtonClickDeltaSec=(Date[_0x4af973(0xf4)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x3beb8f){pushException(_0x4af973(0xb3)+_0x3beb8f[_0x4af973(0xff)]);}}function onClickGate2(){const _0x379ad6=_0x14d456;try{takeAction(0x2,gateForBeacon[_0x379ad6(0x129)](beaconData[_0x379ad6(0x15d)][_0x379ad6(0xd6)]['lanesToBeaconList'][0x1][_0x379ad6(0x16f)]),beaconData[_0x379ad6(0x15d)][_0x379ad6(0xd6)][_0x379ad6(0xc8)][0x0][_0x379ad6(0x16f)]),scanToButtonClickDeltaSec=(Date[_0x379ad6(0xf4)]()-scanToButtonClickDelta)/0x3e8;}catch(_0xabffcf){pushException(_0x379ad6(0xc5)+_0xabffcf[_0x379ad6(0xff)]);}}function onClickGate3(){const _0x11a2a9=_0x14d456;try{takeAction(0x3,gateForBeacon[_0x11a2a9(0x129)](beaconData[_0x11a2a9(0x15d)][_0x11a2a9(0xd6)][_0x11a2a9(0xc8)][0x2][_0x11a2a9(0x16f)]),beaconData['beaconConfig']['lanesBeaconsMap'][_0x11a2a9(0xc8)][0x0]['gateID']),scanToButtonClickDeltaSec=(Date[_0x11a2a9(0xf4)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x477db9){pushException(_0x11a2a9(0x159)+_0x477db9[_0x11a2a9(0xff)]);}}function onClickMoveForward(){const _0x4d051f=_0x14d456;try{document[_0x4d051f(0x125)](_0x4d051f(0x138))['classList']['remove']('hide'),document['getElementById']('alert')['classList'][_0x4d051f(0xe9)](_0x4d051f(0x13f));}catch(_0x11ae88){pushException('onClickMoveForward\x20'+_0x11ae88[_0x4d051f(0xff)]);}}function onClickNFCButton(){J2N_startNFCScan();}function onClickStart(){}function onClickSimulate(){}function onClickQRButton(){const _0x4b20f6=_0x14d456;try{J2N_startQRScan();}catch(_0x1f1c32){pushException('onClickQRButton\x20'+_0x1f1c32[_0x4b20f6(0xff)]);}}function showGateLayout(){const _0x17904d=_0x14d456;try{document[_0x17904d(0x125)](_0x17904d(0xcb))[_0x17904d(0xc0)][_0x17904d(0x154)]=_0x17904d(0x147),document[_0x17904d(0x125)](_0x17904d(0x15b))[_0x17904d(0x9c)][_0x17904d(0xd1)](_0x17904d(0x13f)),document[_0x17904d(0x125)](_0x17904d(0x177))['classList']['remove']('hide'),document[_0x17904d(0x125)]('right_btn')['classList'][_0x17904d(0xd1)](_0x17904d(0x13f)),beaconData[_0x17904d(0x15d)][_0x17904d(0xd6)]['lanesToBeaconList'][_0x17904d(0x112)]>0x2?document[_0x17904d(0x125)](_0x17904d(0x11d))[_0x17904d(0x9c)][_0x17904d(0xd1)](_0x17904d(0x13f)):document[_0x17904d(0x125)](_0x17904d(0x11d))[_0x17904d(0x9c)]['add']('hide'),getBeaconListResponse[_0x17904d(0xc2)][_0x17904d(0xce)]!=null&&getBeaconListResponse[_0x17904d(0xc2)]['isPedestrian'][_0x17904d(0xb5)]('1')===0x0&&document[_0x17904d(0x125)](_0x17904d(0x177))['classList'][_0x17904d(0xe9)](_0x17904d(0x13f));}catch(_0x232cc9){pushException(_0x17904d(0x123)+_0x232cc9[_0x17904d(0xff)]);}}function hideOpenButton(){const _0x14d9f5=_0x14d456;try{document['getElementById'](_0x14d9f5(0x98))[_0x14d9f5(0x9c)][_0x14d9f5(0xe9)](_0x14d9f5(0x13f));}catch(_0x3850de){pushException('hideOpenButton\x20'+_0x3850de['message']);}}function hideGateLayout(){const _0x572493=_0x14d456;try{document['getElementById']('multi_gate')['classList']['add'](_0x572493(0x13f)),document['getElementById'](_0x572493(0x177))[_0x572493(0x9c)]['innerHTML']='',document[_0x572493(0x125)](_0x572493(0x11d))['classList']['innerHTML']='',document['getElementById']('right_btn')[_0x572493(0x9c)][_0x572493(0xe8)]='';}catch(_0x401d85){pushException(_0x572493(0x158)+_0x401d85[_0x572493(0xff)]);}}function showOpenButton(){const _0x24f1a1=_0x14d456;try{document[_0x24f1a1(0x125)](_0x24f1a1(0xcb))[_0x24f1a1(0xc0)][_0x24f1a1(0x154)]=_0x24f1a1(0x147),document[_0x24f1a1(0x125)](_0x24f1a1(0x98))[_0x24f1a1(0x9c)][_0x24f1a1(0xd1)]('hide');}catch(_0x2fab9e){pushException(_0x24f1a1(0xd3)+_0x2fab9e[_0x24f1a1(0xff)]);}}function hideAwaiting(){const _0x345eec=_0x14d456;try{scanToButtonGreenDeltaSec===0x0&&(debugLog(_0x345eec(0xfe)),scanToButtonGreenDeltaSec=(Date[_0x345eec(0xf4)]()-screenAppearanceTime)/0x3e8),document[_0x345eec(0x125)](_0x345eec(0x15e))[_0x345eec(0x9c)][_0x345eec(0xe9)](_0x345eec(0x13f));}catch(_0x2a44f6){pushException(_0x345eec(0xc6)+_0x2a44f6['message']);}}function showAwaiting(){const _0x219ebc=_0x14d456;try{document[_0x219ebc(0x125)](_0x219ebc(0x15e))[_0x219ebc(0x9c)][_0x219ebc(0xd1)]('hide');}catch(_0x49e06c){pushException('showAwaiting\x20'+_0x49e06c[_0x219ebc(0xff)]);}}function showSimulation(){const _0x541d72=_0x14d456;pinaConfigParams[_0x541d72(0x8c)]!=undefined&&pinaConfigParams['simulationMode']?document[_0x541d72(0x125)](_0x541d72(0x9d))['classList'][_0x541d72(0xd1)](_0x541d72(0x13f)):document[_0x541d72(0x125)](_0x541d72(0x9d))[_0x541d72(0x9c)]['add']('hide');}function showDevMode(){const _0x308001=_0x14d456;pinaConfig['environment']!=undefined&&pinaConfig[_0x308001(0x95)][_0x308001(0xb5)](_0x308001(0xa3))?document[_0x308001(0x125)](_0x308001(0x160))[_0x308001(0x9c)]['remove'](_0x308001(0x13f)):document['getElementById'](_0x308001(0x160))[_0x308001(0x9c)][_0x308001(0xe9)](_0x308001(0x13f));}function showGateIssues(){const _0x5c7c81=_0x14d456;nfcData[_0x5c7c81(0xeb)]==0x0&&qrCode[_0x5c7c81(0xeb)]==0x0&&document[_0x5c7c81(0x125)](_0x5c7c81(0xd0))[_0x5c7c81(0x9c)][_0x5c7c81(0xe9)](_0x5c7c81(0x13f)),nfcData[_0x5c7c81(0xeb)]==0x0&&document[_0x5c7c81(0x125)]('button_nfc')[_0x5c7c81(0x9c)][_0x5c7c81(0xe9)](_0x5c7c81(0x13f)),qrCode[_0x5c7c81(0xeb)]==0x0&&document[_0x5c7c81(0x125)](_0x5c7c81(0x133))[_0x5c7c81(0x9c)][_0x5c7c81(0xe9)](_0x5c7c81(0x13f)),document[_0x5c7c81(0x125)](_0x5c7c81(0xbb))[_0x5c7c81(0x9c)][_0x5c7c81(0xe9)]('hide'),document[_0x5c7c81(0x125)](_0x5c7c81(0x93))[_0x5c7c81(0x9c)]['remove']('hide'),document[_0x5c7c81(0x125)]('main_container')[_0x5c7c81(0x9c)][_0x5c7c81(0xd1)]('hide'),document['getElementById']('container_pedestrian')['classList'][_0x5c7c81(0xe9)](_0x5c7c81(0x13f)),document[_0x5c7c81(0x125)](_0x5c7c81(0x9a))[_0x5c7c81(0x9c)]['remove']('hide'),document[_0x5c7c81(0x125)](_0x5c7c81(0xa1))[_0x5c7c81(0x9c)][_0x5c7c81(0xe9)](_0x5c7c81(0x13f));}function flushData(){const _0x4fce4e=_0x14d456;try{garageLocation={},loopData={},loopDetected=![],bleDetected=![],presentButtonMode='-1',collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],cancelled=![],gate='',atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateDatainitialised=![],gateloopData=new Map(),beaconsMap=new Map(),altBeaconsMap=new Map(),loopDetectorSimulation=0x0,outcome='',gateForBeacon=new Map(),decisionData={},minorId=new Map(),minDistance=new Map(),lastDistance=new Map(),prevQRMessage='',specificationType='',scanToButtonGreenDelta=Date[_0x4fce4e(0xf4)](),scanToButtonClickDelta=Date[_0x4fce4e(0xf4)](),gateDecisionDelta=Date[_0x4fce4e(0xf4)](),screenAppearanceTime=Date[_0x4fce4e(0xf4)](),scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,bookingID='',refId='',uid='',differentiationDelta=0x0,hideOpenButton(),hideGateLayout(),showAwaiting(),hideOpenButtonPedestrian(),showAwaitingPedestrian();}catch(_0x56468e){pushException(_0x4fce4e(0x144)+_0x56468e[_0x4fce4e(0xff)]);}}function validateHardwareConfig(_0xe7bd39){const _0x5b3c33=_0x14d456;try{getBeaconListResponse=JSON[_0x5b3c33(0xae)](_0xe7bd39),getBeaconListResponse!=undefined?initHardwareConfig():getHardwareConfiguration();}catch(_0x44beec){getHardwareConfiguration(),pushException('validateHardwareConfig\x20'+_0x44beec[_0x5b3c33(0xff)]);}}function _0x2403(_0x44afeb,_0x441a62){const _0x8fcf69=_0x8fcf();return _0x2403=function(_0x240323,_0x335dec){_0x240323=_0x240323-0x82;let _0x2b6290=_0x8fcf69[_0x240323];return _0x2b6290;},_0x2403(_0x44afeb,_0x441a62);}function prefetchHardwareConfiguration(_0x524ce7,_0x401f74){const _0x41b881=_0x14d456;validatePinaConfig(_0x524ce7),_0x401f74!=undefined?(getBeaconListResponse=JSON[_0x41b881(0xae)](_0x401f74),initHardwareConfig(),J2N_printLog(_0x41b881(0x10e))):getHardwareConfiguration(function(){J2N_printLog('~latestHardWareConfigruation');});}function initSDKMethods(){const _0x1b3584=_0x14d456;if(getBeaconListResponse!=undefined&&pinaConfig[_0x1b3584(0x157)]['gateType']==getBeaconListResponse[_0x1b3584(0xc2)][_0x1b3584(0xdb)]){let _0x1aa5c6={};_0x1aa5c6[_0x1b3584(0xd5)]='tcp://mqtts.divrt.co:1883',_0x1aa5c6[_0x1b3584(0x115)]='phpMQTT-subscriber',_0x1aa5c6[_0x1b3584(0x14e)]=pinaConfig[_0x1b3584(0x95)]=='PROD'?_0x1b3584(0x12b):_0x1b3584(0x109),_0x1aa5c6['password']=pinaConfig[_0x1b3584(0x95)]==_0x1b3584(0xa3)?_0x1b3584(0x96):_0x1b3584(0x14c),_0x1aa5c6[_0x1b3584(0x114)]=getBeaconListResponse[_0x1b3584(0xc2)][_0x1b3584(0xf9)]['loopConfig'][_0x1b3584(0x13e)],loopList=getBeaconListResponse['data'][_0x1b3584(0xf9)][_0x1b3584(0xd9)],rangeData=new Map();if(isiOS()){_0x1aa5c6[_0x1b3584(0xd5)]=pinaConfig[_0x1b3584(0x95)]==_0x1b3584(0xa3)?'mqtts.divrt.co':'broker.mqttdashboard.com',J2N_startLoopScan(JSON[_0x1b3584(0x175)](_0x1aa5c6)),debugLog(_0x1b3584(0x167));let _0x28ae97=beaconData[_0x1b3584(0x15d)][_0x1b3584(0x161)],_0x3dda8a=beaconData['beaconConfig'][_0x1b3584(0x162)],_0x4bb2a1={'arrayRangeCount':_0x28ae97,'estimoteCloudDetailsModel':_0x3dda8a};J2N_startBeaconScan(JSON[_0x1b3584(0x175)](_0x4bb2a1)),debugLog(_0x1b3584(0xa2));}(pinaConfigParams[_0x1b3584(0x8c)]!=undefined&&pinaConfigParams[_0x1b3584(0x8c)]||getBeaconListResponse[_0x1b3584(0xc2)][_0x1b3584(0x89)]!=undefined&&getBeaconListResponse[_0x1b3584(0xc2)][_0x1b3584(0x89)][_0x1b3584(0xb5)]('1')===0x0)&&(initLoopData(),initBeaconData());}else getHardwareConfiguration(function(){displayWebViewAndStartSDK();});}function displayWebViewAndStartSDK(_0x3a40c0,_0x1edb47){const _0x2242fe=_0x14d456;try{debugLog(_0x2242fe(0xba));if(_0x3a40c0!=undefined){let _0x1af5f3=JSON[_0x2242fe(0xae)](_0x3a40c0);_0x1af5f3[_0x2242fe(0x157)][_0x2242fe(0x172)]!=pinaConfig[_0x2242fe(0x157)][_0x2242fe(0x172)]&&(getBeaconListResponse=undefined),validatePinaConfig(_0x3a40c0);}getBeaconListResponse!=undefined&&_0x1edb47!=undefined&&(getBeaconListResponse=JSON[_0x2242fe(0xae)](_0x1edb47),initHardwareConfig());scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,debugLog(_0x2242fe(0xef)),showSimulation(),showDevMode();if(pinaConfig[_0x2242fe(0x95)]==_0x2242fe(0xa3)&&pinaConfigParams[_0x2242fe(0x8c)]==!![]){alert(_0x2242fe(0xb8));return;}initSDKMethods();}catch(_0x5cef9a){J2N_printLog(_0x5cef9a['message']),pushException(_0x2242fe(0xf1)+_0x5cef9a[_0x2242fe(0xff)]);}}function validatePinaConfig(_0x170367){const _0x384f5f=_0x14d456;try{flushData(),pinaConfig=JSON['parse'](_0x170367);isiOS()?(pinaConfigParams=pinaConfig[_0x384f5f(0x157)],pinaSdkParams=pinaConfig['pinaSdkParams'],pinaClientParams=pinaConfig[_0x384f5f(0xbe)]):(pinaConfigParams=pinaConfig['pinaConfigParams'][_0x384f5f(0xe0)],pinaSdkParams=pinaConfig[_0x384f5f(0x134)][_0x384f5f(0xe0)],pinaClientParams=pinaConfig['pinaClientParams']['nameValuePairs'],pinaMiscParams=pinaConfig[_0x384f5f(0xe1)][_0x384f5f(0xe0)]);document[_0x384f5f(0x125)](_0x384f5f(0x11b))[_0x384f5f(0xe8)]=pinaSdkParams[_0x384f5f(0x116)],document[_0x384f5f(0x125)](_0x384f5f(0xcb))[_0x384f5f(0xc0)][_0x384f5f(0x154)]=pinaSdkParams[_0x384f5f(0x170)]||_0x384f5f(0xb7);pinaConfigParams[_0x384f5f(0xdc)][_0x384f5f(0xb5)]('IN')===0x0?document['getElementById'](_0x384f5f(0xcb))[_0x384f5f(0xe8)]=_0x384f5f(0x120):document['getElementById']('move_closer_text')['innerHTML']=_0x384f5f(0xa9);showDevMode();if(pinaSdkParams[_0x384f5f(0x170)]!=undefined){var _0x3e4f09=document[_0x384f5f(0x12f)](_0x384f5f(0xcf)),_0x123ce0=document[_0x384f5f(0x12f)](_0x384f5f(0xb6)),_0x44f8f6=document[_0x384f5f(0x12f)](_0x384f5f(0xfc)),_0x407972=document[_0x384f5f(0x12f)](_0x384f5f(0xbb));for(var _0x1b75a8=0x0;_0x1b75a8<_0x3e4f09[_0x384f5f(0x112)];_0x1b75a8++){_0x3e4f09[_0x1b75a8][_0x384f5f(0xc0)][_0x384f5f(0x13b)]=pinaSdkParams[_0x384f5f(0x170)];}for(var _0x1b75a8=0x0;_0x1b75a8<_0x123ce0[_0x384f5f(0x112)];_0x1b75a8++){_0x123ce0[_0x1b75a8][_0x384f5f(0xc0)]['background']=pinaSdkParams[_0x384f5f(0x170)];}for(var _0x1b75a8=0x0;_0x1b75a8<_0x44f8f6[_0x384f5f(0x112)];_0x1b75a8++){_0x44f8f6[_0x1b75a8]['style']['background']=pinaSdkParams[_0x384f5f(0x170)];}for(var _0x1b75a8=0x0;_0x1b75a8<_0x407972[_0x384f5f(0x112)];_0x1b75a8++){_0x44f8f6[_0x1b75a8][_0x384f5f(0xc0)][_0x384f5f(0x13b)]=pinaSdkParams[_0x384f5f(0x170)];}document[_0x384f5f(0x125)](_0x384f5f(0xe7))[_0x384f5f(0xc0)][_0x384f5f(0x154)]=pinaSdkParams['gateButtonBgColor'],document['getElementById'](_0x384f5f(0xcb))[_0x384f5f(0xc0)][_0x384f5f(0x154)]=pinaSdkParams[_0x384f5f(0x170)];}pinaSdkParams[_0x384f5f(0x139)]!=undefined?document[_0x384f5f(0x125)](_0x384f5f(0x165))['src']=pinaSdkParams['appIconImage']:document['getElementById'](_0x384f5f(0x165))[_0x384f5f(0x14a)]='https://static.divrt.co/images/pinabox/spp/spplogo.png';}catch(_0x2512a7){J2N_printLog(_0x2512a7[_0x384f5f(0xff)]),pushException(_0x384f5f(0xfb)+_0x2512a7[_0x384f5f(0xff)]);}}function validateLoopData(_0x4c6cb3){const _0x236b50=_0x14d456;try{const _0x235d3f=JSON[_0x236b50(0xae)](_0x4c6cb3);for(let _0x5b6bfc=0x0;_0x5b6bfc<getBeaconListResponse[_0x236b50(0xc2)][_0x236b50(0xf9)]['loopConfig'][_0x236b50(0x16b)][_0x236b50(0x112)];_0x5b6bfc++){_0x235d3f[_0x236b50(0x103)][_0x236b50(0xb5)](getBeaconListResponse[_0x236b50(0xc2)]['loopData'][_0x236b50(0xed)][_0x236b50(0x16b)][_0x5b6bfc]['loop0Topic'])===0x0&&(gateloopData[_0x236b50(0xf6)](getBeaconListResponse['data'][_0x236b50(0xf9)][_0x236b50(0xed)][_0x236b50(0x16b)][_0x5b6bfc][_0x236b50(0x16f)],_0x235d3f['value']),gateDatainitialised&&(_0x235d3f['value']===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date[_0x236b50(0xf4)]()-screenAppearanceTime)/0x3e8)),presentButtonMode[_0x236b50(0x11e)]()[_0x236b50(0xb5)]('-1')===0x0&&!(getBeaconListResponse[_0x236b50(0xc2)][_0x236b50(0xf9)]['loopConfig'][_0x236b50(0x111)][_0x236b50(0xb5)]('0')===0x0)&&takeAction(undefined,undefined,undefined)),_0x235d3f['time']=returnDelta(),loopValues[_0x236b50(0x142)](_0x235d3f));}}catch(_0x3a628c){pushException('validateLoopData\x20'+_0x3a628c['message']);}}function validateLatLong(_0x422b49){const _0x47ad72=_0x14d456;try{const _0x4fb14a=JSON[_0x47ad72(0xae)](_0x422b49);currentLocation['latitude']=_0x4fb14a[_0x47ad72(0x102)],currentLocation[_0x47ad72(0xd2)]=_0x4fb14a[_0x47ad72(0xd2)],J2N_printLog(_0x47ad72(0x12a)+_0x4fb14a['latitude']),J2N_printLog('latLong.longitude'+_0x4fb14a[_0x47ad72(0xd2)]);}catch(_0x44283a){pushException('validateLatLong\x20'+_0x44283a['message']);}}function getDistanceFromLatLonInKm(_0x9da21b,_0x57daea,_0x5663b4,_0x52ce17){const _0x1d5987=_0x14d456;try{let _0x6fc40c=0x18e3,_0x49802c=deg2rad(_0x5663b4-_0x9da21b),_0x1109cd=deg2rad(_0x52ce17-_0x57daea),_0x35bfa0=Math['sin'](_0x49802c/0x2)*Math[_0x1d5987(0x11c)](_0x49802c/0x2)+Math['cos'](deg2rad(_0x9da21b))*Math[_0x1d5987(0x97)](deg2rad(_0x5663b4))*Math['sin'](_0x1109cd/0x2)*Math[_0x1d5987(0x11c)](_0x1109cd/0x2),_0x311c65=0x2*Math['atan2'](Math[_0x1d5987(0x166)](_0x35bfa0),Math['sqrt'](0x1-_0x35bfa0)),_0x419edb=_0x6fc40c*_0x311c65;return _0x419edb;}catch(_0x5bc4fa){pushException(_0x1d5987(0x8e)+_0x5bc4fa[_0x1d5987(0xff)]);}}function deg2rad(_0x3d8d1c){const _0x19bf13=_0x14d456;try{return _0x3d8d1c*(Math['PI']/0xb4);}catch(_0x49fc3d){pushException('deg2rad\x20'+_0x49fc3d[_0x19bf13(0xff)]);}}function validateNFC(_0x59bd52){const _0x3909cf=_0x14d456;try{beaconId=_0x59bd52,techType=_0x3909cf(0x104),specificationType='2',openGate();}catch(_0x6a854b){J2N_printLog(_0x6a854b[_0x3909cf(0xff)]),J2N_postOnFailure(_0x3909cf(0xe6)),pushException('validateNFC\x20'+_0x6a854b['message']);}}function validateQR(_0x175b11){const _0x52e020=_0x14d456;try{if(prevQRMessage['localeCompare'](_0x175b11)===0x0){}else prevQRMessage=_0x175b11,beaconId=prevQRMessage,techType='QR',specificationType='3',openGate();}catch(_0x3082f4){J2N_printLog(_0x3082f4[_0x52e020(0xff)]),J2N_postOnFailure(_0x52e020(0xbd)),pushException('validateQR\x20'+_0x3082f4[_0x52e020(0xff)]);}}function takeAction(_0x256edf,_0x1e3169,_0x50de96){const _0x128f21=_0x14d456;try{if(pinaConfigParams['simulationMode']!=undefined&&pinaConfigParams[_0x128f21(0x8c)]||getBeaconListResponse['data'][_0x128f21(0x89)]!=undefined&&getBeaconListResponse[_0x128f21(0xc2)]['demoGarage'][_0x128f21(0xb5)]('1')===0x0)debugLog('simulationMode=true'),presentButtonMode[_0x128f21(0xb5)]('-1')===0x0?(presentButtonMode='1',isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout()):_0x50de96!=undefined&&(beaconId=_0x1e3169,openGate());else{if(gateDatainitialised){if(getBeaconListResponse['data'][_0x128f21(0xf9)]['loopConfig'][_0x128f21(0x111)][_0x128f21(0xb5)]('0')===0x0)presentButtonMode[_0x128f21(0xb5)]('-1')===0x0?(isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1'):_0x256edf!=undefined&&(beaconId=_0x1e3169,openGate());else try{beaconId=_0x1e3169,myLaneLoop='0',otherLaneLoop='0';if(presentButtonMode[_0x128f21(0xb5)]('-1')===0x0&&(!loopDetected||!bleDetected))return;else{presentButtonMode[_0x128f21(0xb5)]('-1')===0x0&&loopDetected&&bleDetected&&(isiOS()?selectGateiOS():selectGateAndroid());gateDecisionDeltaSec===0x0&&(gateDecisionDeltaSec=(Date[_0x128f21(0xf4)]()-screenAppearanceTime)/0x3e8);let _0x2e01d3='-1',_0x2e243e='-1',_0x486438='-1',_0x32d29d=0x0;for(let [_0x1b193,_0x315c1e]of gateloopData){if(_0x32d29d===0x0)_0x2e01d3=''+_0x315c1e,_0x32d29d++;else{if(_0x32d29d===0x1)_0x2e243e=''+_0x315c1e,_0x32d29d++;else _0x32d29d===0x2&&(_0x486438=''+_0x315c1e,_0x32d29d++);}}let _0x395373=_0x256edf!=undefined?_0x256edf:lane;switch(_0x395373){case 0x1:if(_0x2e01d3[_0x128f21(0xb5)]('1')===0x0)myLaneLoop=0x1;if(_0x2e243e[_0x128f21(0xb5)]('1')===0x0||_0x486438[_0x128f21(0xb5)]('1')===0x0)otherLaneLoop=0x1;break;case 0x2:if(_0x2e243e[_0x128f21(0xb5)]('1')===0x0)myLaneLoop=0x1;if(_0x2e01d3['localeCompare']('1')===0x0||_0x486438[_0x128f21(0xb5)]('1')===0x0)otherLaneLoop=0x1;break;case 0x3:if(_0x486438[_0x128f21(0xb5)]('1')===0x0)myLaneLoop=0x1;if(_0x2e01d3[_0x128f21(0xb5)]('1')===0x0||_0x2e243e[_0x128f21(0xb5)]('1')===0x0)otherLaneLoop=0x1;break;default:break;}let _0x4606ae;if(loopList!=null&&loopList[_0x128f21(0x112)]>0x0)for(let _0x35c768=0x0;_0x35c768<loopList[_0x128f21(0x112)];_0x35c768++){if((loopList[_0x35c768][_0x128f21(0x164)][_0x128f21(0xb5)]('X')===0x0||loopList[_0x35c768]['oneBeacon'][_0x128f21(0xb5)](oneBeacon)===0x0)&&(loopList[_0x35c768]['otherBeacon'][_0x128f21(0xb5)]('X')===0x0||loopList[_0x35c768][_0x128f21(0x131)]['localeCompare'](otherBeacon)===0x0)&&(loopList[_0x35c768][_0x128f21(0xdd)][_0x128f21(0xb5)]('X')===0x0||loopList[_0x35c768][_0x128f21(0xdd)][_0x128f21(0xb5)](myLaneLoop)===0x0)&&(loopList[_0x35c768][_0x128f21(0x11f)][_0x128f21(0xb5)]('X')===0x0||loopList[_0x35c768][_0x128f21(0x11f)][_0x128f21(0xb5)](otherLaneLoop)===0x0)&&loopList[_0x35c768][_0x128f21(0x132)]['localeCompare'](presentButtonMode)===0x0){_0x4606ae=loopList[_0x35c768];if(outcome===''||_0x50de96!=undefined){if(_0x50de96!=undefined)outcome=outcome+_0x4606ae[_0x128f21(0x15f)][_0x128f21(0x88)]('#',_0x50de96);else gate!=undefined&&(outcome=outcome+_0x4606ae[_0x128f21(0x15f)][_0x128f21(0x88)]('#',gate));}switch(_0x4606ae[_0x128f21(0xde)]){case'-1':presentButtonMode=_0x4606ae[_0x128f21(0xde)];break;case'0':_0x50de96!=undefined&&openGate();break;case'1':buttonMode='single',hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode=_0x4606ae[_0x128f21(0xde)];break;case'2':buttonMode=_0x128f21(0xb4),hideAwaiting(),showGateLayout(),hideOpenButton(),presentButtonMode=_0x4606ae[_0x128f21(0xde)];break;case'3':document[_0x128f21(0x125)](_0x128f21(0x138))['classList']['add'](_0x128f21(0x13f)),document[_0x128f21(0x125)]('alert')['classList'][_0x128f21(0xd1)](_0x128f21(0x13f));break;default:break;}return;}}}}catch(_0x551c31){J2N_printLog(_0x551c31[_0x128f21(0xff)]),pushException(_0x128f21(0x145)+_0x551c31[_0x128f21(0xff)]);}}}}catch(_0xc6f563){pushException(_0x128f21(0x10a)+_0xc6f563[_0x128f21(0xff)]);}}function showProgress(_0x303d2b){const _0x92c214=_0x14d456;try{var _0x42a9ec=document[_0x92c214(0x125)](_0x92c214(0xbb));_0x303d2b?_0x42a9ec[_0x92c214(0x9c)][_0x92c214(0xd1)](_0x92c214(0x13f)):_0x42a9ec[_0x92c214(0x9c)][_0x92c214(0xe9)](_0x92c214(0x13f));}catch(_0x13eee2){pushException('showProgress\x20'+_0x13eee2['message']);}}function getHardwareConfiguration(_0x5adb13){const _0x37e664=_0x14d456;try{const _0x574d48=url_base['getURL']+url_hardwareConfig;showProgress(!![]),debugLog('getHardwareConfiguration'),fetch(_0x574d48,{'method':_0x37e664(0x107),'body':JSON[_0x37e664(0x175)]({'pinaConfigParams':pinaConfigParams,'pinaJSParams':pinaConfig[_0x37e664(0x8d)]}),'headers':{'Accept':_0x37e664(0x10f),'Content-Type':_0x37e664(0x10f)}})[_0x37e664(0x13a)](_0x30edf=>_0x30edf['json']())['then'](_0x527407=>{const _0x990d20=_0x37e664;showProgress(![]);let _0x518b3a=!!_0x527407[_0x990d20(0xeb)]||![],_0x1a2119=_0x527407[_0x990d20(0xff)]||'';_0x518b3a==!![]?(getBeaconListResponse=_0x527407,J2N_forceJSupdate(JSON[_0x990d20(0x175)](_0x527407)),initHardwareConfig(),_0x5adb13()):debugLog(_0x990d20(0x130),_0x1a2119);})[_0x37e664(0x83)](_0x387678=>{const _0x1cf1d1=_0x37e664;J2N_printLog(_0x387678[_0x1cf1d1(0xff)]),showProgress(![]),pushException(_0x1cf1d1(0x10c)+_0x387678['message']);});}catch(_0x325a6b){showProgress(![]),pushException(_0x37e664(0xb9)+_0x325a6b['message']);}}function initHardwareConfig(){const _0x47bed3=_0x14d456;try{beaconData=getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0xf7)],nfcData=getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0x12e)],qrCode=getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0x85)];getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0xce)]!=null&&getBeaconListResponse[_0x47bed3(0xc2)]['isPedestrian']['localeCompare']('1')===0x0?document[_0x47bed3(0x125)](_0x47bed3(0x10d))['classList']['remove']('invisible'):document[_0x47bed3(0x125)](_0x47bed3(0x10d))['classList'][_0x47bed3(0xe9)](_0x47bed3(0xc7));if(isiOS()){let _0x2aa3f6=beaconData[_0x47bed3(0x15d)][_0x47bed3(0x161)];for(let _0x5d1e81=0x0;_0x5d1e81<_0x2aa3f6[_0x47bed3(0x112)];_0x5d1e81++){rangeWeightData[_0x47bed3(0xf6)](_0x2aa3f6[_0x5d1e81]['radius'],_0x2aa3f6[_0x5d1e81][_0x47bed3(0x9f)]);}}autoSelectMode=beaconData['beaconConfig'][_0x47bed3(0x174)],autoSelectMode['minimumBeaconThreshold']=beaconData[_0x47bed3(0x15d)][_0x47bed3(0x122)],autoSelectMode[_0x47bed3(0x152)]=beaconData[_0x47bed3(0x15d)][_0x47bed3(0x122)],maxDistance=parseInt(qrCode['qrConfig'][_0x47bed3(0x11a)]),garageLocation['name']=_0x47bed3(0x15c),garageLocation[_0x47bed3(0x102)]=parseFloat(getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0xa0)]),garageLocation[_0x47bed3(0xd2)]=parseFloat(getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0x12d)]),loopDetectors=getBeaconListResponse[_0x47bed3(0xc2)]['loopData'][_0x47bed3(0x16e)];for(let _0x1b5242=0x0;_0x1b5242<beaconData[_0x47bed3(0x15d)][_0x47bed3(0xd6)][_0x47bed3(0xc8)][_0x47bed3(0x112)];_0x1b5242++){gateloopData[_0x47bed3(0xf6)](beaconData[_0x47bed3(0x15d)][_0x47bed3(0xd6)]['lanesToBeaconList'][_0x1b5242]['gateID'],0x0);}let _0x5d963a={};_0x5d963a[_0x47bed3(0xd5)]=_0x47bed3(0x92),_0x5d963a[_0x47bed3(0x115)]=_0x47bed3(0x13d),_0x5d963a[_0x47bed3(0x14e)]=_0x47bed3(0x12b),_0x5d963a[_0x47bed3(0x113)]=_0x47bed3(0x96),_0x5d963a[_0x47bed3(0x114)]=getBeaconListResponse['data'][_0x47bed3(0xf9)][_0x47bed3(0xed)][_0x47bed3(0x13e)],loopList=getBeaconListResponse[_0x47bed3(0xc2)][_0x47bed3(0xf9)][_0x47bed3(0xd9)],showGateIssues();}catch(_0x2ef48b){J2N_printLog(_0x2ef48b['message']),pushException(_0x47bed3(0xbf)+_0x2ef48b[_0x47bed3(0xff)]);}}function openGate(){const _0x414837=_0x14d456;if(pinaConfig['environment']=='PROD'&&pinaConfigParams[_0x414837(0x8c)]==!![]){alert(_0x414837(0xb8));return;}if(window[_0x414837(0x90)][_0x414837(0x143)]==![]){alert(_0x414837(0xaa));return;}try{J2N_suspendClick();const _0x29e941=url_base[_0x414837(0xb2)]+url_openGate;showProgress(!![]),debugLog(_0x414837(0x82)),fetch(_0x29e941,{'method':_0x414837(0x107),'body':JSON['stringify']({'beaconId':beaconId,'specification_type':specificationType,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'pinaJSParams':pinaConfig[_0x414837(0x8d)]}),'headers':{'Accept':'application/json','Content-Type':_0x414837(0x10f)}})[_0x414837(0x13a)](_0x372664=>{const _0x334192=_0x414837;showProgress(![]),_0x372664[_0x334192(0x126)]()[_0x334192(0x13a)](_0x357d0b=>{const _0x347bdd=_0x334192;try{_0x357d0b[_0x347bdd(0xeb)]?(showAwaiting(),hideGateLayout(),hideOpenButton(),document[_0x347bdd(0x125)](_0x347bdd(0x11b))['innerHTML']='',document[_0x347bdd(0x125)](_0x347bdd(0xcb))[_0x347bdd(0xe8)]='Move\x20closer\x20to\x20the\x20gate\x20to\x20enter',document[_0x347bdd(0x125)](_0x347bdd(0x93))[_0x347bdd(0x9c)][_0x347bdd(0xe9)]('hide'),document[_0x347bdd(0x125)](_0x347bdd(0xbb))[_0x347bdd(0x9c)][_0x347bdd(0xd1)](_0x347bdd(0x13f)),bookingID=_0x357d0b[_0x347bdd(0xf8)],refId=_0x357d0b[_0x347bdd(0xf8)],uid=_0x357d0b['uid'],pushLogs(),J2N_postOnSuccess(JSON[_0x347bdd(0x175)](_0x357d0b))):(J2N_printLog(JSON['stringify'](_0x357d0b)),J2N_postOnFailure(JSON[_0x347bdd(0x175)](_0x357d0b)),pushLogs());}catch(_0x16091a){showProgress(![]),debugLog(_0x347bdd(0x117)+_0x16091a['message']),J2N_printLog('Open\x20Gate\x20failure'+_0x16091a['message']),J2N_postOnFailure('Gate\x20open\x20failure'),pushException(_0x347bdd(0xdf)+_0x16091a[_0x347bdd(0xff)]),pushLogs();}});})[_0x414837(0x83)](_0x2ed0e7=>{const _0x3694e2=_0x414837;showProgress(![]),debugLog(_0x3694e2(0x117)+_0x2ed0e7['message']),J2N_printLog(_0x2ed0e7[_0x3694e2(0xff)]),J2N_postOnFailure(_0x3694e2(0x140)),pushException('openGate\x20response\x20outer'+_0x2ed0e7[_0x3694e2(0xff)]);});}catch(_0x8d569b){showProgress(![]),debugLog(_0x414837(0x117)+_0x8d569b[_0x414837(0xff)]),J2N_postOnFailure(_0x414837(0x140)),pushException(_0x414837(0x163)+_0x8d569b[_0x414837(0xff)]);}}function pushLogs(){const _0x47f627=_0x14d456;try{let _0x4b604e=[];for(let [_0x520c5d,_0x127608]of minorId){let _0x453741={};_0x453741[_0x47f627(0xe5)]=_0x520c5d,_0x453741[_0x47f627(0x14f)]=lastDistance[_0x47f627(0x129)](_0x520c5d),_0x453741[_0x47f627(0x151)]=minDistance[_0x47f627(0x129)](_0x520c5d),_0x453741[_0x47f627(0x100)]=firstDistance[_0x47f627(0x129)](_0x520c5d),_0x453741[_0x47f627(0xf2)]=firstTime[_0x47f627(0x129)](_0x520c5d),_0x4b604e['push'](_0x453741);}isiOS()?decisionData['beaconData']=Object[_0x47f627(0xe4)](weightDataDict):decisionData['beaconData']=_0x4b604e;decisionData['loopData']=loopValues,decisionData[_0x47f627(0x141)]=beaconId,decisionData[_0x47f627(0xf5)]=differentiationDelta,decisionData['scanToButtonGreenDelta']=scanToButtonGreenDeltaSec,decisionData['scanToButtonClickDelta']=scanToButtonClickDeltaSec,decisionData[_0x47f627(0xcc)]=gateDecisionDeltaSec,decisionData[_0x47f627(0xc3)]=pinaConfigParams[_0x47f627(0x8c)],decisionData[_0x47f627(0xee)]=buttonMode,decisionData[_0x47f627(0x106)]=logArray,(decisionData[_0x47f627(0x153)]=proximityDataArray,decisionData['outcome']=outcome),decisionData[_0x47f627(0x135)]=bookingID,decisionData[_0x47f627(0x87)]=refId,decisionData[_0x47f627(0x118)]=uid,decisionData[_0x47f627(0xdc)]=pinaConfigParams[_0x47f627(0xdc)],decisionData[_0x47f627(0xca)]=pinaConfigParams[_0x47f627(0xca)],decisionData[_0x47f627(0x172)]=pinaConfigParams[_0x47f627(0x172)],decisionData['uniqueID']=pinaConfigParams[_0x47f627(0xf0)],decisionData[_0x47f627(0x8f)]=parseJwt(pinaClientParams[_0x47f627(0x108)]),decisionData[_0x47f627(0xd8)]=techType,decisionData['firstBleHitTime']=firstBleHitTime,decisionData['bleEnabledTime']=bleEnabledTime,decisionData[_0x47f627(0x15a)]=loopEnabledTime,decisionData[_0x47f627(0xb0)]=pinaConfig[_0x47f627(0x8d)][_0x47f627(0x136)],decisionData[_0x47f627(0xec)]=pinaConfigParams[_0x47f627(0xec)];const _0x425eeb=url_base['getURL']+url_decisionInfo;logger(),fetch(_0x425eeb,{'method':_0x47f627(0x107),'body':JSON[_0x47f627(0x175)](decisionData),'headers':{'Accept':'application/json','Content-Type':_0x47f627(0x10f)}})[_0x47f627(0x13a)](_0x14ef7b=>{})['catch'](_0xab8685=>{const _0x2415cc=_0x47f627;pushException(_0x2415cc(0xcd)+_0xab8685[_0x2415cc(0xff)]);});}catch(_0x16b52e){pushException(_0x47f627(0x146)+_0x16b52e[_0x47f627(0xff)]);}}function startCountDownTimer(_0x358b2c){const _0x490a55=_0x14d456;try{_0x358b2c?setTimeout(function(){const _0x7d1bd9=_0x2403;bleEnabledTime===0x0&&(bleEnabledTime=(Date['now']()-screenAppearanceTime)/0x3e8),bleDetected=!![],thresholdTimerExecuted=!![],takeAction(undefined,undefined,undefined),debugLog(_0x7d1bd9(0x101));},parseFloat(autoSelectMode[_0x490a55(0x150)])*0x3e8||0xbb8):thresholdTimerExecuted&&takeAction(undefined,undefined,undefined);}catch(_0x6b46dd){pushException(_0x490a55(0xb1)+_0x6b46dd[_0x490a55(0xff)]);}}function pushException(_0xb55978){const _0x1c5046=_0x14d456;debugLog('Exception'+_0xb55978),fetch(loggerURL[_0x1c5046(0xb2)],{'method':_0x1c5046(0x107),'body':JSON[_0x1c5046(0x175)]({'exception':_0xb55978,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams[_0x1c5046(0x108)]),'uid':parseInt(pinaConfig[_0x1c5046(0x157)]['uid'])||-0x1}),'headers':{'Accept':_0x1c5046(0x10f),'Content-Type':_0x1c5046(0x10f)}})[_0x1c5046(0x13a)](_0x1188e0=>{});}function logger(){const _0x11d2d5=_0x14d456;fetch(loggerURL[_0x11d2d5(0xb2)],{'method':_0x11d2d5(0x107),'body':JSON[_0x11d2d5(0x175)]({'decisionData':decisionData,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams[_0x11d2d5(0x108)]),'uid':parseInt(pinaConfig[_0x11d2d5(0x157)]['uid'])||-0x1}),'headers':{'Accept':_0x11d2d5(0x10f),'Content-Type':_0x11d2d5(0x10f)}})['then'](_0x1aced0=>{});}function _0x8fcf(){const _0x50e8a6=['navigator','api/v2/openGate','tcp://mqtts.divrt.co:1883','container','getElementsByTagName','environment','parking','cos','button_enable','delete','container_main','PinaTest','classList','simulation','onClickGateIssues\x20','weight','garageLatitude','container_gate_issues','J2N_startBeaconScan','PROD','\x20-\x20','showOpenButtonPedestrian\x20','1672152rKuYmT','onClickPedestrian\x20','623470jxZiFv','Move\x20closer\x20to\x20the\x20gate\x20to\x20exit','No\x20network\x20available.\x20Please\x20check\x20your\x20connection\x20and\x20try\x20again','split','AndroidSpecific.js','1671152IKNtVR','parse','androidObj','jsversion','startCountDownTimer\x20','getURL','onClickGate1\x20','multi','localeCompare','multi_gate_btn','#F2555C','Simulation\x20mode\x20is\x20restricted\x20in\x20Production.\x20Please\x20change\x20DIVRT\x20environment\x20to\x20DEV','getHardwareConfiguration\x20','This\x20is\x20prebundle\x20JS','loader','nList','Wrong\x20code\x20scanned,\x20please\x20try\x20again','pinaClientParams','initHardwareConfig\x20','style','beaconList','data','simulation_mode','attachment_minor_ids','onClickGate2\x20','hideAwaiting\x20','invisible','lanesToBeaconList','onClickBackPedestrian\x20','ostype','move_closer_text','dateDecisionDelta','pushLogs\x20response\x20','isPedestrian','proceed_btn','gate_issues','remove','longitude','showOpenButton\x20','5774540bfhsbU','serverUri','lanesBeaconsMap','button_ble_pedestrian','techType','loopsList','TEST','type','gateType','myLaneLoop','action','openGate\x20response\x20inner','nameValuePairs','pinaMiscParams','Gate\x20open\x20pedestrian\x20failure','entrance_id','values','minorID','Wrong\x20NFC\x20scanned','move_closer_text_pedestrian','innerHTML','add','orderId','status','osversion','loopConfig','buttonMode','popupappear','uniqueID','displayWebViewAndStartSDK\x20','firstTime','text/javascript','now','differentiationDelta','set','beaconData','refno','loopData','Start\x20time\x20','validatePinaConfig\x20','back_btn','3030VeIOhk','Hide\x20Awaiting','message','firstDistance','Timer\x20Ended','latitude','topic','NFC','openGatePedestrian\x20response\x20inner','sequenceLogs','POST','bearerToken','anveshtokala','takeAction\x20','oneList','getHardwareConfiguration\x20response','pedestrian_flow','~cachedHardWareConfigruation','application/json','16018472fnXMty','loopEnabled','length','password','loopDetectorMqttTopic','clientId','helpText','openGateExcep\x20','uid','beaconId','maxDistance','welcome_text','sin','middle_btn','toString','otherLaneLoop','Move\x20closer\x20to\x20the\x20gate\x20to\x20enter','secret_key','minimumBeaconThreshold','showGateLayout\x20','script','getElementById','json','https://meghak2.divrt.co/','openGate\x20response\x20outer','get','latLong.latitude','divrt-mqtt-dev','hideAwaitingPedestrian\x20','garageLongitude','nfcData','getElementsByClassName','hardwarfalse=','otherBeacon','presentButtonMode','button_qr','pinaSdkParams','bookingID','version','head','main_container','appIconImage','then','background','scanToButtonGreenDelta','phpMQTT-subscriber','mqtt_topic','hide','Failed\x20to\x20open\x20gate.\x20Please\x20try\x20again','openedGate','push','onLine','flushData\x20','takeAction\x20inner\x20','pushLogs\x20','#FFFFFF','1003488QynSqI','scanToButtonClickDelta','src','14658cEQswx','parking1234','name','userName','lastDistance','decision_time','minDistance','minimumSingleButtonThreshold','proximitydata','color','JSInteractionWrapper.js','button_enable_pedestrian','pinaConfigParams','hideGateLayout\x20','onClickGate3\x20','loopEnabledTime','multi_gate','Point\x20B','beaconConfig','button_ble','outcome','dev','ranges','estimoteCloudDetails','openGate\x20','oneBeacon','logo','sqrt','J2N_startLoopScan','https://pinaboxapi-dev.divrt.co/','toUTCString','createElement','laneMqttTopics','https://loggerapi-dev.divrt.co/log','right_btn','loopList','gateID','gateButtonBgColor','openGatePedExcep\x20','zid','divrt://5350504C-5553-434F-5250-4F524154494F/30003/111','autoSelectMode','stringify','onClickBackGateIssues\x20','left_btn','openGate','catch','item','qrData','container_pedestrian','refId','replace','demoGarage','62276','Thank\x20you\x20for\x20using\x20pedestrian\x20access','simulationMode','pinaJSParams','getDistanceFromLatLonInKm\x20','email'];_0x8fcf=function(){return _0x50e8a6;};return _0x8fcf();}function initPinaModel(){const _0x347612=_0x14d456;try{pinaConfigParams={},pinaConfigParams[_0x347612(0x172)]=_0x347612(0x8a),pinaConfigParams[_0x347612(0xdc)]='IN',pinaConfigParams[_0x347612(0x121)]='4f3765a60e61facd73cf757d1610e8f37be26c97323290971793feaf06b06982',pinaConfigParams[_0x347612(0xca)]='Android',pinaConfigParams[_0x347612(0xf0)]=_0x347612(0x9b),pinaSdkParams={},pinaSdkParams[_0x347612(0x116)]='Thank\x20you\x20for\x20visiting\x20ABC\x20Garage',pinaClientParams={},pinaMiscParams={},decisionData['bookingID']=pinaConfigParams[_0x347612(0xea)],decisionData['refId']=pinaConfigParams[_0x347612(0xea)],decisionData['gateType']=pinaConfigParams['gateType'],decisionData['osTypeVer']=pinaConfigParams[_0x347612(0xca)],decisionData['simulation']=pinaConfigParams[_0x347612(0x8c)],decisionData[_0x347612(0x172)]=pinaConfigParams[_0x347612(0x172)],decisionData[_0x347612(0x118)]=pinaConfigParams[_0x347612(0xf0)],document[_0x347612(0x125)](_0x347612(0x11b))[_0x347612(0xe8)]=pinaSdkParams['helpText'],scanToButtonGreenDelta=Date[_0x347612(0xf4)](),scanToButtonClickDelta=Date[_0x347612(0xf4)](),gateDecisionDelta=Date[_0x347612(0xf4)](),getHardwareConfig(undefined);}catch(_0x38074b){J2N_printLog(_0x38074b[_0x347612(0xff)]);}}function initBeaconData(){try{setTimeout(function(){const _0x539309=_0x2403;hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1',gate=beaconData[_0x539309(0x15d)]['lanesBeaconsMap'][_0x539309(0xc8)][0x0][_0x539309(0x16f)];for(let _0x3e29dd=0x0;_0x3e29dd<beaconData[_0x539309(0xc1)][_0x539309(0x112)];_0x3e29dd++){gateForBeacon[_0x539309(0xf6)](beaconData['beaconList'][_0x3e29dd][_0x539309(0x16f)],beaconData[_0x539309(0xc1)][_0x3e29dd][_0x539309(0x119)]);}},0xbb8);}catch(_0x3ab474){J2N_printLog(_0x3ab474['message']);}}function initLoopData(){}function initNFC(){const _0x12e2fa=_0x14d456;try{validateNFC('divrt://5350504C-5553-434F-5250-4F524154494F/12/121');}catch(_0x2df42a){J2N_printLog(_0x2df42a[_0x12e2fa(0xff)]);}}function initQR(){const _0x1cf13a=_0x14d456;try{validateQR(_0x1cf13a(0x173));}catch(_0x54fb8b){J2N_printLog(_0x54fb8b[_0x1cf13a(0xff)]);}}function baseParametersProximity(){const _0x1716da=_0x14d456;return decisionData['beaconData']=Object[_0x1716da(0xe4)](weightDataDict),decisionData[_0x1716da(0xf9)]=loopValues,decisionData['openedGate']=beaconId,decisionData[_0x1716da(0xf5)]=differentiationDelta,decisionData[_0x1716da(0x13c)]=scanToButtonGreenDeltaSec,decisionData[_0x1716da(0x149)]=scanToButtonClickDeltaSec,decisionData['dateDecisionDelta']=gateDecisionDeltaSec,decisionData[_0x1716da(0xc3)]=pinaConfigParams[_0x1716da(0x8c)],decisionData['buttonMode']=buttonMode,decisionData[_0x1716da(0x106)]=logArray,(decisionData[_0x1716da(0x153)]=proximityDataArray,decisionData['outcome']=outcome),decisionData[_0x1716da(0x135)]=bookingID,decisionData[_0x1716da(0x87)]=refId,decisionData[_0x1716da(0x118)]=uid,decisionData[_0x1716da(0xdc)]=pinaConfigParams[_0x1716da(0xdc)],decisionData['ostype']=pinaConfigParams[_0x1716da(0xca)],decisionData[_0x1716da(0x172)]=pinaConfigParams[_0x1716da(0x172)],decisionData['uniqueID']=pinaConfigParams[_0x1716da(0xf0)],decisionData[_0x1716da(0x8f)]=parseJwt(pinaClientParams[_0x1716da(0x108)]),decisionData[_0x1716da(0xd8)]=techType,decisionData['firstBleHitTime']=firstBleHitTime,decisionData['bleEnabledTime']=bleEnabledTime,decisionData[_0x1716da(0x15a)]=loopEnabledTime,decisionData[_0x1716da(0xb0)]=pinaConfig['pinaJSParams'][_0x1716da(0x136)],decisionData[_0x1716da(0xec)]=pinaConfigParams[_0x1716da(0xec)],decisionData;}function debugLog(_0xcf271c,_0x4d78e8){const _0x4dbc43=_0x14d456;debugCount+=0x1;let _0x1a8802=Date[_0x4dbc43(0xf4)]()/0x3e8;if(debugCount==0x1){logStartTime=_0x1a8802;const _0x21ca26=_0x4dbc43(0xfa)+new Date()[_0x4dbc43(0x169)]();logArray[_0x4dbc43(0x142)](_0x21ca26);}const _0x101064=debugCount+_0x4dbc43(0xa4)+_0xcf271c+_0x4dbc43(0xa4)+parseInt(_0x1a8802-logStartTime);logArray['push'](_0x101064);}function returnDelta(){const _0x1c6edc=_0x14d456;let _0x157327=Date[_0x1c6edc(0xf4)]()/0x3e8;logStartTime==0x0&&(logStartTime=_0x157327);let _0x2e4572=parseInt(_0x157327-logStartTime);return _0x2e4572;}function parseJwt(_0x96f7f8){const _0x328fa2=_0x14d456;try{return JSON[_0x328fa2(0xae)](atob(_0x96f7f8[_0x328fa2(0xab)]('.')[0x1]))['email'];}catch(_0x93ccbd){return'na';}};function initGateData(_0x1e7fb4){const _0x4d90aa=_0x14d456;try{let _0x3b1ee7=0x0,_0x4f9557=[];for(let _0x4c00ae=0x0;_0x4c00ae<beaconData['beaconConfig']['lanesBeaconsMap'][_0x4d90aa(0xc8)][_0x4d90aa(0x112)];_0x4c00ae++){beaconData[_0x4d90aa(0x15d)]['lanesBeaconsMap'][_0x4d90aa(0xc8)][_0x4c00ae][_0x4d90aa(0xe3)][_0x4d90aa(0xb5)](_0x1e7fb4)===0x0?(_0x4f9557[_0x3b1ee7]=beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x4c00ae],_0x3b1ee7++):gateloopData[_0x4d90aa(0x99)](beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x4c00ae]['gateID']);}beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)]=_0x4f9557;beaconData[_0x4d90aa(0x15d)]['lanesBeaconsMap'][_0x4d90aa(0xc8)][_0x4d90aa(0x112)]==0x1?loopList=getBeaconListResponse[_0x4d90aa(0xc2)][_0x4d90aa(0xf9)][_0x4d90aa(0x10b)]:loopList=getBeaconListResponse[_0x4d90aa(0xc2)][_0x4d90aa(0xf9)][_0x4d90aa(0xbc)];for(let _0x2cebec=0x0;_0x2cebec<beaconData['beaconConfig']['lanesBeaconsMap'][_0x4d90aa(0xc8)][_0x4d90aa(0x112)];_0x2cebec++){var _0x1872f3='';for(var _0x977cc3=0x0;_0x977cc3<beaconData['beaconConfig'][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x2cebec][_0x4d90aa(0xc4)]['length'];_0x977cc3++){_0x1872f3=_0x1872f3+'*'+beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x2cebec][_0x4d90aa(0xc4)][_0x977cc3];}minGateData[_0x4d90aa(0xf6)](_0x1872f3,[beaconData['beaconConfig']['lanesBeaconsMap'][_0x4d90aa(0xc8)][_0x2cebec]['gateID'],0xa]),maxGateData[_0x4d90aa(0xf6)](_0x1872f3,[beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x2cebec][_0x4d90aa(0x16f)],0x0]);}document[_0x4d90aa(0x125)](_0x4d90aa(0x177))[_0x4d90aa(0xe8)]=beaconData[_0x4d90aa(0x15d)]['lanesBeaconsMap'][_0x4d90aa(0xc8)][0x0]['name'];beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][_0x4d90aa(0x112)]>0x1&&(document[_0x4d90aa(0x125)](_0x4d90aa(0x16d))[_0x4d90aa(0xe8)]=beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][0x1]['name']);beaconData[_0x4d90aa(0x15d)][_0x4d90aa(0xd6)]['lanesToBeaconList']['length']>0x2?document[_0x4d90aa(0x125)](_0x4d90aa(0x11d))[_0x4d90aa(0xe8)]=beaconData['beaconConfig'][_0x4d90aa(0xd6)][_0x4d90aa(0xc8)][0x2][_0x4d90aa(0x14d)]:document['getElementById'](_0x4d90aa(0x11d))[_0x4d90aa(0xe8)]='';gateDatainitialised=!![];for(let [_0x304a1e,_0x1a311c]of gateloopData){_0x1a311c===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date['now']()-screenAppearanceTime)/0x3e8));}}catch(_0x38d2d7){pushException(_0x4d90aa(0x9e)+_0x38d2d7['message']);}}
