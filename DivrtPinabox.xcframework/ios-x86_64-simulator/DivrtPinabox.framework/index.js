const _0x56a6b3=_0x176b;(function(_0x3c6f77,_0x4283ee){const _0x2357c5=_0x176b,_0x4ce4ad=_0x3c6f77();while(!![]){try{const _0x364e99=parseInt(_0x2357c5(0x25e))/0x1+parseInt(_0x2357c5(0x1e4))/0x2+-parseInt(_0x2357c5(0x266))/0x3+parseInt(_0x2357c5(0x292))/0x4+parseInt(_0x2357c5(0x2af))/0x5+parseInt(_0x2357c5(0x21f))/0x6+parseInt(_0x2357c5(0x229))/0x7*(-parseInt(_0x2357c5(0x1eb))/0x8);if(_0x364e99===_0x4283ee)break;else _0x4ce4ad['push'](_0x4ce4ad['shift']());}catch(_0x5dacdc){_0x4ce4ad['push'](_0x4ce4ad['shift']());}}}(_0x5bbe,0xef170),window[_0x56a6b3(0x2c7)]=function AndroidClass(){});function include(_0x3fed30){const _0x4567d5=_0x56a6b3;var _0x4d369f=document[_0x4567d5(0x253)](_0x4567d5(0x298));_0x4d369f[_0x4567d5(0x22c)]=_0x3fed30,_0x4d369f[_0x4567d5(0x2d4)]=_0x4567d5(0x203),_0x4d369f['defer']=!![],document[_0x4567d5(0x202)](_0x4567d5(0x21a))[_0x4567d5(0x249)](0x0)[_0x4567d5(0x2d1)](_0x4d369f);}include(_0x56a6b3(0x218)),include(_0x56a6b3(0x2a8)),include(_0x56a6b3(0x2a0));const url_hardwareConfig=_0x56a6b3(0x22a),url_openGate=_0x56a6b3(0x209),url_decisionInfo=_0x56a6b3(0x25a);let url_base={get 'getURL'(){const _0x28547f=_0x56a6b3;if(pinaConfig[_0x28547f(0x2a3)]==_0x28547f(0x278))return _0x28547f(0x1f5);else return pinaConfig['environment']==_0x28547f(0x23d)?'https://meghak2.divrt.co/':'https://pinaboxapi-dev.divrt.co/';}},loggerURL={get 'getURL'(){const _0x27d97b=_0x56a6b3;return pinaConfig[_0x27d97b(0x2a3)]==_0x27d97b(0x278)?_0x27d97b(0x233):_0x27d97b(0x1f6);}},pinaConfig,pinaConfigParams,pinaSdkParams,pinaClientParams,pinaMiscParams,getBeaconListResponse,beaconData,nfcData,qrCode,autoSelectMode,garageLocation={},loopData={},loopDetectorMqttTopic,loopDetected=![],bleDetected=![],collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],gateDecisionDeltaSec,cancelled=![],gate,scanToButtonGreenDeltaSec,atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateloopData=new Map(),maxDistance,beaconsMap=new Map(),altBeaconsMap=new Map(),beaconId,delta,differentiationDelta,loopDetectorSimulation=0x0,commandId,scanToButtonClickDeltaSec,outcome='',gateForBeacon=new Map(),decisionData={},buttonMode,presentButtonMode='-1',minorId=new Map(),minorIdDebug=new Map(),minDistance=new Map(),lastDistance=new Map(),rangeWeightData=new Map(),rangeData=new Map(),deciTime=new Map(),deciDistance=new Map(),firstDistance=new Map(),firstTime=new Map(),loopValues=[],loopList=[],oneBeacon='X',otherBeacon='X',myLaneLoop='X',otherLaneLoop='X',lane=-0x1,currentLocation={},prevQRMessage='',batteryDataDictionaryArray=[],screenAppearanceTime,proximityDataArray=[],weightDataDict={},logArray=[],debugCount=0x0,logStartTime=0x0,beaconIdPedestrian,loopEnabledTime,bleEnabledTime,firstBleHitTime,techType=_0x56a6b3(0x243),bookingID,uid,gateDatainitialised=![],specificationType='',refId;function onClickGateIssues(){const _0x46cdd1=_0x56a6b3;try{document[_0x46cdd1(0x207)](_0x46cdd1(0x2ca))[_0x46cdd1(0x2c3)][_0x46cdd1(0x2b5)]('hide'),document[_0x46cdd1(0x207)](_0x46cdd1(0x29b))[_0x46cdd1(0x2c3)][_0x46cdd1(0x27e)]('hide');}catch(_0x294310){pushException(_0x46cdd1(0x2b3)+_0x294310[_0x46cdd1(0x236)]);}}function onClickBackGateIssues(){const _0xea2d50=_0x56a6b3;try{document['getElementById']('container_main')[_0xea2d50(0x2c3)][_0xea2d50(0x27e)]('hide'),document['getElementById'](_0xea2d50(0x29b))[_0xea2d50(0x2c3)]['add']('hide');}catch(_0x1401d0){pushException(_0xea2d50(0x270)+_0x1401d0['message']);}}function onClickPedestrian(){const _0x35ddce=_0x56a6b3;try{document[_0x35ddce(0x207)](_0x35ddce(0x212))[_0x35ddce(0x2c3)][_0x35ddce(0x2b5)](_0x35ddce(0x21d)),document[_0x35ddce(0x207)](_0x35ddce(0x234))[_0x35ddce(0x2c3)][_0x35ddce(0x27e)](_0x35ddce(0x21d));}catch(_0xe8fb9f){pushException(_0x35ddce(0x291)+_0xe8fb9f[_0x35ddce(0x236)]);}}function onClickBackPedestrian(){const _0x1b88cf=_0x56a6b3;try{document[_0x1b88cf(0x207)](_0x1b88cf(0x212))[_0x1b88cf(0x2c3)][_0x1b88cf(0x27e)](_0x1b88cf(0x21d)),document[_0x1b88cf(0x207)](_0x1b88cf(0x234))['classList'][_0x1b88cf(0x2b5)]('hide');}catch(_0x395c89){pushException(_0x1b88cf(0x2d9)+_0x395c89[_0x1b88cf(0x236)]);}}function showOpenButtonPedestrian(){const _0x5c6fc0=_0x56a6b3;try{document[_0x5c6fc0(0x207)]('move_closer_text_pedestrian')[_0x5c6fc0(0x28e)][_0x5c6fc0(0x25c)]='#FFFFFF',document[_0x5c6fc0(0x207)](_0x5c6fc0(0x21c))['classList'][_0x5c6fc0(0x27e)](_0x5c6fc0(0x21d));}catch(_0x20f2b3){pushException('showOpenButtonPedestrian\x20'+_0x20f2b3[_0x5c6fc0(0x236)]);}}function hideAwaitingPedestrian(){const _0x5a222b=_0x56a6b3;try{document[_0x5a222b(0x207)](_0x5a222b(0x272))[_0x5a222b(0x2c3)][_0x5a222b(0x2b5)](_0x5a222b(0x21d));}catch(_0x39a723){pushException(_0x5a222b(0x27f)+_0x39a723[_0x5a222b(0x236)]);}}function hideOpenButtonPedestrian(){const _0x442055=_0x56a6b3;try{document['getElementById'](_0x442055(0x21c))['classList'][_0x442055(0x2b5)](_0x442055(0x21d));}catch(_0x42bd9e){pushException(_0x442055(0x2d5)+_0x42bd9e[_0x442055(0x236)]);}}function showAwaitingPedestrian(){const _0x1e86c6=_0x56a6b3;try{document[_0x1e86c6(0x207)](_0x1e86c6(0x272))['classList'][_0x1e86c6(0x27e)](_0x1e86c6(0x21d));}catch(_0x504c1a){pushException(_0x1e86c6(0x27f)+_0x504c1a[_0x1e86c6(0x236)]);}}function storeBeaconIdPedestrian(_0x568ebc){beaconIdPedestrian=_0x568ebc;}function onClickBLEButtonPedestrian(){const _0x1f43fa=_0x56a6b3;try{openGatePedestrian();}catch(_0x53a1f1){pushException(_0x1f43fa(0x248)+_0x53a1f1['message']);}}function openGatePedestrian(){const _0x2e0f0d=_0x56a6b3;if(window[_0x2e0f0d(0x2a2)][_0x2e0f0d(0x24b)]==![]){alert('No\x20network\x20available.\x20Please\x20check\x20your\x20connection\x20and\x20try\x20again');return;}try{J2N_suspendClick();const _0x248062=url_base['getURL']+url_openGate;showProgress(!![]),debugLog('openGatePedestrian'),fetch(_0x248062,{'method':'POST','body':JSON[_0x2e0f0d(0x24c)]({'beaconId':beaconIdPedestrian,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams}),'headers':{'Accept':_0x2e0f0d(0x2bd),'Content-Type':'application/json'}})['then'](_0xb53eb=>{const _0x48f5c1=_0x2e0f0d;showProgress(![]),_0xb53eb[_0x48f5c1(0x1f0)]()[_0x48f5c1(0x214)](_0x3cd90b=>{const _0x170ac5=_0x48f5c1;try{_0x3cd90b[_0x170ac5(0x2aa)]?(showAwaiting(),hideGateLayout(),hideOpenButton(),onClickBackPedestrian(),onClickBackGateIssues(),document[_0x170ac5(0x207)](_0x170ac5(0x2bc))[_0x170ac5(0x271)]='',document[_0x170ac5(0x207)]('move_closer_text')[_0x170ac5(0x271)]=_0x170ac5(0x2a5),J2N_postOnInfo(_0x170ac5(0x206)),pushLogs()):(J2N_printLog(JSON[_0x170ac5(0x24c)](_0x3cd90b)),J2N_postOnFailure(JSON[_0x170ac5(0x24c)](_0x3cd90b)),pushLogs());}catch(_0x20d9b4){showProgress(![]),debugLog('openGatePedExcep\x20'+_0x20d9b4['message']),J2N_printLog(_0x170ac5(0x20b)+_0x20d9b4[_0x170ac5(0x236)]),J2N_postOnFailure('Gate\x20open\x20pedestrian\x20failure'),pushException(_0x170ac5(0x290)+_0x20d9b4[_0x170ac5(0x236)]),pushLogs();}});})[_0x2e0f0d(0x258)](_0x1c2e02=>{const _0x91aaed=_0x2e0f0d;showProgress(![]),debugLog(_0x91aaed(0x259)+_0x1c2e02['message']),J2N_printLog(_0x1c2e02['message']),J2N_postOnFailure('Failed\x20to\x20open\x20gate.\x20Please\x20try\x20again'),pushException(_0x91aaed(0x267)+_0x1c2e02[_0x91aaed(0x236)]);});}catch(_0x439c1a){showProgress(![]),debugLog(_0x2e0f0d(0x259)+_0x439c1a[_0x2e0f0d(0x236)]),J2N_postOnFailure(_0x2e0f0d(0x2b7)),pushException(_0x2e0f0d(0x2ae)+_0x439c1a[_0x2e0f0d(0x236)]);}}function _0x5bbe(){const _0x243a33=['qrConfig','presentButtonMode','appIconImage','minorID','demoGarage','appendChild','Exception','secret_key','type','showOpenButtonPedestrian\x20','Thank\x20you\x20for\x20visiting\x20ABC\x20Garage','PinaTest','latLong.longitude','onClickBackPedestrian\x20','parking1234','entrance_id','sin','gateID','loopDetectorMqttTopic','1112244AYndnm','onClickGate1\x20','background','otherBeacon','left_btn','lanesToBeaconList','firstDistance','136BAsVKz','mqtts.divrt.co','nfcData','getElementsByClassName','middle_btn','json','topic','parking','invisible','buttonMode','https://pinaboxapi.divrt.co/','https://loggerapi-dev.divrt.co/log','replace','openedGate','lanesBeaconsMap','#F2555C','otherLaneLoop','firstBleHitTime','\x20-\x20','decision_time','beaconId','pinaJSParams','Hide\x20Awaiting','getElementsByTagName','text/javascript','scanToButtonGreenDelta','latLong.latitude','Thank\x20you\x20for\x20using\x20pedestrian\x20access','getElementById','phpMQTT-subscriber','api/v2/openGate','loopEnabledTime','openGatePedestrian\x20failure','qrData','sequenceLogs','validateQR\x20','startCountDownTimer\x20','refId','Android','main_container','minimumBeaconThreshold','then','myLaneLoop','isPedestrian','multi_gate','JSInteractionWrapper.js','techType','head','openGateExcep\x20','button_enable_pedestrian','hide','values','484548KCqnwH','orderId','logo','uniqueID','loopList','https://static.divrt.co/images/pinabox/spp/spplogo.png','osversion','button_ble','scanToButtonClickDelta','zid','698677SWDhdn','api/v2/getHardwareConfigByZcode','divrt://5350504C-5553-434F-5250-4F524154494F/12/121','src','outcome','name','onClickGate3\x20','dateDecisionDelta','helpText','email','https://loggerapi.divrt.co/log','container_pedestrian','loopEnabled','message','simulationMode=true','anveshtokala','hideAwaiting\x20','beaconList','gateButtonBgColor','localeCompare','TEST','ranges','loader','Wrong\x20NFC\x20scanned','Start\x20time\x20','oneList','BLE','single','validateLatLong\x20','gateType','now','onClickBLEButton\x20','item','#FFFFFF','onLine','stringify','takeAction\x20','~completedHardWareConfigruation','beaconConfig','right_btn','loopData','loopConfig','createElement','data','differentiationDelta','getURL','4f3765a60e61facd73cf757d1610e8f37be26c97323290971793feaf06b06982','catch','openGatePedExcep\x20','api/v2/decisionInfo','tcp://mqtts.divrt.co:1883','color','Wrong\x20code\x20scanned,\x20please\x20try\x20again','1013070RENOvw','uid','Point\x20B','showProgress\x20','hardwarfalse=','serverUri','password','simulation','1537305mmzpjr','openGate\x20response\x20outer','gate_issues','J2N_startBeaconScan','nList','laneMqttTopics','push','jsversion','attachment_minor_ids','get','onClickBackGateIssues\x20','innerHTML','button_ble_pedestrian','minDistance','onClickMoveForward\x20','move_closer_text_pedestrian','nameValuePairs','deg2rad\x20','PROD','radius','minimumSingleButtonThreshold','dev','atan2','ostype','remove','hideAwaitingPedestrian\x20','initHardwareConfig\x20','sqrt','loopsList','getHardwareConfiguration','oneBeacon','No\x20network\x20available.\x20Please\x20check\x20your\x20connection\x20and\x20try\x20again','pedestrian_flow','version','showGateLayout\x20','mqtt_topic','estimoteCloudDetails','delete','62276','bearerToken','style','bleEnabledTime','openGatePedestrian\x20response\x20inner','onClickPedestrian\x20','5931056OOCVbf','proximitydata','divrt://5350504C-5553-434F-5250-4F524154494F/30003/111','hideOpenButton\x20','simulationMode','bookingID','script','pinaSdkParams','simulation_mode','container_gate_issues','toUTCString','longitude','move_closer_text','POST','iOSSpecific.js','value','navigator','environment','popupappear','Move\x20closer\x20to\x20the\x20gate\x20to\x20enter','refno','autoSelectMode','AndroidSpecific.js','beaconData','status','cos','back_btn','pinaConfigParams','openGate\x20','279100aInONN','container','J2N_startLoopScan','Simulation\x20mode\x20is\x20restricted\x20in\x20Production.\x20Please\x20change\x20DIVRT\x20environment\x20to\x20DEV','onClickGateIssues\x20','This\x20is\x20prebundle\x20JS','add','split','Failed\x20to\x20open\x20gate.\x20Please\x20try\x20again','Move\x20closer\x20to\x20the\x20gate\x20to\x20exit','proceed_btn','openGate\x20response\x20inner','onClickQRButton\x20','welcome_text','application/json','toString','latitude','length','pinaClientParams','userName','classList','divrt-mqtt-dev','action','maxDistance','androidObj','button_enable','set','container_main','parse'];_0x5bbe=function(){return _0x243a33;};return _0x5bbe();}function onClickBLEButton(){const _0x156da7=_0x56a6b3;try{scanToButtonClickDeltaSec=(Date[_0x156da7(0x247)]()-scanToButtonClickDelta)/0x3e8;if(gate['localeCompare'](beaconData[_0x156da7(0x24f)][_0x156da7(0x1f9)]['lanesToBeaconList'][0x0][_0x156da7(0x2dd)])===0x0)takeAction(0x1,gateForBeacon[_0x156da7(0x26f)](gate),gate);else{if(beaconData[_0x156da7(0x24f)][_0x156da7(0x1f9)][_0x156da7(0x1e9)][_0x156da7(0x2c0)]>=0x2&&gate[_0x156da7(0x23c)](beaconData[_0x156da7(0x24f)][_0x156da7(0x1f9)]['lanesToBeaconList'][0x1][_0x156da7(0x2dd)])===0x0)takeAction(0x2,gateForBeacon[_0x156da7(0x26f)](gate),gate);else beaconData[_0x156da7(0x24f)]['lanesBeaconsMap'][_0x156da7(0x1e9)][_0x156da7(0x2c0)]>=0x3&&gate[_0x156da7(0x23c)](beaconData['beaconConfig'][_0x156da7(0x1f9)][_0x156da7(0x1e9)][0x2][_0x156da7(0x2dd)])===0x0&&takeAction(0x3,gateForBeacon[_0x156da7(0x26f)](gate),gate);}}catch(_0x7d9411){pushException(_0x156da7(0x248)+_0x7d9411['message']);}}function onClickGate1(){const _0x1e8640=_0x56a6b3;try{takeAction(0x1,gateForBeacon[_0x1e8640(0x26f)](beaconData[_0x1e8640(0x24f)]['lanesBeaconsMap']['lanesToBeaconList'][0x0][_0x1e8640(0x2dd)]),beaconData[_0x1e8640(0x24f)]['lanesBeaconsMap']['lanesToBeaconList'][0x0][_0x1e8640(0x2dd)]),scanToButtonClickDeltaSec=(Date[_0x1e8640(0x247)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x5a8fe1){pushException(_0x1e8640(0x1e5)+_0x5a8fe1[_0x1e8640(0x236)]);}}function onClickGate2(){const _0x85fb04=_0x56a6b3;try{takeAction(0x2,gateForBeacon[_0x85fb04(0x26f)](beaconData[_0x85fb04(0x24f)][_0x85fb04(0x1f9)][_0x85fb04(0x1e9)][0x1]['gateID']),beaconData[_0x85fb04(0x24f)][_0x85fb04(0x1f9)][_0x85fb04(0x1e9)][0x0][_0x85fb04(0x2dd)]),scanToButtonClickDeltaSec=(Date[_0x85fb04(0x247)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x3c26fe){pushException('onClickGate2\x20'+_0x3c26fe[_0x85fb04(0x236)]);}}function onClickGate3(){const _0x17b80f=_0x56a6b3;try{takeAction(0x3,gateForBeacon[_0x17b80f(0x26f)](beaconData['beaconConfig'][_0x17b80f(0x1f9)][_0x17b80f(0x1e9)][0x2][_0x17b80f(0x2dd)]),beaconData[_0x17b80f(0x24f)]['lanesBeaconsMap'][_0x17b80f(0x1e9)][0x0][_0x17b80f(0x2dd)]),scanToButtonClickDeltaSec=(Date['now']()-scanToButtonClickDelta)/0x3e8;}catch(_0x4c8cca){pushException(_0x17b80f(0x22f)+_0x4c8cca[_0x17b80f(0x236)]);}}function onClickMoveForward(){const _0x32d349=_0x56a6b3;try{document[_0x32d349(0x207)]('main_container')['classList'][_0x32d349(0x27e)]('hide'),document[_0x32d349(0x207)]('alert')[_0x32d349(0x2c3)][_0x32d349(0x2b5)](_0x32d349(0x21d));}catch(_0x425de8){pushException(_0x32d349(0x274)+_0x425de8[_0x32d349(0x236)]);}}function onClickNFCButton(){J2N_startNFCScan();}function onClickStart(){}function onClickSimulate(){}function onClickQRButton(){const _0x52789c=_0x56a6b3;try{J2N_startQRScan();}catch(_0x53d7b6){pushException(_0x52789c(0x2bb)+_0x53d7b6[_0x52789c(0x236)]);}}function showGateLayout(){const _0x1a7cba=_0x56a6b3;try{document['getElementById'](_0x1a7cba(0x29e))[_0x1a7cba(0x28e)]['color']=_0x1a7cba(0x24a),document[_0x1a7cba(0x207)](_0x1a7cba(0x217))[_0x1a7cba(0x2c3)]['remove'](_0x1a7cba(0x21d)),document['getElementById'](_0x1a7cba(0x1e8))['classList'][_0x1a7cba(0x27e)](_0x1a7cba(0x21d)),document[_0x1a7cba(0x207)](_0x1a7cba(0x250))['classList'][_0x1a7cba(0x27e)](_0x1a7cba(0x21d)),beaconData[_0x1a7cba(0x24f)][_0x1a7cba(0x1f9)][_0x1a7cba(0x1e9)][_0x1a7cba(0x2c0)]>0x2?document[_0x1a7cba(0x207)]('middle_btn')[_0x1a7cba(0x2c3)]['remove'](_0x1a7cba(0x21d)):document[_0x1a7cba(0x207)](_0x1a7cba(0x1ef))[_0x1a7cba(0x2c3)][_0x1a7cba(0x2b5)]('hide'),getBeaconListResponse['data'][_0x1a7cba(0x216)]!=null&&getBeaconListResponse[_0x1a7cba(0x254)][_0x1a7cba(0x216)][_0x1a7cba(0x23c)]('1')===0x0&&document[_0x1a7cba(0x207)](_0x1a7cba(0x1e8))[_0x1a7cba(0x2c3)]['add'](_0x1a7cba(0x21d));}catch(_0x1b43b0){pushException(_0x1a7cba(0x288)+_0x1b43b0[_0x1a7cba(0x236)]);}}function hideOpenButton(){const _0xba8d4=_0x56a6b3;try{document[_0xba8d4(0x207)](_0xba8d4(0x2c8))['classList'][_0xba8d4(0x2b5)](_0xba8d4(0x21d));}catch(_0x19eef6){pushException(_0xba8d4(0x295)+_0x19eef6[_0xba8d4(0x236)]);}}function hideGateLayout(){const _0x4a956a=_0x56a6b3;try{document[_0x4a956a(0x207)]('multi_gate')['classList'][_0x4a956a(0x2b5)]('hide'),document[_0x4a956a(0x207)](_0x4a956a(0x1e8))[_0x4a956a(0x2c3)][_0x4a956a(0x271)]='',document[_0x4a956a(0x207)](_0x4a956a(0x1ef))['classList']['innerHTML']='',document[_0x4a956a(0x207)](_0x4a956a(0x250))[_0x4a956a(0x2c3)][_0x4a956a(0x271)]='';}catch(_0x2f0bec){pushException('hideGateLayout\x20'+_0x2f0bec[_0x4a956a(0x236)]);}}function showOpenButton(){const _0x5f459b=_0x56a6b3;try{document[_0x5f459b(0x207)](_0x5f459b(0x29e))[_0x5f459b(0x28e)][_0x5f459b(0x25c)]='#FFFFFF',document['getElementById'](_0x5f459b(0x2c8))[_0x5f459b(0x2c3)][_0x5f459b(0x27e)](_0x5f459b(0x21d));}catch(_0x206585){pushException('showOpenButton\x20'+_0x206585[_0x5f459b(0x236)]);}}function hideAwaiting(){const _0xd27fb1=_0x56a6b3;try{scanToButtonGreenDeltaSec===0x0&&(debugLog(_0xd27fb1(0x201)),scanToButtonGreenDeltaSec=(Date[_0xd27fb1(0x247)]()-screenAppearanceTime)/0x3e8),document[_0xd27fb1(0x207)](_0xd27fb1(0x226))[_0xd27fb1(0x2c3)][_0xd27fb1(0x2b5)](_0xd27fb1(0x21d));}catch(_0x32eeb2){pushException(_0xd27fb1(0x239)+_0x32eeb2['message']);}}function showAwaiting(){const _0x324387=_0x56a6b3;try{document[_0x324387(0x207)](_0x324387(0x226))[_0x324387(0x2c3)]['remove'](_0x324387(0x21d));}catch(_0x284973){pushException('showAwaiting\x20'+_0x284973['message']);}}function showSimulation(){const _0x4918a1=_0x56a6b3;pinaConfigParams['simulationMode']!=undefined&&pinaConfigParams[_0x4918a1(0x296)]?document[_0x4918a1(0x207)]('simulation')[_0x4918a1(0x2c3)]['remove']('hide'):document['getElementById'](_0x4918a1(0x265))['classList'][_0x4918a1(0x2b5)](_0x4918a1(0x21d));}function showDevMode(){const _0x595da5=_0x56a6b3;pinaConfig[_0x595da5(0x2a3)]!=undefined&&pinaConfig['environment'][_0x595da5(0x23c)](_0x595da5(0x278))?document[_0x595da5(0x207)](_0x595da5(0x27b))[_0x595da5(0x2c3)][_0x595da5(0x27e)](_0x595da5(0x21d)):document['getElementById']('dev')[_0x595da5(0x2c3)]['add'](_0x595da5(0x21d));}function showGateIssues(){const _0x41287e=_0x56a6b3;nfcData[_0x41287e(0x2aa)]==0x0&&qrCode[_0x41287e(0x2aa)]==0x0&&document[_0x41287e(0x207)](_0x41287e(0x268))[_0x41287e(0x2c3)][_0x41287e(0x2b5)](_0x41287e(0x21d)),nfcData[_0x41287e(0x2aa)]==0x0&&document[_0x41287e(0x207)]('button_nfc')[_0x41287e(0x2c3)]['add']('hide'),qrCode[_0x41287e(0x2aa)]==0x0&&document[_0x41287e(0x207)]('button_qr')[_0x41287e(0x2c3)][_0x41287e(0x2b5)]('hide'),document[_0x41287e(0x207)]('loader')[_0x41287e(0x2c3)][_0x41287e(0x2b5)]('hide'),document[_0x41287e(0x207)](_0x41287e(0x2b0))[_0x41287e(0x2c3)]['remove'](_0x41287e(0x21d)),document['getElementById'](_0x41287e(0x212))[_0x41287e(0x2c3)][_0x41287e(0x27e)](_0x41287e(0x21d)),document[_0x41287e(0x207)]('container_pedestrian')['classList'][_0x41287e(0x2b5)](_0x41287e(0x21d)),document[_0x41287e(0x207)](_0x41287e(0x2ca))[_0x41287e(0x2c3)]['remove'](_0x41287e(0x21d)),document[_0x41287e(0x207)](_0x41287e(0x29b))[_0x41287e(0x2c3)][_0x41287e(0x2b5)](_0x41287e(0x21d));}function flushData(){const _0x3dff4e=_0x56a6b3;try{garageLocation={},loopData={},loopDetected=![],bleDetected=![],presentButtonMode='-1',collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],cancelled=![],gate='',atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateDatainitialised=![],gateloopData=new Map(),beaconsMap=new Map(),altBeaconsMap=new Map(),loopDetectorSimulation=0x0,outcome='',gateForBeacon=new Map(),decisionData={},minorId=new Map(),minDistance=new Map(),lastDistance=new Map(),prevQRMessage='',specificationType='',scanToButtonGreenDelta=Date[_0x3dff4e(0x247)](),scanToButtonClickDelta=Date['now'](),gateDecisionDelta=Date['now'](),screenAppearanceTime=Date['now'](),scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,bookingID='',refId='',uid='',differentiationDelta=0x0,hideOpenButton(),hideGateLayout(),showAwaiting(),hideOpenButtonPedestrian(),showAwaitingPedestrian();}catch(_0x262134){pushException('flushData\x20'+_0x262134[_0x3dff4e(0x236)]);}}function validateHardwareConfig(_0x488d83){try{getBeaconListResponse=JSON['parse'](_0x488d83),getBeaconListResponse!=undefined?initHardwareConfig():getHardwareConfiguration();}catch(_0x2e8148){getHardwareConfiguration(),pushException('validateHardwareConfig\x20'+_0x2e8148['message']);}}function prefetchHardwareConfiguration(_0x2d6d18){validatePinaConfig(_0x2d6d18),getHardwareConfiguration(function(){const _0x6103c1=_0x176b;J2N_printLog(_0x6103c1(0x24e));});}function initSDKMethods(){const _0x303e21=_0x56a6b3;if(getBeaconListResponse!=undefined&&pinaConfig[_0x303e21(0x2ad)][_0x303e21(0x246)]==getBeaconListResponse[_0x303e21(0x254)][_0x303e21(0x2d4)]){let _0x50598c={};_0x50598c[_0x303e21(0x263)]=_0x303e21(0x25b),_0x50598c['clientId']=_0x303e21(0x208),_0x50598c[_0x303e21(0x2c2)]=pinaConfig['environment']==_0x303e21(0x278)?_0x303e21(0x2c4):_0x303e21(0x238),_0x50598c['password']=pinaConfig[_0x303e21(0x2a3)]=='PROD'?_0x303e21(0x1f2):_0x303e21(0x2da),_0x50598c[_0x303e21(0x1e3)]=getBeaconListResponse['data'][_0x303e21(0x251)][_0x303e21(0x252)][_0x303e21(0x289)],loopList=getBeaconListResponse[_0x303e21(0x254)][_0x303e21(0x251)][_0x303e21(0x282)],rangeData=new Map();if(isiOS()){_0x50598c[_0x303e21(0x263)]=pinaConfig[_0x303e21(0x2a3)]==_0x303e21(0x278)?_0x303e21(0x1ec):'broker.mqttdashboard.com',J2N_startLoopScan(JSON[_0x303e21(0x24c)](_0x50598c)),debugLog(_0x303e21(0x2b1));let _0x4bcb4d=beaconData[_0x303e21(0x24f)][_0x303e21(0x23e)],_0x567642=beaconData[_0x303e21(0x24f)][_0x303e21(0x28a)],_0x5575b1={'arrayRangeCount':_0x4bcb4d,'estimoteCloudDetailsModel':_0x567642};J2N_startBeaconScan(JSON['stringify'](_0x5575b1)),debugLog(_0x303e21(0x269));}(pinaConfigParams[_0x303e21(0x296)]!=undefined&&pinaConfigParams[_0x303e21(0x296)]||getBeaconListResponse[_0x303e21(0x254)][_0x303e21(0x2d0)]!=undefined&&getBeaconListResponse[_0x303e21(0x254)][_0x303e21(0x2d0)]['localeCompare']('1')===0x0)&&(initLoopData(),initBeaconData());}else getHardwareConfiguration(function(){displayWebViewAndStartSDK();});}function displayWebViewAndStartSDK(_0x429aba,_0x142457){const _0x137383=_0x56a6b3;try{debugLog(_0x137383(0x2b4));if(_0x429aba!=undefined){let _0x309e23=JSON[_0x137383(0x2cb)](_0x429aba);_0x309e23[_0x137383(0x2ad)]['zid']!=pinaConfig[_0x137383(0x2ad)]['zid']&&(getBeaconListResponse=undefined),validatePinaConfig(_0x429aba);}getBeaconListResponse!=undefined&&_0x142457!=undefined&&(getBeaconListResponse=JSON['parse'](_0x142457),initHardwareConfig());scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,debugLog(_0x137383(0x2a4)),showSimulation(),showDevMode();if(pinaConfig[_0x137383(0x2a3)]==_0x137383(0x278)&&pinaConfigParams['simulationMode']==!![]){alert(_0x137383(0x2b2));return;}initSDKMethods();}catch(_0x48f963){J2N_printLog(_0x48f963[_0x137383(0x236)]),pushException('displayWebViewAndStartSDK\x20'+_0x48f963[_0x137383(0x236)]);}}function validatePinaConfig(_0x471370){const _0x4b55bf=_0x56a6b3;try{flushData(),pinaConfig=JSON['parse'](_0x471370);isiOS()?(pinaConfigParams=pinaConfig[_0x4b55bf(0x2ad)],pinaSdkParams=pinaConfig[_0x4b55bf(0x299)],pinaClientParams=pinaConfig[_0x4b55bf(0x2c1)]):(pinaConfigParams=pinaConfig[_0x4b55bf(0x2ad)][_0x4b55bf(0x276)],pinaSdkParams=pinaConfig['pinaSdkParams']['nameValuePairs'],pinaClientParams=pinaConfig[_0x4b55bf(0x2c1)][_0x4b55bf(0x276)],pinaMiscParams=pinaConfig['pinaMiscParams'][_0x4b55bf(0x276)]);document[_0x4b55bf(0x207)](_0x4b55bf(0x2bc))[_0x4b55bf(0x271)]=pinaSdkParams[_0x4b55bf(0x231)],document[_0x4b55bf(0x207)](_0x4b55bf(0x29e))[_0x4b55bf(0x28e)][_0x4b55bf(0x25c)]=pinaSdkParams[_0x4b55bf(0x23b)]||_0x4b55bf(0x1fa);pinaConfigParams['gateType'][_0x4b55bf(0x23c)]('IN')===0x0?document[_0x4b55bf(0x207)]('move_closer_text')[_0x4b55bf(0x271)]=_0x4b55bf(0x2a5):document['getElementById'](_0x4b55bf(0x29e))[_0x4b55bf(0x271)]=_0x4b55bf(0x2b8);showDevMode();if(pinaSdkParams[_0x4b55bf(0x23b)]!=undefined){var _0x296d85=document[_0x4b55bf(0x1ee)](_0x4b55bf(0x2b9)),_0x280459=document[_0x4b55bf(0x1ee)]('multi_gate_btn'),_0x20e8d2=document[_0x4b55bf(0x1ee)](_0x4b55bf(0x2ac)),_0x10a86a=document[_0x4b55bf(0x1ee)](_0x4b55bf(0x23f));for(var _0x57750c=0x0;_0x57750c<_0x296d85['length'];_0x57750c++){_0x296d85[_0x57750c][_0x4b55bf(0x28e)][_0x4b55bf(0x1e6)]=pinaSdkParams[_0x4b55bf(0x23b)];}for(var _0x57750c=0x0;_0x57750c<_0x280459[_0x4b55bf(0x2c0)];_0x57750c++){_0x280459[_0x57750c][_0x4b55bf(0x28e)]['background']=pinaSdkParams[_0x4b55bf(0x23b)];}for(var _0x57750c=0x0;_0x57750c<_0x20e8d2['length'];_0x57750c++){_0x20e8d2[_0x57750c]['style'][_0x4b55bf(0x1e6)]=pinaSdkParams['gateButtonBgColor'];}for(var _0x57750c=0x0;_0x57750c<_0x10a86a['length'];_0x57750c++){_0x20e8d2[_0x57750c]['style'][_0x4b55bf(0x1e6)]=pinaSdkParams[_0x4b55bf(0x23b)];}document[_0x4b55bf(0x207)](_0x4b55bf(0x275))['style'][_0x4b55bf(0x25c)]=pinaSdkParams[_0x4b55bf(0x23b)],document['getElementById'](_0x4b55bf(0x29e))[_0x4b55bf(0x28e)][_0x4b55bf(0x25c)]=pinaSdkParams[_0x4b55bf(0x23b)];}pinaSdkParams[_0x4b55bf(0x2ce)]!=undefined?document[_0x4b55bf(0x207)](_0x4b55bf(0x221))['src']=pinaSdkParams[_0x4b55bf(0x2ce)]:document[_0x4b55bf(0x207)]('logo')[_0x4b55bf(0x22c)]=_0x4b55bf(0x224);}catch(_0x1662e7){J2N_printLog(_0x1662e7[_0x4b55bf(0x236)]),pushException('validatePinaConfig\x20'+_0x1662e7['message']);}}function _0x176b(_0x4d79d8,_0x15f0e3){const _0x5bbe65=_0x5bbe();return _0x176b=function(_0x176bb8,_0x45892e){_0x176bb8=_0x176bb8-0x1e3;let _0x75d799=_0x5bbe65[_0x176bb8];return _0x75d799;},_0x176b(_0x4d79d8,_0x15f0e3);}function validateLoopData(_0xd18361){const _0xf74c1e=_0x56a6b3;try{const _0x5f0d59=JSON[_0xf74c1e(0x2cb)](_0xd18361);for(let _0x3b630a=0x0;_0x3b630a<getBeaconListResponse[_0xf74c1e(0x254)][_0xf74c1e(0x251)][_0xf74c1e(0x252)][_0xf74c1e(0x26b)][_0xf74c1e(0x2c0)];_0x3b630a++){_0x5f0d59[_0xf74c1e(0x1f1)][_0xf74c1e(0x23c)](getBeaconListResponse[_0xf74c1e(0x254)][_0xf74c1e(0x251)][_0xf74c1e(0x252)][_0xf74c1e(0x26b)][_0x3b630a]['loop0Topic'])===0x0&&(gateloopData[_0xf74c1e(0x2c9)](getBeaconListResponse[_0xf74c1e(0x254)]['loopData'][_0xf74c1e(0x252)][_0xf74c1e(0x26b)][_0x3b630a]['gateID'],_0x5f0d59[_0xf74c1e(0x2a1)]),gateDatainitialised&&(_0x5f0d59[_0xf74c1e(0x2a1)]===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date['now']()-screenAppearanceTime)/0x3e8)),presentButtonMode[_0xf74c1e(0x2be)]()[_0xf74c1e(0x23c)]('-1')===0x0&&!(getBeaconListResponse[_0xf74c1e(0x254)][_0xf74c1e(0x251)][_0xf74c1e(0x252)][_0xf74c1e(0x235)]['localeCompare']('0')===0x0)&&takeAction(undefined,undefined,undefined)),_0x5f0d59['time']=returnDelta(),loopValues[_0xf74c1e(0x26c)](_0x5f0d59));}}catch(_0x2e3b3e){pushException('validateLoopData\x20'+_0x2e3b3e[_0xf74c1e(0x236)]);}}function validateLatLong(_0x3e0326){const _0x358bc7=_0x56a6b3;try{const _0x75eb4a=JSON[_0x358bc7(0x2cb)](_0x3e0326);currentLocation[_0x358bc7(0x2bf)]=_0x75eb4a['latitude'],currentLocation[_0x358bc7(0x29d)]=_0x75eb4a['longitude'],J2N_printLog(_0x358bc7(0x205)+_0x75eb4a[_0x358bc7(0x2bf)]),J2N_printLog(_0x358bc7(0x2d8)+_0x75eb4a[_0x358bc7(0x29d)]);}catch(_0x51acb4){pushException(_0x358bc7(0x245)+_0x51acb4[_0x358bc7(0x236)]);}}function getDistanceFromLatLonInKm(_0x3f4d44,_0x47329c,_0x3fe926,_0x1a03aa){const _0x4cba37=_0x56a6b3;try{let _0x5c5bd7=0x18e3,_0x85242f=deg2rad(_0x3fe926-_0x3f4d44),_0x421514=deg2rad(_0x1a03aa-_0x47329c),_0x76deb1=Math[_0x4cba37(0x2dc)](_0x85242f/0x2)*Math[_0x4cba37(0x2dc)](_0x85242f/0x2)+Math[_0x4cba37(0x2ab)](deg2rad(_0x3f4d44))*Math['cos'](deg2rad(_0x3fe926))*Math[_0x4cba37(0x2dc)](_0x421514/0x2)*Math['sin'](_0x421514/0x2),_0x34c7a1=0x2*Math[_0x4cba37(0x27c)](Math[_0x4cba37(0x281)](_0x76deb1),Math[_0x4cba37(0x281)](0x1-_0x76deb1)),_0x26d89e=_0x5c5bd7*_0x34c7a1;return _0x26d89e;}catch(_0x36528b){pushException('getDistanceFromLatLonInKm\x20'+_0x36528b[_0x4cba37(0x236)]);}}function deg2rad(_0x4c2c66){const _0x52a8cd=_0x56a6b3;try{return _0x4c2c66*(Math['PI']/0xb4);}catch(_0x35f580){pushException(_0x52a8cd(0x277)+_0x35f580[_0x52a8cd(0x236)]);}}function validateNFC(_0x3e695c){const _0x406fc0=_0x56a6b3;try{beaconId=_0x3e695c,techType='NFC',specificationType='2',openGate();}catch(_0x3ce6a0){J2N_printLog(_0x3ce6a0[_0x406fc0(0x236)]),J2N_postOnFailure(_0x406fc0(0x240)),pushException('validateNFC\x20'+_0x3ce6a0[_0x406fc0(0x236)]);}}function validateQR(_0x51162a){const _0x4db2cf=_0x56a6b3;try{if(prevQRMessage[_0x4db2cf(0x23c)](_0x51162a)===0x0){}else prevQRMessage=_0x51162a,beaconId=prevQRMessage,techType='QR',specificationType='3',openGate();}catch(_0x32bb4b){J2N_printLog(_0x32bb4b[_0x4db2cf(0x236)]),J2N_postOnFailure(_0x4db2cf(0x25d)),pushException(_0x4db2cf(0x20e)+_0x32bb4b[_0x4db2cf(0x236)]);}}function takeAction(_0x1a70a1,_0x4f13c5,_0x4faaf6){const _0x40e376=_0x56a6b3;try{if(pinaConfigParams[_0x40e376(0x296)]!=undefined&&pinaConfigParams[_0x40e376(0x296)]||getBeaconListResponse[_0x40e376(0x254)][_0x40e376(0x2d0)]!=undefined&&getBeaconListResponse[_0x40e376(0x254)][_0x40e376(0x2d0)][_0x40e376(0x23c)]('1')===0x0)debugLog(_0x40e376(0x237)),presentButtonMode[_0x40e376(0x23c)]('-1')===0x0?(presentButtonMode='1',isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout()):_0x4faaf6!=undefined&&(beaconId=_0x4f13c5,openGate());else{if(gateDatainitialised){if(getBeaconListResponse[_0x40e376(0x254)][_0x40e376(0x251)][_0x40e376(0x252)][_0x40e376(0x235)][_0x40e376(0x23c)]('0')===0x0)presentButtonMode[_0x40e376(0x23c)]('-1')===0x0?(isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1'):_0x1a70a1!=undefined&&(beaconId=_0x4f13c5,openGate());else try{beaconId=_0x4f13c5,myLaneLoop='0',otherLaneLoop='0';if(presentButtonMode['localeCompare']('-1')===0x0&&(!loopDetected||!bleDetected))return;else{presentButtonMode[_0x40e376(0x23c)]('-1')===0x0&&loopDetected&&bleDetected&&(isiOS()?selectGateiOS():selectGateAndroid());gateDecisionDeltaSec===0x0&&(gateDecisionDeltaSec=(Date[_0x40e376(0x247)]()-screenAppearanceTime)/0x3e8);let _0x30c9a2='-1',_0x31f7f7='-1',_0x5be8eb='-1',_0x4e45d1=0x0;for(let [_0x3730c7,_0x1245ed]of gateloopData){if(_0x4e45d1===0x0)_0x30c9a2=''+_0x1245ed,_0x4e45d1++;else{if(_0x4e45d1===0x1)_0x31f7f7=''+_0x1245ed,_0x4e45d1++;else _0x4e45d1===0x2&&(_0x5be8eb=''+_0x1245ed,_0x4e45d1++);}}let _0x29975c=_0x1a70a1!=undefined?_0x1a70a1:lane;switch(_0x29975c){case 0x1:if(_0x30c9a2[_0x40e376(0x23c)]('1')===0x0)myLaneLoop=0x1;if(_0x31f7f7['localeCompare']('1')===0x0||_0x5be8eb[_0x40e376(0x23c)]('1')===0x0)otherLaneLoop=0x1;break;case 0x2:if(_0x31f7f7[_0x40e376(0x23c)]('1')===0x0)myLaneLoop=0x1;if(_0x30c9a2[_0x40e376(0x23c)]('1')===0x0||_0x5be8eb[_0x40e376(0x23c)]('1')===0x0)otherLaneLoop=0x1;break;case 0x3:if(_0x5be8eb[_0x40e376(0x23c)]('1')===0x0)myLaneLoop=0x1;if(_0x30c9a2[_0x40e376(0x23c)]('1')===0x0||_0x31f7f7[_0x40e376(0x23c)]('1')===0x0)otherLaneLoop=0x1;break;default:break;}let _0x19bd1e;if(loopList!=null&&loopList['length']>0x0)for(let _0x446c5a=0x0;_0x446c5a<loopList[_0x40e376(0x2c0)];_0x446c5a++){if((loopList[_0x446c5a][_0x40e376(0x284)]['localeCompare']('X')===0x0||loopList[_0x446c5a][_0x40e376(0x284)][_0x40e376(0x23c)](oneBeacon)===0x0)&&(loopList[_0x446c5a][_0x40e376(0x1e7)][_0x40e376(0x23c)]('X')===0x0||loopList[_0x446c5a][_0x40e376(0x1e7)][_0x40e376(0x23c)](otherBeacon)===0x0)&&(loopList[_0x446c5a][_0x40e376(0x215)][_0x40e376(0x23c)]('X')===0x0||loopList[_0x446c5a][_0x40e376(0x215)][_0x40e376(0x23c)](myLaneLoop)===0x0)&&(loopList[_0x446c5a][_0x40e376(0x1fb)]['localeCompare']('X')===0x0||loopList[_0x446c5a]['otherLaneLoop'][_0x40e376(0x23c)](otherLaneLoop)===0x0)&&loopList[_0x446c5a][_0x40e376(0x2cd)][_0x40e376(0x23c)](presentButtonMode)===0x0){_0x19bd1e=loopList[_0x446c5a];if(outcome===''||_0x4faaf6!=undefined){if(_0x4faaf6!=undefined)outcome=outcome+_0x19bd1e[_0x40e376(0x22d)][_0x40e376(0x1f7)]('#',_0x4faaf6);else gate!=undefined&&(outcome=outcome+_0x19bd1e[_0x40e376(0x22d)]['replace']('#',gate));}switch(_0x19bd1e[_0x40e376(0x2c5)]){case'-1':presentButtonMode=_0x19bd1e[_0x40e376(0x2c5)];break;case'0':_0x4faaf6!=undefined&&openGate();break;case'1':buttonMode=_0x40e376(0x244),hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode=_0x19bd1e[_0x40e376(0x2c5)];break;case'2':buttonMode='multi',hideAwaiting(),showGateLayout(),hideOpenButton(),presentButtonMode=_0x19bd1e[_0x40e376(0x2c5)];break;case'3':document[_0x40e376(0x207)](_0x40e376(0x212))['classList'][_0x40e376(0x2b5)](_0x40e376(0x21d)),document[_0x40e376(0x207)]('alert')[_0x40e376(0x2c3)]['remove'](_0x40e376(0x21d));break;default:break;}return;}}}}catch(_0x200cfd){J2N_printLog(_0x200cfd[_0x40e376(0x236)]),pushException('takeAction\x20inner\x20'+_0x200cfd[_0x40e376(0x236)]);}}}}catch(_0x2e51ac){pushException(_0x40e376(0x24d)+_0x2e51ac[_0x40e376(0x236)]);}}function showProgress(_0x45b748){const _0x3a41fc=_0x56a6b3;try{var _0x16a3d8=document['getElementById'](_0x3a41fc(0x23f));_0x45b748?_0x16a3d8[_0x3a41fc(0x2c3)][_0x3a41fc(0x27e)](_0x3a41fc(0x21d)):_0x16a3d8[_0x3a41fc(0x2c3)][_0x3a41fc(0x2b5)]('hide');}catch(_0x2cb4e1){pushException(_0x3a41fc(0x261)+_0x2cb4e1[_0x3a41fc(0x236)]);}}function getHardwareConfiguration(_0x20921e){const _0x1b5b58=_0x56a6b3;try{const _0x37af3a=url_base['getURL']+url_hardwareConfig;showProgress(!![]),debugLog(_0x1b5b58(0x283)),fetch(_0x37af3a,{'method':'POST','body':JSON[_0x1b5b58(0x24c)]({'pinaConfigParams':pinaConfigParams,'pinaJSParams':pinaConfig[_0x1b5b58(0x200)]}),'headers':{'Accept':_0x1b5b58(0x2bd),'Content-Type':_0x1b5b58(0x2bd)}})[_0x1b5b58(0x214)](_0x2e0671=>_0x2e0671[_0x1b5b58(0x1f0)]())[_0x1b5b58(0x214)](_0x4fee3c=>{const _0x12c682=_0x1b5b58;showProgress(![]);let _0x263bbd=!!_0x4fee3c['status']||![],_0x3855a9=_0x4fee3c[_0x12c682(0x236)]||'';_0x263bbd==!![]?(getBeaconListResponse=_0x4fee3c,J2N_forceJSupdate(JSON['stringify'](_0x4fee3c)),initHardwareConfig(),_0x20921e()):debugLog(_0x12c682(0x262),_0x3855a9);})[_0x1b5b58(0x258)](_0x6f44ec=>{const _0x39646d=_0x1b5b58;J2N_printLog(_0x6f44ec[_0x39646d(0x236)]),showProgress(![]),pushException('getHardwareConfiguration\x20response'+_0x6f44ec[_0x39646d(0x236)]);});}catch(_0x11e831){showProgress(![]),pushException('getHardwareConfiguration\x20'+_0x11e831['message']);}}function initHardwareConfig(){const _0x3cc169=_0x56a6b3;try{beaconData=getBeaconListResponse[_0x3cc169(0x254)][_0x3cc169(0x2a9)],nfcData=getBeaconListResponse[_0x3cc169(0x254)][_0x3cc169(0x1ed)],qrCode=getBeaconListResponse[_0x3cc169(0x254)][_0x3cc169(0x20c)];getBeaconListResponse[_0x3cc169(0x254)][_0x3cc169(0x216)]!=null&&getBeaconListResponse[_0x3cc169(0x254)][_0x3cc169(0x216)][_0x3cc169(0x23c)]('1')===0x0?document[_0x3cc169(0x207)]('pedestrian_flow')[_0x3cc169(0x2c3)][_0x3cc169(0x27e)](_0x3cc169(0x1f3)):document[_0x3cc169(0x207)](_0x3cc169(0x286))[_0x3cc169(0x2c3)][_0x3cc169(0x2b5)](_0x3cc169(0x1f3));if(isiOS()){let _0x11ba3e=beaconData[_0x3cc169(0x24f)][_0x3cc169(0x23e)];for(let _0x16ef6f=0x0;_0x16ef6f<_0x11ba3e[_0x3cc169(0x2c0)];_0x16ef6f++){rangeWeightData['set'](_0x11ba3e[_0x16ef6f][_0x3cc169(0x279)],_0x11ba3e[_0x16ef6f]['weight']);}}autoSelectMode=beaconData['beaconConfig'][_0x3cc169(0x2a7)],autoSelectMode[_0x3cc169(0x213)]=beaconData[_0x3cc169(0x24f)]['minimumBeaconThreshold'],autoSelectMode[_0x3cc169(0x27a)]=beaconData[_0x3cc169(0x24f)][_0x3cc169(0x213)],maxDistance=parseInt(qrCode[_0x3cc169(0x2cc)][_0x3cc169(0x2c6)]),garageLocation[_0x3cc169(0x22e)]=_0x3cc169(0x260),garageLocation[_0x3cc169(0x2bf)]=parseFloat(getBeaconListResponse[_0x3cc169(0x254)]['garageLatitude']),garageLocation['longitude']=parseFloat(getBeaconListResponse[_0x3cc169(0x254)]['garageLongitude']),loopDetectors=getBeaconListResponse['data'][_0x3cc169(0x251)][_0x3cc169(0x223)];for(let _0x2e1825=0x0;_0x2e1825<beaconData[_0x3cc169(0x24f)][_0x3cc169(0x1f9)][_0x3cc169(0x1e9)][_0x3cc169(0x2c0)];_0x2e1825++){gateloopData[_0x3cc169(0x2c9)](beaconData['beaconConfig'][_0x3cc169(0x1f9)][_0x3cc169(0x1e9)][_0x2e1825][_0x3cc169(0x2dd)],0x0);}let _0xd23778={};_0xd23778[_0x3cc169(0x263)]='tcp://mqtts.divrt.co:1883',_0xd23778['clientId']=_0x3cc169(0x208),_0xd23778[_0x3cc169(0x2c2)]=_0x3cc169(0x2c4),_0xd23778[_0x3cc169(0x264)]=_0x3cc169(0x1f2),_0xd23778[_0x3cc169(0x1e3)]=getBeaconListResponse['data']['loopData']['loopConfig'][_0x3cc169(0x289)],loopList=getBeaconListResponse[_0x3cc169(0x254)]['loopData'][_0x3cc169(0x282)],showGateIssues();}catch(_0x217860){J2N_printLog(_0x217860['message']),pushException(_0x3cc169(0x280)+_0x217860[_0x3cc169(0x236)]);}}function openGate(){const _0x41702c=_0x56a6b3;if(pinaConfig[_0x41702c(0x2a3)]=='PROD'&&pinaConfigParams[_0x41702c(0x296)]==!![]){alert('Simulation\x20mode\x20is\x20restricted\x20in\x20Production.\x20Please\x20change\x20DIVRT\x20environment\x20to\x20DEV');return;}if(window[_0x41702c(0x2a2)][_0x41702c(0x24b)]==![]){alert(_0x41702c(0x285));return;}try{J2N_suspendClick();const _0x21a8e3=url_base['getURL']+url_openGate;showProgress(!![]),debugLog('openGate'),fetch(_0x21a8e3,{'method':_0x41702c(0x29f),'body':JSON[_0x41702c(0x24c)]({'beaconId':beaconId,'specification_type':specificationType,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'pinaJSParams':pinaConfig[_0x41702c(0x200)]}),'headers':{'Accept':_0x41702c(0x2bd),'Content-Type':_0x41702c(0x2bd)}})['then'](_0x4935e5=>{const _0x47ddb9=_0x41702c;showProgress(![]),_0x4935e5[_0x47ddb9(0x1f0)]()[_0x47ddb9(0x214)](_0x2b4ff3=>{const _0x162590=_0x47ddb9;try{_0x2b4ff3[_0x162590(0x2aa)]?(showAwaiting(),hideGateLayout(),hideOpenButton(),document['getElementById'](_0x162590(0x2bc))[_0x162590(0x271)]='',document[_0x162590(0x207)](_0x162590(0x29e))[_0x162590(0x271)]=_0x162590(0x2a5),document[_0x162590(0x207)](_0x162590(0x2b0))['classList']['add'](_0x162590(0x21d)),document['getElementById'](_0x162590(0x23f))[_0x162590(0x2c3)][_0x162590(0x27e)]('hide'),bookingID=_0x2b4ff3[_0x162590(0x2a6)],refId=_0x2b4ff3[_0x162590(0x2a6)],uid=_0x2b4ff3[_0x162590(0x25f)],pushLogs(),J2N_postOnSuccess(JSON[_0x162590(0x24c)](_0x2b4ff3))):(J2N_printLog(JSON[_0x162590(0x24c)](_0x2b4ff3)),J2N_postOnFailure(JSON[_0x162590(0x24c)](_0x2b4ff3)),pushLogs());}catch(_0xb78f4a){showProgress(![]),debugLog(_0x162590(0x21b)+_0xb78f4a[_0x162590(0x236)]),J2N_printLog('Open\x20Gate\x20failure'+_0xb78f4a[_0x162590(0x236)]),J2N_postOnFailure('Gate\x20open\x20failure'),pushException(_0x162590(0x2ba)+_0xb78f4a[_0x162590(0x236)]),pushLogs();}});})[_0x41702c(0x258)](_0x4861dd=>{const _0x417534=_0x41702c;showProgress(![]),debugLog('openGateExcep\x20'+_0x4861dd[_0x417534(0x236)]),J2N_printLog(_0x4861dd[_0x417534(0x236)]),J2N_postOnFailure(_0x417534(0x2b7)),pushException('openGate\x20response\x20outer'+_0x4861dd['message']);});}catch(_0x5e52e3){showProgress(![]),debugLog(_0x41702c(0x21b)+_0x5e52e3[_0x41702c(0x236)]),J2N_postOnFailure(_0x41702c(0x2b7)),pushException(_0x41702c(0x2ae)+_0x5e52e3[_0x41702c(0x236)]);}}function pushLogs(){const _0x2e80ad=_0x56a6b3;try{let _0x17b9d5=[];for(let [_0x1058a3,_0x5735a7]of minorId){let _0x443dee={};_0x443dee[_0x2e80ad(0x2cf)]=_0x1058a3,_0x443dee['lastDistance']=lastDistance[_0x2e80ad(0x26f)](_0x1058a3),_0x443dee[_0x2e80ad(0x273)]=minDistance[_0x2e80ad(0x26f)](_0x1058a3),_0x443dee[_0x2e80ad(0x1ea)]=firstDistance[_0x2e80ad(0x26f)](_0x1058a3),_0x443dee['firstTime']=firstTime[_0x2e80ad(0x26f)](_0x1058a3),_0x17b9d5[_0x2e80ad(0x26c)](_0x443dee);}isiOS()?decisionData[_0x2e80ad(0x2a9)]=Object[_0x2e80ad(0x21e)](weightDataDict):decisionData['beaconData']=_0x17b9d5;decisionData[_0x2e80ad(0x251)]=loopValues,decisionData[_0x2e80ad(0x1f8)]=beaconId,decisionData['differentiationDelta']=differentiationDelta,decisionData[_0x2e80ad(0x204)]=scanToButtonGreenDeltaSec,decisionData[_0x2e80ad(0x227)]=scanToButtonClickDeltaSec,decisionData[_0x2e80ad(0x230)]=gateDecisionDeltaSec,decisionData[_0x2e80ad(0x29a)]=pinaConfigParams[_0x2e80ad(0x296)],decisionData['buttonMode']=buttonMode,decisionData['sequenceLogs']=logArray,(decisionData[_0x2e80ad(0x293)]=proximityDataArray,decisionData[_0x2e80ad(0x22d)]=outcome),decisionData[_0x2e80ad(0x297)]=bookingID,decisionData[_0x2e80ad(0x210)]=refId,decisionData[_0x2e80ad(0x25f)]=uid,decisionData['gateType']=pinaConfigParams['gateType'],decisionData['ostype']=pinaConfigParams[_0x2e80ad(0x27d)],decisionData['zid']=pinaConfigParams['zid'],decisionData['uniqueID']=pinaConfigParams[_0x2e80ad(0x222)],decisionData[_0x2e80ad(0x232)]=parseJwt(pinaClientParams[_0x2e80ad(0x28d)]),decisionData[_0x2e80ad(0x219)]=techType,decisionData['firstBleHitTime']=firstBleHitTime,decisionData[_0x2e80ad(0x28f)]=bleEnabledTime,decisionData[_0x2e80ad(0x20a)]=loopEnabledTime,decisionData[_0x2e80ad(0x26d)]=pinaConfig[_0x2e80ad(0x200)]['version'],decisionData['osversion']=pinaConfigParams[_0x2e80ad(0x225)];const _0x27520e=url_base['getURL']+url_decisionInfo;logger(),fetch(_0x27520e,{'method':_0x2e80ad(0x29f),'body':JSON[_0x2e80ad(0x24c)](decisionData),'headers':{'Accept':_0x2e80ad(0x2bd),'Content-Type':_0x2e80ad(0x2bd)}})[_0x2e80ad(0x214)](_0x3de920=>{})[_0x2e80ad(0x258)](_0x1bdc07=>{const _0x5e47b6=_0x2e80ad;pushException('pushLogs\x20response\x20'+_0x1bdc07[_0x5e47b6(0x236)]);});}catch(_0x2a6bae){pushException('pushLogs\x20'+_0x2a6bae[_0x2e80ad(0x236)]);}}function startCountDownTimer(_0x3af2c5){const _0x2bbe82=_0x56a6b3;try{_0x3af2c5?setTimeout(function(){const _0x478299=_0x176b;bleEnabledTime===0x0&&(bleEnabledTime=(Date[_0x478299(0x247)]()-screenAppearanceTime)/0x3e8),bleDetected=!![],thresholdTimerExecuted=!![],takeAction(undefined,undefined,undefined),debugLog('Timer\x20Ended');},parseFloat(autoSelectMode[_0x2bbe82(0x1fe)])*0x3e8||0xbb8):thresholdTimerExecuted&&takeAction(undefined,undefined,undefined);}catch(_0x3450f5){pushException(_0x2bbe82(0x20f)+_0x3450f5[_0x2bbe82(0x236)]);}}function pushException(_0xec9aa4){const _0x1bd6e8=_0x56a6b3;debugLog(_0x1bd6e8(0x2d2)+_0xec9aa4),fetch(loggerURL[_0x1bd6e8(0x256)],{'method':'POST','body':JSON['stringify']({'exception':_0xec9aa4,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams[_0x1bd6e8(0x28d)]),'uid':parseInt(pinaConfig[_0x1bd6e8(0x2ad)]['uid'])||-0x1}),'headers':{'Accept':_0x1bd6e8(0x2bd),'Content-Type':_0x1bd6e8(0x2bd)}})['then'](_0x314137=>{});}function logger(){const _0x415c89=_0x56a6b3;fetch(loggerURL['getURL'],{'method':_0x415c89(0x29f),'body':JSON[_0x415c89(0x24c)]({'decisionData':decisionData,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams['bearerToken']),'uid':parseInt(pinaConfig[_0x415c89(0x2ad)][_0x415c89(0x25f)])||-0x1}),'headers':{'Accept':'application/json','Content-Type':_0x415c89(0x2bd)}})['then'](_0x46d4a4=>{});}function initPinaModel(){const _0x2f0268=_0x56a6b3;try{pinaConfigParams={},pinaConfigParams['zid']=_0x2f0268(0x28c),pinaConfigParams[_0x2f0268(0x246)]='IN',pinaConfigParams[_0x2f0268(0x2d3)]=_0x2f0268(0x257),pinaConfigParams[_0x2f0268(0x27d)]=_0x2f0268(0x211),pinaConfigParams['uniqueID']=_0x2f0268(0x2d7),pinaSdkParams={},pinaSdkParams[_0x2f0268(0x231)]=_0x2f0268(0x2d6),pinaClientParams={},pinaMiscParams={},decisionData['bookingID']=pinaConfigParams['orderId'],decisionData[_0x2f0268(0x210)]=pinaConfigParams[_0x2f0268(0x220)],decisionData[_0x2f0268(0x246)]=pinaConfigParams[_0x2f0268(0x246)],decisionData['osTypeVer']=pinaConfigParams[_0x2f0268(0x27d)],decisionData['simulation']=pinaConfigParams[_0x2f0268(0x296)],decisionData[_0x2f0268(0x228)]=pinaConfigParams[_0x2f0268(0x228)],decisionData[_0x2f0268(0x25f)]=pinaConfigParams[_0x2f0268(0x222)],document[_0x2f0268(0x207)](_0x2f0268(0x2bc))[_0x2f0268(0x271)]=pinaSdkParams[_0x2f0268(0x231)],scanToButtonGreenDelta=Date[_0x2f0268(0x247)](),scanToButtonClickDelta=Date[_0x2f0268(0x247)](),gateDecisionDelta=Date[_0x2f0268(0x247)](),getHardwareConfig(undefined);}catch(_0x1815e6){J2N_printLog(_0x1815e6[_0x2f0268(0x236)]);}}function initBeaconData(){const _0x1f6f95=_0x56a6b3;try{setTimeout(function(){const _0x36c415=_0x176b;hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1',gate=beaconData[_0x36c415(0x24f)]['lanesBeaconsMap'][_0x36c415(0x1e9)][0x0]['gateID'];for(let _0x171a3d=0x0;_0x171a3d<beaconData[_0x36c415(0x23a)][_0x36c415(0x2c0)];_0x171a3d++){gateForBeacon[_0x36c415(0x2c9)](beaconData['beaconList'][_0x171a3d][_0x36c415(0x2dd)],beaconData[_0x36c415(0x23a)][_0x171a3d][_0x36c415(0x1ff)]);}},0xbb8);}catch(_0x4badb9){J2N_printLog(_0x4badb9[_0x1f6f95(0x236)]);}}function initLoopData(){}function initNFC(){const _0x49e895=_0x56a6b3;try{validateNFC(_0x49e895(0x22b));}catch(_0x35a3f7){J2N_printLog(_0x35a3f7[_0x49e895(0x236)]);}}function initQR(){const _0x5622b7=_0x56a6b3;try{validateQR(_0x5622b7(0x294));}catch(_0x13b304){J2N_printLog(_0x13b304['message']);}}function baseParametersProximity(){const _0x52a2c6=_0x56a6b3;return decisionData[_0x52a2c6(0x2a9)]=Object[_0x52a2c6(0x21e)](weightDataDict),decisionData['loopData']=loopValues,decisionData[_0x52a2c6(0x1f8)]=beaconId,decisionData[_0x52a2c6(0x255)]=differentiationDelta,decisionData[_0x52a2c6(0x204)]=scanToButtonGreenDeltaSec,decisionData[_0x52a2c6(0x227)]=scanToButtonClickDeltaSec,decisionData[_0x52a2c6(0x230)]=gateDecisionDeltaSec,decisionData[_0x52a2c6(0x29a)]=pinaConfigParams[_0x52a2c6(0x296)],decisionData[_0x52a2c6(0x1f4)]=buttonMode,decisionData[_0x52a2c6(0x20d)]=logArray,(decisionData['proximitydata']=proximityDataArray,decisionData[_0x52a2c6(0x22d)]=outcome),decisionData['bookingID']=bookingID,decisionData['refId']=refId,decisionData[_0x52a2c6(0x25f)]=uid,decisionData[_0x52a2c6(0x246)]=pinaConfigParams[_0x52a2c6(0x246)],decisionData[_0x52a2c6(0x27d)]=pinaConfigParams[_0x52a2c6(0x27d)],decisionData[_0x52a2c6(0x228)]=pinaConfigParams['zid'],decisionData['uniqueID']=pinaConfigParams[_0x52a2c6(0x222)],decisionData[_0x52a2c6(0x232)]=parseJwt(pinaClientParams['bearerToken']),decisionData['techType']=techType,decisionData[_0x52a2c6(0x1fc)]=firstBleHitTime,decisionData['bleEnabledTime']=bleEnabledTime,decisionData['loopEnabledTime']=loopEnabledTime,decisionData['jsversion']=pinaConfig['pinaJSParams'][_0x52a2c6(0x287)],decisionData['osversion']=pinaConfigParams[_0x52a2c6(0x225)],decisionData;}function debugLog(_0x3839d1,_0x38777b){const _0x4c1efc=_0x56a6b3;debugCount+=0x1;let _0x2637e1=Date[_0x4c1efc(0x247)]()/0x3e8;if(debugCount==0x1){logStartTime=_0x2637e1;const _0x340bcc=_0x4c1efc(0x241)+new Date()[_0x4c1efc(0x29c)]();logArray[_0x4c1efc(0x26c)](_0x340bcc);}const _0x16fdb1=debugCount+_0x4c1efc(0x1fd)+_0x3839d1+_0x4c1efc(0x1fd)+parseInt(_0x2637e1-logStartTime);logArray[_0x4c1efc(0x26c)](_0x16fdb1);}function returnDelta(){const _0x53e7a3=_0x56a6b3;let _0x2668cb=Date[_0x53e7a3(0x247)]()/0x3e8;logStartTime==0x0&&(logStartTime=_0x2668cb);let _0x355a05=parseInt(_0x2668cb-logStartTime);return _0x355a05;}function parseJwt(_0x305ea1){const _0x2c3a6b=_0x56a6b3;try{return JSON[_0x2c3a6b(0x2cb)](atob(_0x305ea1[_0x2c3a6b(0x2b6)]('.')[0x1]))['email'];}catch(_0x511027){return'na';}};function initGateData(_0x52abaa){const _0x54a4e5=_0x56a6b3;try{let _0x30a687=0x0,_0x43fc7c=[];for(let _0xdd1fa5=0x0;_0xdd1fa5<beaconData['beaconConfig'][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][_0x54a4e5(0x2c0)];_0xdd1fa5++){beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][_0xdd1fa5][_0x54a4e5(0x2db)][_0x54a4e5(0x23c)](_0x52abaa)===0x0?(_0x43fc7c[_0x30a687]=beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][_0xdd1fa5],_0x30a687++):gateloopData[_0x54a4e5(0x28b)](beaconData[_0x54a4e5(0x24f)]['lanesBeaconsMap'][_0x54a4e5(0x1e9)][_0xdd1fa5][_0x54a4e5(0x2dd)]);}beaconData['beaconConfig'][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)]=_0x43fc7c;beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)]['lanesToBeaconList'][_0x54a4e5(0x2c0)]==0x1?loopList=getBeaconListResponse[_0x54a4e5(0x254)][_0x54a4e5(0x251)][_0x54a4e5(0x242)]:loopList=getBeaconListResponse['data']['loopData'][_0x54a4e5(0x26a)];for(let _0x418c4b=0x0;_0x418c4b<beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)]['lanesToBeaconList'][_0x54a4e5(0x2c0)];_0x418c4b++){var _0x48c06f='';for(var _0x244c7a=0x0;_0x244c7a<beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][_0x418c4b][_0x54a4e5(0x26e)]['length'];_0x244c7a++){_0x48c06f=_0x48c06f+'*'+beaconData[_0x54a4e5(0x24f)]['lanesBeaconsMap']['lanesToBeaconList'][_0x418c4b]['attachment_minor_ids'][_0x244c7a];}minGateData['set'](_0x48c06f,[beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][_0x418c4b]['gateID'],0xa]),maxGateData[_0x54a4e5(0x2c9)](_0x48c06f,[beaconData['beaconConfig']['lanesBeaconsMap'][_0x54a4e5(0x1e9)][_0x418c4b]['gateID'],0x0]);}document[_0x54a4e5(0x207)](_0x54a4e5(0x1e8))[_0x54a4e5(0x271)]=beaconData['beaconConfig'][_0x54a4e5(0x1f9)]['lanesToBeaconList'][0x0]['name'];beaconData[_0x54a4e5(0x24f)]['lanesBeaconsMap']['lanesToBeaconList']['length']>0x1&&(document[_0x54a4e5(0x207)]('right_btn')[_0x54a4e5(0x271)]=beaconData[_0x54a4e5(0x24f)]['lanesBeaconsMap'][_0x54a4e5(0x1e9)][0x1][_0x54a4e5(0x22e)]);beaconData[_0x54a4e5(0x24f)][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)]['length']>0x2?document[_0x54a4e5(0x207)](_0x54a4e5(0x1ef))['innerHTML']=beaconData['beaconConfig'][_0x54a4e5(0x1f9)][_0x54a4e5(0x1e9)][0x2][_0x54a4e5(0x22e)]:document[_0x54a4e5(0x207)](_0x54a4e5(0x1ef))['innerHTML']='';gateDatainitialised=!![];for(let [_0x3d0ca2,_0x52fee5]of gateloopData){_0x52fee5===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date[_0x54a4e5(0x247)]()-screenAppearanceTime)/0x3e8));}}catch(_0x482144){pushException(_0x54a4e5(0x2b3)+_0x482144['message']);}}
