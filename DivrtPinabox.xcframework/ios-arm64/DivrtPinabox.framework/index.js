const _0x512fe5=_0x4450;(function(_0x3f681e,_0x2a2f97){const _0xda9cff=_0x4450,_0x382b9e=_0x3f681e();while(!![]){try{const _0x296b87=-parseInt(_0xda9cff(0x227))/0x1+-parseInt(_0xda9cff(0x1a0))/0x2*(parseInt(_0xda9cff(0x244))/0x3)+-parseInt(_0xda9cff(0x1e8))/0x4+parseInt(_0xda9cff(0x1b5))/0x5+-parseInt(_0xda9cff(0x1a4))/0x6+parseInt(_0xda9cff(0x1e9))/0x7+parseInt(_0xda9cff(0x1eb))/0x8;if(_0x296b87===_0x2a2f97)break;else _0x382b9e['push'](_0x382b9e['shift']());}catch(_0xe228a0){_0x382b9e['push'](_0x382b9e['shift']());}}}(_0x401d,0x7586b),window[_0x512fe5(0x1a8)]=function AndroidClass(){});function include(_0x3f7ec8){const _0x2b4547=_0x512fe5;var _0x5d942b=document[_0x2b4547(0x1f7)](_0x2b4547(0x181));_0x5d942b[_0x2b4547(0x23b)]=_0x3f7ec8,_0x5d942b[_0x2b4547(0x1b6)]='text/javascript',_0x5d942b[_0x2b4547(0x192)]=!![],document['getElementsByTagName']('head')['item'](0x0)[_0x2b4547(0x1e3)](_0x5d942b);}include(_0x512fe5(0x228)),include(_0x512fe5(0x1bf)),include(_0x512fe5(0x234));const url_hardwareConfig='api/v2/getHardwareConfigByZcode',url_openGate=_0x512fe5(0x1f8),url_decisionInfo=_0x512fe5(0x1cf);let url_base={get 'getURL'(){const _0x33af68=_0x512fe5;if(pinaConfig[_0x33af68(0x206)]==_0x33af68(0x166))return'https://pinaboxapi.divrt.co/';else return pinaConfig[_0x33af68(0x206)]==_0x33af68(0x20c)?_0x33af68(0x1b8):_0x33af68(0x1d0);}},loggerURL={get 'getURL'(){const _0x4cbe64=_0x512fe5;return pinaConfig[_0x4cbe64(0x206)]==_0x4cbe64(0x166)?_0x4cbe64(0x1a1):_0x4cbe64(0x17a);}},pinaConfig,pinaConfigParams,pinaSdkParams,pinaClientParams,pinaMiscParams,getBeaconListResponse,beaconData,nfcData,qrCode,autoSelectMode,garageLocation={},loopData={},loopDetectorMqttTopic,loopDetected=![],bleDetected=![],collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],gateDecisionDeltaSec,cancelled=![],gate,scanToButtonGreenDeltaSec,atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateloopData=new Map(),maxDistance,beaconsMap=new Map(),altBeaconsMap=new Map(),beaconId,delta,differentiationDelta,loopDetectorSimulation=0x0,commandId,scanToButtonClickDeltaSec,outcome='',gateForBeacon=new Map(),decisionData={},buttonMode,presentButtonMode='-1',minorId=new Map(),minorIdDebug=new Map(),minDistance=new Map(),lastDistance=new Map(),rangeWeightData=new Map(),rangeData=new Map(),deciTime=new Map(),deciDistance=new Map(),firstDistance=new Map(),firstTime=new Map(),loopValues=[],loopList=[],oneBeacon='X',otherBeacon='X',myLaneLoop='X',otherLaneLoop='X',lane=-0x1,currentLocation={},prevQRMessage='',batteryDataDictionaryArray=[],screenAppearanceTime,proximityDataArray=[],weightDataDict={},logArray=[],debugCount=0x0,logStartTime=0x0,beaconIdPedestrian,loopEnabledTime,bleEnabledTime,firstBleHitTime,techType=_0x512fe5(0x1dd),bookingID,uid,gateDatainitialised=![],specificationType='';function onClickGateIssues(){const _0x1892a3=_0x512fe5;try{document[_0x1892a3(0x221)]('container_main')[_0x1892a3(0x219)][_0x1892a3(0x1f1)]('hide'),document[_0x1892a3(0x221)](_0x1892a3(0x223))[_0x1892a3(0x219)][_0x1892a3(0x209)](_0x1892a3(0x198));}catch(_0x313c92){pushException(_0x1892a3(0x25f)+_0x313c92['message']);}}function onClickBackGateIssues(){const _0x3dbff0=_0x512fe5;try{document[_0x3dbff0(0x221)](_0x3dbff0(0x259))[_0x3dbff0(0x219)][_0x3dbff0(0x209)](_0x3dbff0(0x198)),document[_0x3dbff0(0x221)](_0x3dbff0(0x223))[_0x3dbff0(0x219)][_0x3dbff0(0x1f1)](_0x3dbff0(0x198));}catch(_0x1c9b06){pushException('onClickBackGateIssues\x20'+_0x1c9b06[_0x3dbff0(0x1cd)]);}}function onClickPedestrian(){const _0x2cdd2d=_0x512fe5;try{document[_0x2cdd2d(0x221)](_0x2cdd2d(0x19d))[_0x2cdd2d(0x219)][_0x2cdd2d(0x1f1)](_0x2cdd2d(0x198)),document['getElementById'](_0x2cdd2d(0x1de))[_0x2cdd2d(0x219)][_0x2cdd2d(0x209)](_0x2cdd2d(0x198));}catch(_0x5ccbc6){pushException(_0x2cdd2d(0x224)+_0x5ccbc6['message']);}}function onClickBackPedestrian(){const _0x44c5c6=_0x512fe5;try{document[_0x44c5c6(0x221)](_0x44c5c6(0x19d))['classList'][_0x44c5c6(0x209)](_0x44c5c6(0x198)),document['getElementById'](_0x44c5c6(0x1de))[_0x44c5c6(0x219)][_0x44c5c6(0x1f1)](_0x44c5c6(0x198));}catch(_0x57eee1){pushException('onClickBackPedestrian\x20'+_0x57eee1[_0x44c5c6(0x1cd)]);}}function _0x4450(_0x4190c7,_0x42478e){const _0x401dfd=_0x401d();return _0x4450=function(_0x4450e9,_0xbf4ce3){_0x4450e9=_0x4450e9-0x166;let _0x38a630=_0x401dfd[_0x4450e9];return _0x38a630;},_0x4450(_0x4190c7,_0x42478e);}function showOpenButtonPedestrian(){const _0x6be537=_0x512fe5;try{document[_0x6be537(0x221)](_0x6be537(0x16d))['style'][_0x6be537(0x200)]='#FFFFFF',document[_0x6be537(0x221)](_0x6be537(0x1f2))[_0x6be537(0x219)][_0x6be537(0x209)]('hide');}catch(_0x5a4d89){pushException(_0x6be537(0x23d)+_0x5a4d89[_0x6be537(0x1cd)]);}}function hideAwaitingPedestrian(){const _0x1176eb=_0x512fe5;try{document[_0x1176eb(0x221)](_0x1176eb(0x25e))[_0x1176eb(0x219)][_0x1176eb(0x1f1)]('hide');}catch(_0x1deed5){pushException(_0x1176eb(0x1d6)+_0x1deed5['message']);}}function hideOpenButtonPedestrian(){const _0x1d2b9e=_0x512fe5;try{document[_0x1d2b9e(0x221)](_0x1d2b9e(0x1f2))['classList'][_0x1d2b9e(0x1f1)](_0x1d2b9e(0x198));}catch(_0x77c109){pushException(_0x1d2b9e(0x23d)+_0x77c109[_0x1d2b9e(0x1cd)]);}}function showAwaitingPedestrian(){const _0x530906=_0x512fe5;try{document[_0x530906(0x221)](_0x530906(0x25e))[_0x530906(0x219)][_0x530906(0x209)](_0x530906(0x198));}catch(_0x435e5d){pushException(_0x530906(0x1d6)+_0x435e5d[_0x530906(0x1cd)]);}}function storeBeaconIdPedestrian(_0x4b87b9){beaconIdPedestrian=_0x4b87b9;}function onClickBLEButtonPedestrian(){const _0x22324d=_0x512fe5;try{openGatePedestrian();}catch(_0x50dd73){pushException(_0x22324d(0x171)+_0x50dd73[_0x22324d(0x1cd)]);}}function openGatePedestrian(){const _0x19fd04=_0x512fe5;if(window[_0x19fd04(0x239)][_0x19fd04(0x18f)]==![]){alert(_0x19fd04(0x1c7));return;}try{J2N_suspendClick();const _0x4e1600=url_base['getURL']+url_openGate;showProgress(!![]),debugLog('openGatePedestrian'),fetch(_0x4e1600,{'method':_0x19fd04(0x21f),'body':JSON['stringify']({'beaconId':beaconIdPedestrian,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams}),'headers':{'Accept':_0x19fd04(0x229),'Content-Type':_0x19fd04(0x229)}})[_0x19fd04(0x185)](_0xfb27bb=>{const _0x57ae69=_0x19fd04;showProgress(![]),_0xfb27bb[_0x57ae69(0x1fe)]()[_0x57ae69(0x185)](_0x4c9925=>{const _0xca1073=_0x57ae69;try{_0x4c9925[_0xca1073(0x235)]?(showAwaiting(),hideGateLayout(),hideOpenButton(),onClickBackPedestrian(),onClickBackGateIssues(),document[_0xca1073(0x221)](_0xca1073(0x178))[_0xca1073(0x173)]='',document[_0xca1073(0x221)](_0xca1073(0x25a))[_0xca1073(0x173)]=_0xca1073(0x24c),J2N_postOnInfo('Thank\x20you\x20for\x20using\x20pedestrian\x20access'),pushLogs()):(J2N_printLog(JSON[_0xca1073(0x203)](_0x4c9925)),J2N_postOnFailure(JSON[_0xca1073(0x203)](_0x4c9925)),pushLogs());}catch(_0xe749d7){showProgress(![]),debugLog(_0xca1073(0x17f)+_0xe749d7[_0xca1073(0x1cd)]),J2N_printLog(_0xca1073(0x17b)+_0xe749d7[_0xca1073(0x1cd)]),J2N_postOnFailure('Gate\x20open\x20pedestrian\x20failure'),pushException('openGatePedestrian\x20response\x20inner'+_0xe749d7[_0xca1073(0x1cd)]),pushLogs();}});})['catch'](_0x23a32e=>{const _0x30bf97=_0x19fd04;showProgress(![]),debugLog('openGatePedExcep\x20'+_0x23a32e[_0x30bf97(0x1cd)]),J2N_printLog(_0x23a32e[_0x30bf97(0x1cd)]),J2N_postOnFailure('Failed\x20to\x20open\x20gate.\x20Please\x20try\x20again'),pushException(_0x30bf97(0x215)+_0x23a32e['message']);});}catch(_0xe16f79){showProgress(![]),debugLog(_0x19fd04(0x17f)+_0xe16f79[_0x19fd04(0x1cd)]),J2N_postOnFailure(_0x19fd04(0x1fb)),pushException(_0x19fd04(0x22a)+_0xe16f79['message']);}}function onClickBLEButton(){const _0x29c39b=_0x512fe5;try{scanToButtonClickDeltaSec=(Date[_0x29c39b(0x199)]()-scanToButtonClickDelta)/0x3e8;if(gate[_0x29c39b(0x257)](beaconData[_0x29c39b(0x187)][_0x29c39b(0x24f)][_0x29c39b(0x20e)][0x0][_0x29c39b(0x188)])===0x0)takeAction(0x1,gateForBeacon['get'](gate),gate);else{if(beaconData['beaconConfig'][_0x29c39b(0x24f)]['lanesToBeaconList'][_0x29c39b(0x24e)]>=0x2&&gate['localeCompare'](beaconData[_0x29c39b(0x187)]['lanesBeaconsMap']['lanesToBeaconList'][0x1][_0x29c39b(0x188)])===0x0)takeAction(0x2,gateForBeacon['get'](gate),gate);else beaconData[_0x29c39b(0x187)][_0x29c39b(0x24f)][_0x29c39b(0x20e)][_0x29c39b(0x24e)]>=0x3&&gate[_0x29c39b(0x257)](beaconData[_0x29c39b(0x187)][_0x29c39b(0x24f)]['lanesToBeaconList'][0x2][_0x29c39b(0x188)])===0x0&&takeAction(0x3,gateForBeacon[_0x29c39b(0x1d3)](gate),gate);}}catch(_0x173e5c){pushException(_0x29c39b(0x171)+_0x173e5c[_0x29c39b(0x1cd)]);}}function onClickGate1(){const _0x450fcc=_0x512fe5;try{takeAction(0x1,gateForBeacon[_0x450fcc(0x1d3)](beaconData[_0x450fcc(0x187)][_0x450fcc(0x24f)]['lanesToBeaconList'][0x0][_0x450fcc(0x188)]),beaconData[_0x450fcc(0x187)][_0x450fcc(0x24f)][_0x450fcc(0x20e)][0x0][_0x450fcc(0x188)]),scanToButtonClickDeltaSec=(Date[_0x450fcc(0x199)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x2c7426){pushException(_0x450fcc(0x225)+_0x2c7426[_0x450fcc(0x1cd)]);}}function onClickGate2(){const _0x182ab4=_0x512fe5;try{takeAction(0x2,gateForBeacon[_0x182ab4(0x1d3)](beaconData[_0x182ab4(0x187)][_0x182ab4(0x24f)][_0x182ab4(0x20e)][0x1][_0x182ab4(0x188)]),beaconData['beaconConfig'][_0x182ab4(0x24f)]['lanesToBeaconList'][0x0][_0x182ab4(0x188)]),scanToButtonClickDeltaSec=(Date[_0x182ab4(0x199)]()-scanToButtonClickDelta)/0x3e8;}catch(_0xb9f41b){pushException(_0x182ab4(0x196)+_0xb9f41b[_0x182ab4(0x1cd)]);}}function onClickGate3(){const _0x947484=_0x512fe5;try{takeAction(0x3,gateForBeacon[_0x947484(0x1d3)](beaconData[_0x947484(0x187)][_0x947484(0x24f)][_0x947484(0x20e)][0x2][_0x947484(0x188)]),beaconData[_0x947484(0x187)]['lanesBeaconsMap'][_0x947484(0x20e)][0x0]['gateID']),scanToButtonClickDeltaSec=(Date[_0x947484(0x199)]()-scanToButtonClickDelta)/0x3e8;}catch(_0x5aa9b9){pushException(_0x947484(0x1ed)+_0x5aa9b9[_0x947484(0x1cd)]);}}function onClickMoveForward(){const _0x35975c=_0x512fe5;try{document[_0x35975c(0x221)](_0x35975c(0x19d))[_0x35975c(0x219)][_0x35975c(0x209)]('hide'),document['getElementById']('alert')['classList']['add'](_0x35975c(0x198));}catch(_0x19c593){pushException('onClickMoveForward\x20'+_0x19c593['message']);}}function onClickNFCButton(){J2N_startNFCScan();}function onClickStart(){}function onClickSimulate(){}function onClickQRButton(){const _0x30668d=_0x512fe5;try{J2N_startQRScan();}catch(_0x74c9bb){pushException(_0x30668d(0x248)+_0x74c9bb[_0x30668d(0x1cd)]);}}function showGateLayout(){const _0xbab844=_0x512fe5;try{document['getElementById'](_0xbab844(0x25a))[_0xbab844(0x214)][_0xbab844(0x200)]=_0xbab844(0x1ce),document['getElementById'](_0xbab844(0x1da))[_0xbab844(0x219)][_0xbab844(0x209)](_0xbab844(0x198)),document['getElementById'](_0xbab844(0x1e6))[_0xbab844(0x219)]['remove'](_0xbab844(0x198)),document[_0xbab844(0x221)](_0xbab844(0x240))[_0xbab844(0x219)]['remove'](_0xbab844(0x198)),beaconData[_0xbab844(0x187)][_0xbab844(0x24f)][_0xbab844(0x20e)][_0xbab844(0x24e)]>0x2?document[_0xbab844(0x221)](_0xbab844(0x21e))[_0xbab844(0x219)][_0xbab844(0x209)](_0xbab844(0x198)):document[_0xbab844(0x221)](_0xbab844(0x21e))['classList'][_0xbab844(0x1f1)]('hide'),getBeaconListResponse[_0xbab844(0x1fc)][_0xbab844(0x1f0)]!=null&&getBeaconListResponse[_0xbab844(0x1fc)][_0xbab844(0x1f0)][_0xbab844(0x257)]('1')===0x0&&document['getElementById'](_0xbab844(0x1e6))[_0xbab844(0x219)][_0xbab844(0x1f1)]('hide');}catch(_0x537c84){pushException(_0xbab844(0x212)+_0x537c84['message']);}}function hideOpenButton(){const _0x50a064=_0x512fe5;try{document[_0x50a064(0x221)]('button_enable')[_0x50a064(0x219)][_0x50a064(0x1f1)](_0x50a064(0x198));}catch(_0x1ee7c3){pushException(_0x50a064(0x19f)+_0x1ee7c3[_0x50a064(0x1cd)]);}}function hideGateLayout(){const _0x4f8802=_0x512fe5;try{document[_0x4f8802(0x221)](_0x4f8802(0x1da))[_0x4f8802(0x219)][_0x4f8802(0x1f1)](_0x4f8802(0x198)),document[_0x4f8802(0x221)](_0x4f8802(0x1e6))[_0x4f8802(0x219)]['innerHTML']='',document[_0x4f8802(0x221)](_0x4f8802(0x21e))[_0x4f8802(0x219)][_0x4f8802(0x173)]='',document[_0x4f8802(0x221)](_0x4f8802(0x240))[_0x4f8802(0x219)][_0x4f8802(0x173)]='';}catch(_0x175924){pushException('hideGateLayout\x20'+_0x175924[_0x4f8802(0x1cd)]);}}function showOpenButton(){const _0x38b09c=_0x512fe5;try{document[_0x38b09c(0x221)](_0x38b09c(0x25a))['style']['color']='#FFFFFF',document[_0x38b09c(0x221)](_0x38b09c(0x1a6))[_0x38b09c(0x219)][_0x38b09c(0x209)](_0x38b09c(0x198));}catch(_0x17ca61){pushException(_0x38b09c(0x231)+_0x17ca61['message']);}}function hideAwaiting(){const _0x3e0471=_0x512fe5;try{scanToButtonGreenDeltaSec===0x0&&(debugLog('Hide\x20Awaiting'),scanToButtonGreenDeltaSec=(Date[_0x3e0471(0x199)]()-screenAppearanceTime)/0x3e8),document['getElementById'](_0x3e0471(0x19b))[_0x3e0471(0x219)]['add'](_0x3e0471(0x198));}catch(_0x2fdbba){pushException(_0x3e0471(0x1db)+_0x2fdbba['message']);}}function showAwaiting(){const _0x5115b1=_0x512fe5;try{document['getElementById'](_0x5115b1(0x19b))['classList']['remove'](_0x5115b1(0x198));}catch(_0x44cc6a){pushException('showAwaiting\x20'+_0x44cc6a['message']);}}function _0x401d(){const _0x3ad667=['simulationMode=true','deg2rad\x20','estimoteCloudDetails','proximitydata','divrt://5350504C-5553-434F-5250-4F524154494F/30003/111','message','#FFFFFF','api/v2/decisionInfo','https://pinaboxapi-dev.divrt.co/','Open\x20Gate\x20failure','cos','get','firstBleHitTime','popupappear','hideAwaitingPedestrian\x20','Timer\x20Ended','back_btn','delete','multi_gate','hideAwaiting\x20','getURL','BLE','container_pedestrian','single','bleEnabledTime','parking','demoGarage','appendChild','gateType','gate_issues','left_btn','getHardwareConfiguration\x20response','1384212UyBFtd','2311176SVLlEo','Start\x20time\x20','10079256FzlYxN','name','onClickGate3\x20','62276','validateLoopData\x20','isPedestrian','add','button_enable_pedestrian','Wrong\x20code\x20scanned,\x20please\x20try\x20again','tcp://mqtts.divrt.co:1883','simulation_mode','nameValuePairs','createElement','api/v2/openGate','PinaTest','Exception','Failed\x20to\x20open\x20gate.\x20Please\x20try\x20again','data','\x20-\x20','json','clientId','color','differentiationDelta','oneList','stringify','email','appIconImage','environment','pinaMiscParams','4f3765a60e61facd73cf757d1610e8f37be26c97323290971793feaf06b06982','remove','values','takeAction\x20','TEST','autoSelectMode','lanesToBeaconList','sequenceLogs','oneBeacon','J2N_startBeaconScan','showGateLayout\x20','push','style','openGate\x20response\x20outer','otherLaneLoop','mqtt_topic','techType','classList','sin','Move\x20closer\x20to\x20the\x20gate\x20to\x20exit','garageLongitude','loader','middle_btn','POST','buttonMode','getElementById','decision_time','container_gate_issues','onClickPedestrian\x20','onClickGate1\x20','secret_key','839190wChRRW','JSInteractionWrapper.js','application/json','openGate\x20','catch','weight','bookingID','validateHardwareConfig\x20','latitude','pinaConfigParams','showOpenButton\x20','maxDistance','loopConfig','iOSSpecific.js','status','startCountDownTimer\x20','jsversion','multi','navigator','osversion','src','Point\x20B','showOpenButtonPedestrian\x20','phpMQTT-subscriber','parking1234','right_btn','hardwarfalse=','loopsList','pedestrian_flow','442539yZgzUu','alert','loopList','zid','onClickQRButton\x20','pushLogs\x20response\x20','pinaClientParams','latLong.latitude','Move\x20closer\x20to\x20the\x20gate\x20to\x20enter','nfcData','length','lanesBeaconsMap','parse','scanToButtonClickDelta','time','helpText','Thank\x20you\x20for\x20visiting\x20ABC\x20Garage','loopData','logo','localeCompare','simulation','container_main','move_closer_text','set','password','background','button_ble_pedestrian','onClickGateIssues\x20','PROD','longitude','beaconData','laneMqttTopics','flushData\x20','Gate\x20open\x20failure','pinaJSParams','move_closer_text_pedestrian','validateLatLong\x20','beaconList','This\x20is\x20prebundle\x20JS','onClickBLEButton\x20','displayWebViewAndStartSDK\x20','innerHTML','minimumBeaconThreshold','gateButtonBgColor','firstDistance','outcome','welcome_text','dev','https://loggerapi-dev.divrt.co/log','openGatePedestrian\x20failure','ostype','#F2555C','getHardwareConfiguration\x20','openGatePedExcep\x20','scanToButtonGreenDelta','script','invisible','https://static.divrt.co/images/pinabox/spp/spplogo.png','getHardwareConfiguration','then','uid','beaconConfig','gateID','qrData','loopEnabled','openedGate','dateDecisionDelta','container','openGate','onLine','value','loopEnabledTime','defer','attachment_minor_ids','anveshtokala','latLong.longitude','onClickGate2\x20','simulationMode','hide','now','pushLogs\x20','button_ble','openGateExcep\x20','main_container','bearerToken','hideOpenButton\x20','6LfpAgh','https://loggerapi.divrt.co/log','action','beaconId','1927332iDRzgM','divrt-mqtt-dev','button_enable','validateQR\x20','androidObj','loopDetectorMqttTopic','openGate\x20response\x20inner','getDistanceFromLatLonInKm\x20','takeAction\x20inner\x20','split','sqrt','Simulation\x20mode\x20is\x20restricted\x20in\x20Production.\x20Please\x20change\x20DIVRT\x20environment\x20to\x20DEV','userName','mqtts.divrt.co','replace','entrance_id','getElementsByClassName','4201580ZdyJbG','type','ranges','https://meghak2.divrt.co/','NFC','myLaneLoop','otherBeacon','showProgress\x20','uniqueID','serverUri','AndroidSpecific.js','proceed_btn','version','radius','refno','button_qr','atan2','button_nfc','No\x20network\x20available.\x20Please\x20check\x20your\x20connection\x20and\x20try\x20again'];_0x401d=function(){return _0x3ad667;};return _0x401d();}function showSimulation(){const _0x5b3109=_0x512fe5;pinaConfigParams[_0x5b3109(0x197)]!=undefined&&pinaConfigParams[_0x5b3109(0x197)]?document[_0x5b3109(0x221)]('simulation')[_0x5b3109(0x219)][_0x5b3109(0x209)](_0x5b3109(0x198)):document['getElementById'](_0x5b3109(0x258))[_0x5b3109(0x219)][_0x5b3109(0x1f1)](_0x5b3109(0x198));}function showDevMode(){const _0x472424=_0x512fe5;pinaConfig[_0x472424(0x206)]!=undefined&&pinaConfig[_0x472424(0x206)][_0x472424(0x257)]('PROD')?document[_0x472424(0x221)](_0x472424(0x179))[_0x472424(0x219)][_0x472424(0x209)](_0x472424(0x198)):document[_0x472424(0x221)](_0x472424(0x179))['classList'][_0x472424(0x1f1)](_0x472424(0x198));}function showGateIssues(){const _0x5af473=_0x512fe5;nfcData[_0x5af473(0x235)]==0x0&&qrCode[_0x5af473(0x235)]==0x0&&document['getElementById'](_0x5af473(0x1e5))[_0x5af473(0x219)][_0x5af473(0x1f1)](_0x5af473(0x198)),nfcData[_0x5af473(0x235)]==0x0&&document[_0x5af473(0x221)](_0x5af473(0x1c6))[_0x5af473(0x219)][_0x5af473(0x1f1)](_0x5af473(0x198)),qrCode['status']==0x0&&document[_0x5af473(0x221)](_0x5af473(0x1c4))[_0x5af473(0x219)][_0x5af473(0x1f1)](_0x5af473(0x198)),document[_0x5af473(0x221)]('loader')['classList']['add'](_0x5af473(0x198)),document[_0x5af473(0x221)](_0x5af473(0x18d))['classList'][_0x5af473(0x209)](_0x5af473(0x198)),document[_0x5af473(0x221)]('main_container')[_0x5af473(0x219)][_0x5af473(0x209)](_0x5af473(0x198)),document['getElementById'](_0x5af473(0x1de))[_0x5af473(0x219)][_0x5af473(0x1f1)](_0x5af473(0x198)),document['getElementById']('container_main')['classList'][_0x5af473(0x209)]('hide'),document['getElementById'](_0x5af473(0x223))[_0x5af473(0x219)][_0x5af473(0x1f1)]('hide');}function flushData(){const _0x53c86b=_0x512fe5;try{garageLocation={},loopData={},loopDetected=![],bleDetected=![],presentButtonMode='-1',collectDecisionData=!![],beaconHits=0x0,beaconDistanceGreaterThanRequired=!![],cancelled=![],gate='',atleastOneBeaconLessThanOneMtr=![],thresholdTimerExecuted=![],gateSelected=![],loopDetectors=[],minGateData=new Map(),maxGateData=new Map(),gateDatainitialised=![],gateloopData=new Map(),beaconsMap=new Map(),altBeaconsMap=new Map(),loopDetectorSimulation=0x0,outcome='',gateForBeacon=new Map(),decisionData={},minorId=new Map(),minDistance=new Map(),lastDistance=new Map(),prevQRMessage='',specificationType='',scanToButtonGreenDelta=Date[_0x53c86b(0x199)](),scanToButtonClickDelta=Date[_0x53c86b(0x199)](),gateDecisionDelta=Date[_0x53c86b(0x199)](),screenAppearanceTime=Date['now'](),scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,bookingID='',uid='',differentiationDelta=0x0,hideOpenButton(),hideGateLayout(),showAwaiting(),hideOpenButtonPedestrian(),showAwaitingPedestrian();}catch(_0x1da976){pushException(_0x53c86b(0x16a)+_0x1da976[_0x53c86b(0x1cd)]);}}function validateHardwareConfig(_0x31de33){const _0x3508fd=_0x512fe5;try{getBeaconListResponse=JSON[_0x3508fd(0x250)](_0x31de33),getBeaconListResponse!=undefined?initHardwareConfig():getHardwareConfiguration();}catch(_0x5b4962){getHardwareConfiguration(),pushException(_0x3508fd(0x22e)+_0x5b4962[_0x3508fd(0x1cd)]);}}function prefetchHardwareConfiguration(_0x57a93d){validatePinaConfig(_0x57a93d),getHardwareConfiguration(function(){J2N_printLog('~completedHardWareConfigruation');});}function initSDKMethods(){const _0x2bc31f=_0x512fe5;if(getBeaconListResponse!=undefined&&pinaConfig['pinaConfigParams'][_0x2bc31f(0x1e4)]==getBeaconListResponse[_0x2bc31f(0x1fc)][_0x2bc31f(0x1b6)]){let _0xd539b0={};_0xd539b0[_0x2bc31f(0x1be)]='tcp://mqtts.divrt.co:1883',_0xd539b0[_0x2bc31f(0x1ff)]='phpMQTT-subscriber',_0xd539b0[_0x2bc31f(0x1b0)]=pinaConfig[_0x2bc31f(0x206)]=='PROD'?_0x2bc31f(0x1a5):_0x2bc31f(0x194),_0xd539b0['password']=pinaConfig[_0x2bc31f(0x206)]==_0x2bc31f(0x166)?_0x2bc31f(0x1e1):_0x2bc31f(0x23f),_0xd539b0[_0x2bc31f(0x1a9)]=getBeaconListResponse[_0x2bc31f(0x1fc)][_0x2bc31f(0x255)][_0x2bc31f(0x233)]['mqtt_topic'],loopList=getBeaconListResponse[_0x2bc31f(0x1fc)][_0x2bc31f(0x255)][_0x2bc31f(0x242)],rangeData=new Map();if(isiOS()){_0xd539b0['serverUri']=pinaConfig[_0x2bc31f(0x206)]=='PROD'?_0x2bc31f(0x1b1):'broker.mqttdashboard.com',J2N_startLoopScan(JSON[_0x2bc31f(0x203)](_0xd539b0)),debugLog('J2N_startLoopScan');let _0x5b71d2=beaconData[_0x2bc31f(0x187)][_0x2bc31f(0x1b7)],_0x3a6df1=beaconData['beaconConfig'][_0x2bc31f(0x1ca)],_0x3f3f15={'arrayRangeCount':_0x5b71d2,'estimoteCloudDetailsModel':_0x3a6df1};J2N_startBeaconScan(JSON[_0x2bc31f(0x203)](_0x3f3f15)),debugLog(_0x2bc31f(0x211));}(pinaConfigParams['simulationMode']!=undefined&&pinaConfigParams[_0x2bc31f(0x197)]||getBeaconListResponse[_0x2bc31f(0x1fc)]['demoGarage']!=undefined&&getBeaconListResponse[_0x2bc31f(0x1fc)][_0x2bc31f(0x1e2)][_0x2bc31f(0x257)]('1')===0x0)&&(initLoopData(),initBeaconData());}else getHardwareConfiguration(function(){displayWebViewAndStartSDK();});}function displayWebViewAndStartSDK(_0x2c298d,_0x10f34d){const _0x42959f=_0x512fe5;try{debugLog(_0x42959f(0x170));if(_0x2c298d!=undefined){let _0x2cc06b=JSON[_0x42959f(0x250)](_0x2c298d);_0x2cc06b[_0x42959f(0x230)][_0x42959f(0x247)]!=pinaConfig[_0x42959f(0x230)][_0x42959f(0x247)]&&(getBeaconListResponse=undefined),validatePinaConfig(_0x2c298d);}getBeaconListResponse!=undefined&&_0x10f34d!=undefined&&(getBeaconListResponse=JSON[_0x42959f(0x250)](_0x10f34d),initHardwareConfig());scanToButtonGreenDeltaSec=0x0,gateDecisionDeltaSec=0x0,scanToButtonClickDeltaSec=0x0,loopEnabledTime=0x0,bleEnabledTime=0x0,firstBleHitTime=0x0,debugLog(_0x42959f(0x1d5)),showSimulation(),showDevMode();if(pinaConfig[_0x42959f(0x206)]==_0x42959f(0x166)&&pinaConfigParams['simulationMode']==!![]){alert('Simulation\x20mode\x20is\x20restricted\x20in\x20Production.\x20Please\x20change\x20DIVRT\x20environment\x20to\x20DEV');return;}initSDKMethods();}catch(_0x3c72c9){J2N_printLog(_0x3c72c9[_0x42959f(0x1cd)]),pushException(_0x42959f(0x172)+_0x3c72c9[_0x42959f(0x1cd)]);}}function validatePinaConfig(_0x1112fb){const _0x4ff0f9=_0x512fe5;try{flushData(),pinaConfig=JSON['parse'](_0x1112fb);isiOS()?(pinaConfigParams=pinaConfig[_0x4ff0f9(0x230)],pinaSdkParams=pinaConfig['pinaSdkParams'],pinaClientParams=pinaConfig[_0x4ff0f9(0x24a)]):(pinaConfigParams=pinaConfig['pinaConfigParams'][_0x4ff0f9(0x1f6)],pinaSdkParams=pinaConfig['pinaSdkParams'][_0x4ff0f9(0x1f6)],pinaClientParams=pinaConfig[_0x4ff0f9(0x24a)][_0x4ff0f9(0x1f6)],pinaMiscParams=pinaConfig[_0x4ff0f9(0x207)][_0x4ff0f9(0x1f6)]);document[_0x4ff0f9(0x221)](_0x4ff0f9(0x178))[_0x4ff0f9(0x173)]=pinaSdkParams[_0x4ff0f9(0x253)],document[_0x4ff0f9(0x221)](_0x4ff0f9(0x25a))['style']['color']=pinaSdkParams[_0x4ff0f9(0x175)]||_0x4ff0f9(0x17d);pinaConfigParams[_0x4ff0f9(0x1e4)][_0x4ff0f9(0x257)]('IN')===0x0?document[_0x4ff0f9(0x221)]('move_closer_text')[_0x4ff0f9(0x173)]=_0x4ff0f9(0x24c):document[_0x4ff0f9(0x221)](_0x4ff0f9(0x25a))[_0x4ff0f9(0x173)]=_0x4ff0f9(0x21b);showDevMode();if(pinaSdkParams[_0x4ff0f9(0x175)]!=undefined){var _0x597fcc=document[_0x4ff0f9(0x1b4)](_0x4ff0f9(0x1c0)),_0x593928=document['getElementsByClassName']('multi_gate_btn'),_0x295a5c=document['getElementsByClassName'](_0x4ff0f9(0x1d8)),_0x16f9e7=document[_0x4ff0f9(0x1b4)](_0x4ff0f9(0x21d));for(var _0x3a1c25=0x0;_0x3a1c25<_0x597fcc[_0x4ff0f9(0x24e)];_0x3a1c25++){_0x597fcc[_0x3a1c25][_0x4ff0f9(0x214)][_0x4ff0f9(0x25d)]=pinaSdkParams['gateButtonBgColor'];}for(var _0x3a1c25=0x0;_0x3a1c25<_0x593928[_0x4ff0f9(0x24e)];_0x3a1c25++){_0x593928[_0x3a1c25][_0x4ff0f9(0x214)][_0x4ff0f9(0x25d)]=pinaSdkParams['gateButtonBgColor'];}for(var _0x3a1c25=0x0;_0x3a1c25<_0x295a5c[_0x4ff0f9(0x24e)];_0x3a1c25++){_0x295a5c[_0x3a1c25][_0x4ff0f9(0x214)][_0x4ff0f9(0x25d)]=pinaSdkParams[_0x4ff0f9(0x175)];}for(var _0x3a1c25=0x0;_0x3a1c25<_0x16f9e7[_0x4ff0f9(0x24e)];_0x3a1c25++){_0x295a5c[_0x3a1c25][_0x4ff0f9(0x214)][_0x4ff0f9(0x25d)]=pinaSdkParams[_0x4ff0f9(0x175)];}document[_0x4ff0f9(0x221)](_0x4ff0f9(0x16d))[_0x4ff0f9(0x214)][_0x4ff0f9(0x200)]=pinaSdkParams[_0x4ff0f9(0x175)],document[_0x4ff0f9(0x221)](_0x4ff0f9(0x25a))[_0x4ff0f9(0x214)]['color']=pinaSdkParams[_0x4ff0f9(0x175)];}pinaSdkParams[_0x4ff0f9(0x205)]!=undefined?document[_0x4ff0f9(0x221)](_0x4ff0f9(0x256))[_0x4ff0f9(0x23b)]=pinaSdkParams[_0x4ff0f9(0x205)]:document['getElementById']('logo')[_0x4ff0f9(0x23b)]=_0x4ff0f9(0x183);}catch(_0x3ffde8){J2N_printLog(_0x3ffde8[_0x4ff0f9(0x1cd)]),pushException('validatePinaConfig\x20'+_0x3ffde8[_0x4ff0f9(0x1cd)]);}}function validateLoopData(_0x353135){const _0x184eb3=_0x512fe5;try{const _0x47743a=JSON['parse'](_0x353135);for(let _0x130525=0x0;_0x130525<getBeaconListResponse[_0x184eb3(0x1fc)][_0x184eb3(0x255)][_0x184eb3(0x233)]['laneMqttTopics']['length'];_0x130525++){_0x47743a['topic'][_0x184eb3(0x257)](getBeaconListResponse[_0x184eb3(0x1fc)][_0x184eb3(0x255)]['loopConfig'][_0x184eb3(0x169)][_0x130525]['loop0Topic'])===0x0&&(gateloopData[_0x184eb3(0x25b)](getBeaconListResponse[_0x184eb3(0x1fc)][_0x184eb3(0x255)][_0x184eb3(0x233)][_0x184eb3(0x169)][_0x130525][_0x184eb3(0x188)],_0x47743a[_0x184eb3(0x190)]),gateDatainitialised&&(_0x47743a[_0x184eb3(0x190)]===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date[_0x184eb3(0x199)]()-screenAppearanceTime)/0x3e8)),presentButtonMode['toString']()[_0x184eb3(0x257)]('-1')===0x0&&!(getBeaconListResponse[_0x184eb3(0x1fc)][_0x184eb3(0x255)][_0x184eb3(0x233)][_0x184eb3(0x18a)]['localeCompare']('0')===0x0)&&takeAction(undefined,undefined,undefined)),_0x47743a[_0x184eb3(0x252)]=returnDelta(),loopValues[_0x184eb3(0x213)](_0x47743a));}}catch(_0x48b97a){pushException(_0x184eb3(0x1ef)+_0x48b97a[_0x184eb3(0x1cd)]);}}function validateLatLong(_0x13eea9){const _0x1ac405=_0x512fe5;try{const _0x53f962=JSON[_0x1ac405(0x250)](_0x13eea9);currentLocation[_0x1ac405(0x22f)]=_0x53f962[_0x1ac405(0x22f)],currentLocation[_0x1ac405(0x167)]=_0x53f962[_0x1ac405(0x167)],J2N_printLog(_0x1ac405(0x24b)+_0x53f962[_0x1ac405(0x22f)]),J2N_printLog(_0x1ac405(0x195)+_0x53f962['longitude']);}catch(_0x540f76){pushException(_0x1ac405(0x16e)+_0x540f76[_0x1ac405(0x1cd)]);}}function getDistanceFromLatLonInKm(_0x4a73cc,_0x2603ce,_0x5e4bfe,_0x191301){const _0x5a1af6=_0x512fe5;try{let _0x5c5c41=0x18e3,_0xc78e61=deg2rad(_0x5e4bfe-_0x4a73cc),_0x1ffa9c=deg2rad(_0x191301-_0x2603ce),_0x465110=Math[_0x5a1af6(0x21a)](_0xc78e61/0x2)*Math[_0x5a1af6(0x21a)](_0xc78e61/0x2)+Math[_0x5a1af6(0x1d2)](deg2rad(_0x4a73cc))*Math[_0x5a1af6(0x1d2)](deg2rad(_0x5e4bfe))*Math[_0x5a1af6(0x21a)](_0x1ffa9c/0x2)*Math['sin'](_0x1ffa9c/0x2),_0x1f3fbb=0x2*Math[_0x5a1af6(0x1c5)](Math[_0x5a1af6(0x1ae)](_0x465110),Math[_0x5a1af6(0x1ae)](0x1-_0x465110)),_0x50d636=_0x5c5c41*_0x1f3fbb;return _0x50d636;}catch(_0x22ea2d){pushException(_0x5a1af6(0x1ab)+_0x22ea2d['message']);}}function deg2rad(_0x425dfb){const _0xecf09c=_0x512fe5;try{return _0x425dfb*(Math['PI']/0xb4);}catch(_0x12fa67){pushException(_0xecf09c(0x1c9)+_0x12fa67[_0xecf09c(0x1cd)]);}}function validateNFC(_0x2f8d86){const _0x358295=_0x512fe5;try{beaconId=_0x2f8d86,techType=_0x358295(0x1b9),specificationType='2',openGate();}catch(_0x252e69){J2N_printLog(_0x252e69[_0x358295(0x1cd)]),J2N_postOnFailure('Wrong\x20NFC\x20scanned'),pushException('validateNFC\x20'+_0x252e69[_0x358295(0x1cd)]);}}function validateQR(_0x4596dc){const _0x3aedec=_0x512fe5;try{if(prevQRMessage[_0x3aedec(0x257)](_0x4596dc)===0x0){}else prevQRMessage=_0x4596dc,beaconId=prevQRMessage,techType='QR',specificationType='3',openGate();}catch(_0x590f44){J2N_printLog(_0x590f44[_0x3aedec(0x1cd)]),J2N_postOnFailure(_0x3aedec(0x1f3)),pushException(_0x3aedec(0x1a7)+_0x590f44[_0x3aedec(0x1cd)]);}}function takeAction(_0x484f35,_0x3d50fd,_0x21eda2){const _0x351ab0=_0x512fe5;try{if(pinaConfigParams[_0x351ab0(0x197)]!=undefined&&pinaConfigParams[_0x351ab0(0x197)]||getBeaconListResponse[_0x351ab0(0x1fc)][_0x351ab0(0x1e2)]!=undefined&&getBeaconListResponse[_0x351ab0(0x1fc)][_0x351ab0(0x1e2)][_0x351ab0(0x257)]('1')===0x0)debugLog(_0x351ab0(0x1c8)),presentButtonMode[_0x351ab0(0x257)]('-1')===0x0?(presentButtonMode='1',isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout()):_0x21eda2!=undefined&&(beaconId=_0x3d50fd,openGate());else{if(gateDatainitialised){if(getBeaconListResponse[_0x351ab0(0x1fc)][_0x351ab0(0x255)][_0x351ab0(0x233)][_0x351ab0(0x18a)]['localeCompare']('0')===0x0)presentButtonMode[_0x351ab0(0x257)]('-1')===0x0?(isiOS()?selectGateiOS():selectGateAndroid(),hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1'):_0x484f35!=undefined&&(beaconId=_0x3d50fd,openGate());else try{beaconId=_0x3d50fd,myLaneLoop='0',otherLaneLoop='0';if(presentButtonMode[_0x351ab0(0x257)]('-1')===0x0&&(!loopDetected||!bleDetected))return;else{presentButtonMode['localeCompare']('-1')===0x0&&loopDetected&&bleDetected&&(isiOS()?selectGateiOS():selectGateAndroid());gateDecisionDeltaSec===0x0&&(gateDecisionDeltaSec=(Date[_0x351ab0(0x199)]()-screenAppearanceTime)/0x3e8);let _0x587521='-1',_0x32c77d='-1',_0x2d5a57='-1',_0x4b8e52=0x0;for(let [_0x50a3ab,_0x4cc08d]of gateloopData){if(_0x4b8e52===0x0)_0x587521=''+_0x4cc08d,_0x4b8e52++;else{if(_0x4b8e52===0x1)_0x32c77d=''+_0x4cc08d,_0x4b8e52++;else _0x4b8e52===0x2&&(_0x2d5a57=''+_0x4cc08d,_0x4b8e52++);}}let _0x334f2=_0x484f35!=undefined?_0x484f35:lane;switch(_0x334f2){case 0x1:if(_0x587521[_0x351ab0(0x257)]('1')===0x0)myLaneLoop=0x1;if(_0x32c77d[_0x351ab0(0x257)]('1')===0x0||_0x2d5a57[_0x351ab0(0x257)]('1')===0x0)otherLaneLoop=0x1;break;case 0x2:if(_0x32c77d[_0x351ab0(0x257)]('1')===0x0)myLaneLoop=0x1;if(_0x587521[_0x351ab0(0x257)]('1')===0x0||_0x2d5a57['localeCompare']('1')===0x0)otherLaneLoop=0x1;break;case 0x3:if(_0x2d5a57[_0x351ab0(0x257)]('1')===0x0)myLaneLoop=0x1;if(_0x587521['localeCompare']('1')===0x0||_0x32c77d[_0x351ab0(0x257)]('1')===0x0)otherLaneLoop=0x1;break;default:break;}let _0x54e330;if(loopList!=null&&loopList[_0x351ab0(0x24e)]>0x0)for(let _0x24b6be=0x0;_0x24b6be<loopList[_0x351ab0(0x24e)];_0x24b6be++){if((loopList[_0x24b6be][_0x351ab0(0x210)][_0x351ab0(0x257)]('X')===0x0||loopList[_0x24b6be][_0x351ab0(0x210)]['localeCompare'](oneBeacon)===0x0)&&(loopList[_0x24b6be][_0x351ab0(0x1bb)][_0x351ab0(0x257)]('X')===0x0||loopList[_0x24b6be][_0x351ab0(0x1bb)][_0x351ab0(0x257)](otherBeacon)===0x0)&&(loopList[_0x24b6be][_0x351ab0(0x1ba)]['localeCompare']('X')===0x0||loopList[_0x24b6be][_0x351ab0(0x1ba)]['localeCompare'](myLaneLoop)===0x0)&&(loopList[_0x24b6be][_0x351ab0(0x216)]['localeCompare']('X')===0x0||loopList[_0x24b6be][_0x351ab0(0x216)][_0x351ab0(0x257)](otherLaneLoop)===0x0)&&loopList[_0x24b6be]['presentButtonMode'][_0x351ab0(0x257)](presentButtonMode)===0x0){_0x54e330=loopList[_0x24b6be];if(outcome===''||_0x21eda2!=undefined){if(_0x21eda2!=undefined)outcome=outcome+_0x54e330[_0x351ab0(0x177)]['replace']('#',_0x21eda2);else gate!=undefined&&(outcome=outcome+_0x54e330[_0x351ab0(0x177)][_0x351ab0(0x1b2)]('#',gate));}switch(_0x54e330[_0x351ab0(0x1a2)]){case'-1':presentButtonMode=_0x54e330[_0x351ab0(0x1a2)];break;case'0':_0x21eda2!=undefined&&openGate();break;case'1':buttonMode=_0x351ab0(0x1df),hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode=_0x54e330[_0x351ab0(0x1a2)];break;case'2':buttonMode=_0x351ab0(0x238),hideAwaiting(),showGateLayout(),hideOpenButton(),presentButtonMode=_0x54e330[_0x351ab0(0x1a2)];break;case'3':document['getElementById']('main_container')[_0x351ab0(0x219)][_0x351ab0(0x1f1)](_0x351ab0(0x198)),document['getElementById'](_0x351ab0(0x245))[_0x351ab0(0x219)][_0x351ab0(0x209)](_0x351ab0(0x198));break;default:break;}return;}}}}catch(_0x3ba4aa){J2N_printLog(_0x3ba4aa['message']),pushException(_0x351ab0(0x1ac)+_0x3ba4aa[_0x351ab0(0x1cd)]);}}}}catch(_0x41725f){pushException(_0x351ab0(0x20b)+_0x41725f[_0x351ab0(0x1cd)]);}}function showProgress(_0x4c3210){const _0x37b900=_0x512fe5;try{var _0x27ed90=document[_0x37b900(0x221)](_0x37b900(0x21d));_0x4c3210?_0x27ed90['classList'][_0x37b900(0x209)]('hide'):_0x27ed90[_0x37b900(0x219)][_0x37b900(0x1f1)](_0x37b900(0x198));}catch(_0x4dee55){pushException(_0x37b900(0x1bc)+_0x4dee55[_0x37b900(0x1cd)]);}}function getHardwareConfiguration(_0x5b696e){const _0x4f96af=_0x512fe5;try{const _0x551a7d=url_base[_0x4f96af(0x1dc)]+url_hardwareConfig;showProgress(!![]),debugLog(_0x4f96af(0x184)),fetch(_0x551a7d,{'method':_0x4f96af(0x21f),'body':JSON['stringify']({'pinaConfigParams':pinaConfigParams,'pinaJSParams':pinaConfig['pinaJSParams']}),'headers':{'Accept':_0x4f96af(0x229),'Content-Type':'application/json'}})[_0x4f96af(0x185)](_0x35bcab=>_0x35bcab[_0x4f96af(0x1fe)]())['then'](_0x13aef9=>{const _0x2d3cad=_0x4f96af;showProgress(![]);let _0x3e27e7=!!_0x13aef9[_0x2d3cad(0x235)]||![],_0x4939b7=_0x13aef9[_0x2d3cad(0x1cd)]||'';_0x3e27e7==!![]?(getBeaconListResponse=_0x13aef9,J2N_forceJSupdate(JSON[_0x2d3cad(0x203)](_0x13aef9)),initHardwareConfig(),_0x5b696e()):debugLog(_0x2d3cad(0x241),_0x4939b7);})[_0x4f96af(0x22b)](_0x5aa582=>{const _0x55317b=_0x4f96af;J2N_printLog(_0x5aa582[_0x55317b(0x1cd)]),showProgress(![]),pushException(_0x55317b(0x1e7)+_0x5aa582[_0x55317b(0x1cd)]);});}catch(_0x500b45){showProgress(![]),pushException(_0x4f96af(0x17e)+_0x500b45[_0x4f96af(0x1cd)]);}}function initHardwareConfig(){const _0xc4adad=_0x512fe5;try{beaconData=getBeaconListResponse[_0xc4adad(0x1fc)][_0xc4adad(0x168)],nfcData=getBeaconListResponse[_0xc4adad(0x1fc)][_0xc4adad(0x24d)],qrCode=getBeaconListResponse['data'][_0xc4adad(0x189)];getBeaconListResponse[_0xc4adad(0x1fc)]['isPedestrian']!=null&&getBeaconListResponse['data'][_0xc4adad(0x1f0)]['localeCompare']('1')===0x0?document['getElementById'](_0xc4adad(0x243))['classList'][_0xc4adad(0x209)](_0xc4adad(0x182)):document[_0xc4adad(0x221)]('pedestrian_flow')['classList']['add']('invisible');if(isiOS()){let _0xa76548=beaconData[_0xc4adad(0x187)]['ranges'];for(let _0x4f2748=0x0;_0x4f2748<_0xa76548[_0xc4adad(0x24e)];_0x4f2748++){rangeWeightData['set'](_0xa76548[_0x4f2748][_0xc4adad(0x1c2)],_0xa76548[_0x4f2748][_0xc4adad(0x22c)]);}}autoSelectMode=beaconData[_0xc4adad(0x187)][_0xc4adad(0x20d)],autoSelectMode[_0xc4adad(0x174)]=beaconData['beaconConfig']['minimumBeaconThreshold'],autoSelectMode['minimumSingleButtonThreshold']=beaconData[_0xc4adad(0x187)][_0xc4adad(0x174)],maxDistance=parseInt(qrCode['qrConfig'][_0xc4adad(0x232)]),garageLocation[_0xc4adad(0x1ec)]=_0xc4adad(0x23c),garageLocation[_0xc4adad(0x22f)]=parseFloat(getBeaconListResponse[_0xc4adad(0x1fc)]['garageLatitude']),garageLocation['longitude']=parseFloat(getBeaconListResponse[_0xc4adad(0x1fc)][_0xc4adad(0x21c)]),loopDetectors=getBeaconListResponse[_0xc4adad(0x1fc)][_0xc4adad(0x255)][_0xc4adad(0x246)];for(let _0x2ed4a0=0x0;_0x2ed4a0<beaconData[_0xc4adad(0x187)][_0xc4adad(0x24f)][_0xc4adad(0x20e)][_0xc4adad(0x24e)];_0x2ed4a0++){gateloopData[_0xc4adad(0x25b)](beaconData['beaconConfig']['lanesBeaconsMap']['lanesToBeaconList'][_0x2ed4a0][_0xc4adad(0x188)],0x0);}let _0x2130d5={};_0x2130d5[_0xc4adad(0x1be)]=_0xc4adad(0x1f4),_0x2130d5[_0xc4adad(0x1ff)]=_0xc4adad(0x23e),_0x2130d5[_0xc4adad(0x1b0)]=_0xc4adad(0x1a5),_0x2130d5[_0xc4adad(0x25c)]=_0xc4adad(0x1e1),_0x2130d5[_0xc4adad(0x1a9)]=getBeaconListResponse[_0xc4adad(0x1fc)][_0xc4adad(0x255)][_0xc4adad(0x233)][_0xc4adad(0x217)],loopList=getBeaconListResponse['data'][_0xc4adad(0x255)]['loopsList'],showGateIssues();}catch(_0x3efc73){J2N_printLog(_0x3efc73[_0xc4adad(0x1cd)]),pushException('initHardwareConfig\x20'+_0x3efc73[_0xc4adad(0x1cd)]);}}function openGate(){const _0x23c990=_0x512fe5;if(pinaConfig[_0x23c990(0x206)]==_0x23c990(0x166)&&pinaConfigParams[_0x23c990(0x197)]==!![]){alert(_0x23c990(0x1af));return;}if(window[_0x23c990(0x239)][_0x23c990(0x18f)]==![]){alert(_0x23c990(0x1c7));return;}try{J2N_suspendClick();const _0x9eff9f=url_base[_0x23c990(0x1dc)]+url_openGate;showProgress(!![]),debugLog(_0x23c990(0x18e)),fetch(_0x9eff9f,{'method':_0x23c990(0x21f),'body':JSON[_0x23c990(0x203)]({'beaconId':beaconId,'specification_type':specificationType,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'pinaJSParams':pinaConfig['pinaJSParams']}),'headers':{'Accept':_0x23c990(0x229),'Content-Type':_0x23c990(0x229)}})['then'](_0x4adc27=>{const _0x2186ed=_0x23c990;showProgress(![]),_0x4adc27['json']()[_0x2186ed(0x185)](_0x2086a4=>{const _0x250e3d=_0x2186ed;try{_0x2086a4[_0x250e3d(0x235)]?(showAwaiting(),hideGateLayout(),hideOpenButton(),document['getElementById'](_0x250e3d(0x178))[_0x250e3d(0x173)]='',document['getElementById']('move_closer_text')[_0x250e3d(0x173)]=_0x250e3d(0x24c),document[_0x250e3d(0x221)](_0x250e3d(0x18d))[_0x250e3d(0x219)][_0x250e3d(0x1f1)]('hide'),document[_0x250e3d(0x221)](_0x250e3d(0x21d))[_0x250e3d(0x219)][_0x250e3d(0x209)](_0x250e3d(0x198)),bookingID=_0x2086a4[_0x250e3d(0x1c3)],uid=_0x2086a4[_0x250e3d(0x186)],pushLogs(),J2N_postOnSuccess(JSON['stringify'](_0x2086a4))):(J2N_printLog(JSON[_0x250e3d(0x203)](_0x2086a4)),J2N_postOnFailure(JSON[_0x250e3d(0x203)](_0x2086a4)),pushLogs());}catch(_0x37249b){showProgress(![]),debugLog(_0x250e3d(0x19c)+_0x37249b[_0x250e3d(0x1cd)]),J2N_printLog(_0x250e3d(0x1d1)+_0x37249b['message']),J2N_postOnFailure(_0x250e3d(0x16b)),pushException(_0x250e3d(0x1aa)+_0x37249b['message']),pushLogs();}});})[_0x23c990(0x22b)](_0x4f1f3e=>{const _0x425924=_0x23c990;showProgress(![]),debugLog(_0x425924(0x19c)+_0x4f1f3e[_0x425924(0x1cd)]),J2N_printLog(_0x4f1f3e[_0x425924(0x1cd)]),J2N_postOnFailure(_0x425924(0x1fb)),pushException('openGate\x20response\x20outer'+_0x4f1f3e['message']);});}catch(_0x2084ff){showProgress(![]),debugLog('openGateExcep\x20'+_0x2084ff['message']),J2N_postOnFailure(_0x23c990(0x1fb)),pushException(_0x23c990(0x22a)+_0x2084ff[_0x23c990(0x1cd)]);}}function pushLogs(){const _0x1e304f=_0x512fe5;try{let _0xc34731=[];for(let [_0x1957c4,_0xbdab3d]of minorId){let _0x1135d1={};_0x1135d1['minorID']=_0x1957c4,_0x1135d1['lastDistance']=lastDistance[_0x1e304f(0x1d3)](_0x1957c4),_0x1135d1['minDistance']=minDistance[_0x1e304f(0x1d3)](_0x1957c4),_0x1135d1[_0x1e304f(0x176)]=firstDistance[_0x1e304f(0x1d3)](_0x1957c4),_0x1135d1['firstTime']=firstTime[_0x1e304f(0x1d3)](_0x1957c4),_0xc34731[_0x1e304f(0x213)](_0x1135d1);}isiOS()?decisionData['beaconData']=Object[_0x1e304f(0x20a)](weightDataDict):decisionData[_0x1e304f(0x168)]=_0xc34731;decisionData[_0x1e304f(0x255)]=loopValues,decisionData[_0x1e304f(0x18b)]=beaconId,decisionData['differentiationDelta']=differentiationDelta,decisionData[_0x1e304f(0x180)]=scanToButtonGreenDeltaSec,decisionData[_0x1e304f(0x251)]=scanToButtonClickDeltaSec,decisionData[_0x1e304f(0x18c)]=gateDecisionDeltaSec,decisionData[_0x1e304f(0x1f5)]=pinaConfigParams[_0x1e304f(0x197)],decisionData[_0x1e304f(0x220)]=buttonMode,decisionData[_0x1e304f(0x20f)]=logArray,(decisionData['proximitydata']=proximityDataArray,decisionData['outcome']=outcome),decisionData[_0x1e304f(0x22d)]=bookingID,decisionData[_0x1e304f(0x186)]=uid,decisionData[_0x1e304f(0x1e4)]=pinaConfigParams[_0x1e304f(0x1e4)],decisionData[_0x1e304f(0x17c)]=pinaConfigParams[_0x1e304f(0x17c)],decisionData[_0x1e304f(0x247)]=pinaConfigParams[_0x1e304f(0x247)],decisionData[_0x1e304f(0x1bd)]=pinaConfigParams[_0x1e304f(0x1bd)],decisionData[_0x1e304f(0x204)]=parseJwt(pinaClientParams[_0x1e304f(0x19e)]),decisionData[_0x1e304f(0x218)]=techType,decisionData[_0x1e304f(0x1d4)]=firstBleHitTime,decisionData[_0x1e304f(0x1e0)]=bleEnabledTime,decisionData[_0x1e304f(0x191)]=loopEnabledTime,decisionData[_0x1e304f(0x237)]=pinaConfig[_0x1e304f(0x16c)][_0x1e304f(0x1c1)],decisionData['osversion']=pinaConfigParams[_0x1e304f(0x23a)];const _0x1fbe1b=url_base[_0x1e304f(0x1dc)]+url_decisionInfo;logger(),fetch(_0x1fbe1b,{'method':'POST','body':JSON[_0x1e304f(0x203)](decisionData),'headers':{'Accept':'application/json','Content-Type':_0x1e304f(0x229)}})[_0x1e304f(0x185)](_0x51a5f5=>{})[_0x1e304f(0x22b)](_0x530c0a=>{const _0x1610fa=_0x1e304f;pushException(_0x1610fa(0x249)+_0x530c0a[_0x1610fa(0x1cd)]);});}catch(_0x1295e0){pushException(_0x1e304f(0x19a)+_0x1295e0[_0x1e304f(0x1cd)]);}}function startCountDownTimer(_0x1f38e2){const _0x51f716=_0x512fe5;try{_0x1f38e2?setTimeout(function(){const _0x1dd2df=_0x4450;bleEnabledTime===0x0&&(bleEnabledTime=(Date[_0x1dd2df(0x199)]()-screenAppearanceTime)/0x3e8),bleDetected=!![],thresholdTimerExecuted=!![],takeAction(undefined,undefined,undefined),debugLog(_0x1dd2df(0x1d7));},parseFloat(autoSelectMode[_0x51f716(0x222)])*0x3e8||0xbb8):thresholdTimerExecuted&&takeAction(undefined,undefined,undefined);}catch(_0x17258b){pushException(_0x51f716(0x236)+_0x17258b[_0x51f716(0x1cd)]);}}function pushException(_0x2f7868){const _0x196681=_0x512fe5;debugLog(_0x196681(0x1fa)+_0x2f7868),fetch(loggerURL['getURL'],{'method':_0x196681(0x21f),'body':JSON[_0x196681(0x203)]({'exception':_0x2f7868,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams['bearerToken']),'uid':parseInt(pinaConfig[_0x196681(0x230)][_0x196681(0x186)])||-0x1}),'headers':{'Accept':_0x196681(0x229),'Content-Type':_0x196681(0x229)}})['then'](_0x39c0ad=>{});}function logger(){const _0x1d2341=_0x512fe5;fetch(loggerURL[_0x1d2341(0x1dc)],{'method':'POST','body':JSON[_0x1d2341(0x203)]({'decisionData':decisionData,'pinaConfigParams':pinaConfigParams,'pinaClientParams':pinaClientParams,'prjId':0x1,'srcId':0x4,'email':parseJwt(pinaClientParams['bearerToken']),'uid':parseInt(pinaConfig['pinaConfigParams'][_0x1d2341(0x186)])||-0x1}),'headers':{'Accept':_0x1d2341(0x229),'Content-Type':_0x1d2341(0x229)}})[_0x1d2341(0x185)](_0x4a4ab8=>{});}function initPinaModel(){const _0x94e55c=_0x512fe5;try{pinaConfigParams={},pinaConfigParams[_0x94e55c(0x247)]=_0x94e55c(0x1ee),pinaConfigParams[_0x94e55c(0x1e4)]='IN',pinaConfigParams[_0x94e55c(0x226)]=_0x94e55c(0x208),pinaConfigParams[_0x94e55c(0x17c)]='Android',pinaConfigParams[_0x94e55c(0x1bd)]=_0x94e55c(0x1f9),pinaSdkParams={},pinaSdkParams[_0x94e55c(0x253)]=_0x94e55c(0x254),pinaClientParams={},pinaMiscParams={},decisionData[_0x94e55c(0x22d)]=pinaConfigParams['orderId'],decisionData[_0x94e55c(0x1e4)]=pinaConfigParams[_0x94e55c(0x1e4)],decisionData['osTypeVer']=pinaConfigParams['ostype'],decisionData[_0x94e55c(0x258)]=pinaConfigParams[_0x94e55c(0x197)],decisionData[_0x94e55c(0x247)]=pinaConfigParams['zid'],decisionData[_0x94e55c(0x186)]=pinaConfigParams[_0x94e55c(0x1bd)],document[_0x94e55c(0x221)](_0x94e55c(0x178))['innerHTML']=pinaSdkParams[_0x94e55c(0x253)],scanToButtonGreenDelta=Date[_0x94e55c(0x199)](),scanToButtonClickDelta=Date[_0x94e55c(0x199)](),gateDecisionDelta=Date[_0x94e55c(0x199)](),getHardwareConfig(undefined);}catch(_0x2af2f2){J2N_printLog(_0x2af2f2['message']);}}function initBeaconData(){const _0x11cd97=_0x512fe5;try{setTimeout(function(){const _0x551667=_0x4450;hideAwaiting(),showOpenButton(),hideGateLayout(),presentButtonMode='1',gate=beaconData[_0x551667(0x187)][_0x551667(0x24f)][_0x551667(0x20e)][0x0][_0x551667(0x188)];for(let _0x183f6c=0x0;_0x183f6c<beaconData[_0x551667(0x16f)][_0x551667(0x24e)];_0x183f6c++){gateForBeacon['set'](beaconData['beaconList'][_0x183f6c][_0x551667(0x188)],beaconData['beaconList'][_0x183f6c][_0x551667(0x1a3)]);}},0xbb8);}catch(_0x4e138e){J2N_printLog(_0x4e138e[_0x11cd97(0x1cd)]);}}function initLoopData(){}function initNFC(){const _0x6bb906=_0x512fe5;try{validateNFC('divrt://5350504C-5553-434F-5250-4F524154494F/12/121');}catch(_0x16d6be){J2N_printLog(_0x16d6be[_0x6bb906(0x1cd)]);}}function initQR(){const _0x356b2a=_0x512fe5;try{validateQR(_0x356b2a(0x1cc));}catch(_0x3c9037){J2N_printLog(_0x3c9037[_0x356b2a(0x1cd)]);}}function baseParametersProximity(){const _0x2a771f=_0x512fe5;return decisionData[_0x2a771f(0x168)]=Object[_0x2a771f(0x20a)](weightDataDict),decisionData[_0x2a771f(0x255)]=loopValues,decisionData[_0x2a771f(0x18b)]=beaconId,decisionData[_0x2a771f(0x201)]=differentiationDelta,decisionData[_0x2a771f(0x180)]=scanToButtonGreenDeltaSec,decisionData[_0x2a771f(0x251)]=scanToButtonClickDeltaSec,decisionData[_0x2a771f(0x18c)]=gateDecisionDeltaSec,decisionData[_0x2a771f(0x1f5)]=pinaConfigParams[_0x2a771f(0x197)],decisionData[_0x2a771f(0x220)]=buttonMode,decisionData[_0x2a771f(0x20f)]=logArray,(decisionData[_0x2a771f(0x1cb)]=proximityDataArray,decisionData['outcome']=outcome),decisionData[_0x2a771f(0x22d)]=bookingID,decisionData[_0x2a771f(0x186)]=uid,decisionData[_0x2a771f(0x1e4)]=pinaConfigParams[_0x2a771f(0x1e4)],decisionData['ostype']=pinaConfigParams[_0x2a771f(0x17c)],decisionData[_0x2a771f(0x247)]=pinaConfigParams[_0x2a771f(0x247)],decisionData[_0x2a771f(0x1bd)]=pinaConfigParams[_0x2a771f(0x1bd)],decisionData['email']=parseJwt(pinaClientParams[_0x2a771f(0x19e)]),decisionData['techType']=techType,decisionData[_0x2a771f(0x1d4)]=firstBleHitTime,decisionData[_0x2a771f(0x1e0)]=bleEnabledTime,decisionData[_0x2a771f(0x191)]=loopEnabledTime,decisionData[_0x2a771f(0x237)]=pinaConfig[_0x2a771f(0x16c)][_0x2a771f(0x1c1)],decisionData[_0x2a771f(0x23a)]=pinaConfigParams[_0x2a771f(0x23a)],decisionData;}function debugLog(_0x1c582f,_0x42c098){const _0x48409e=_0x512fe5;debugCount+=0x1;let _0x3e712f=Date[_0x48409e(0x199)]()/0x3e8;if(debugCount==0x1){logStartTime=_0x3e712f;const _0x18b3b2=_0x48409e(0x1ea)+new Date()['toUTCString']();logArray[_0x48409e(0x213)](_0x18b3b2);}const _0x1ab254=debugCount+_0x48409e(0x1fd)+_0x1c582f+_0x48409e(0x1fd)+parseInt(_0x3e712f-logStartTime);logArray[_0x48409e(0x213)](_0x1ab254);}function returnDelta(){const _0x17fb3b=_0x512fe5;let _0x7eda0b=Date[_0x17fb3b(0x199)]()/0x3e8;logStartTime==0x0&&(logStartTime=_0x7eda0b);let _0x327c9c=parseInt(_0x7eda0b-logStartTime);return _0x327c9c;}function parseJwt(_0x32c369){const _0x59238e=_0x512fe5;try{return JSON[_0x59238e(0x250)](atob(_0x32c369[_0x59238e(0x1ad)]('.')[0x1]))['email'];}catch(_0x2790bc){return'na';}};function initGateData(_0x26aa69){const _0x90a134=_0x512fe5;try{let _0x988d6b=0x0,_0x10b1c2=[];for(let _0x57cc27=0x0;_0x57cc27<beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x90a134(0x24e)];_0x57cc27++){beaconData[_0x90a134(0x187)]['lanesBeaconsMap']['lanesToBeaconList'][_0x57cc27][_0x90a134(0x1b3)]['localeCompare'](_0x26aa69)===0x0?(_0x10b1c2[_0x988d6b]=beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x57cc27],_0x988d6b++):gateloopData[_0x90a134(0x1d9)](beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x57cc27][_0x90a134(0x188)]);}beaconData[_0x90a134(0x187)]['lanesBeaconsMap'][_0x90a134(0x20e)]=_0x10b1c2;beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)]['length']==0x1?loopList=getBeaconListResponse[_0x90a134(0x1fc)][_0x90a134(0x255)][_0x90a134(0x202)]:loopList=getBeaconListResponse[_0x90a134(0x1fc)][_0x90a134(0x255)]['nList'];for(let _0x1b0fa5=0x0;_0x1b0fa5<beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x90a134(0x24e)];_0x1b0fa5++){var _0x3e0c99='';for(var _0x103e8c=0x0;_0x103e8c<beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x1b0fa5][_0x90a134(0x193)]['length'];_0x103e8c++){_0x3e0c99=_0x3e0c99+'*'+beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x1b0fa5][_0x90a134(0x193)][_0x103e8c];}minGateData[_0x90a134(0x25b)](_0x3e0c99,[beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x1b0fa5][_0x90a134(0x188)],0xa]),maxGateData[_0x90a134(0x25b)](_0x3e0c99,[beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x1b0fa5][_0x90a134(0x188)],0x0]);}document[_0x90a134(0x221)](_0x90a134(0x1e6))['innerHTML']=beaconData[_0x90a134(0x187)]['lanesBeaconsMap'][_0x90a134(0x20e)][0x0][_0x90a134(0x1ec)];beaconData[_0x90a134(0x187)][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x90a134(0x24e)]>0x1&&(document[_0x90a134(0x221)](_0x90a134(0x240))[_0x90a134(0x173)]=beaconData[_0x90a134(0x187)]['lanesBeaconsMap'][_0x90a134(0x20e)][0x1][_0x90a134(0x1ec)]);beaconData['beaconConfig'][_0x90a134(0x24f)][_0x90a134(0x20e)][_0x90a134(0x24e)]>0x2?document[_0x90a134(0x221)]('middle_btn')[_0x90a134(0x173)]=beaconData['beaconConfig'][_0x90a134(0x24f)][_0x90a134(0x20e)][0x2][_0x90a134(0x1ec)]:document[_0x90a134(0x221)]('middle_btn')['innerHTML']='';gateDatainitialised=!![];for(let [_0x237dbd,_0x563ef1]of gateloopData){_0x563ef1===0x1&&(loopDetected=!![],loopEnabledTime===0x0&&(loopEnabledTime=(Date['now']()-screenAppearanceTime)/0x3e8));}}catch(_0x4214bc){pushException('onClickGateIssues\x20'+_0x4214bc[_0x90a134(0x1cd)]);}}
